
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Beyond Pay Developer Portal</title>

    <link href="images/favicon.ico" rel="icon" type="image/ico" />

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
  background-color: #272822;
}
.highlight .nn {
  color: #ffffff;
  background-color: #272822;
}
.highlight .nl {
  color: #ffffff;
  background-color: #272822;
}
.highlight .ni {
  color: #ffffff;
  background-color: #272822;
}
.highlight .bp {
  color: #ffffff;
  background-color: #272822;
}
.highlight .vg {
  color: #ffffff;
  background-color: #272822;
}
.highlight .vi {
  color: #ffffff;
  background-color: #272822;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
  background-color: #272822;
}
.highlight .w {
  color: #ffffff;
  background-color: #272822;
}
.highlight {
  color: #ffffff;
  background-color: #272822;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
  background-color: #272822;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;php&quot;,&quot;csharp&quot;,&quot;java&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="" />
        <div class="lang-selector">
              <a href="#" data-language-name="php">php</a>
              <a href="#" data-language-name="csharp">c#</a>
              <a href="#" data-language-name="java">java</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#integration-options" class="toc-h1 toc-link" data-title="Integration Options">Integration Options</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#payment-plugins" class="toc-h2 toc-link" data-title="Payment Plugins">Payment Plugins</a>
                  </li>
                  <li>
                    <a href="#payment-sdks" class="toc-h2 toc-link" data-title="Payment SDKs">Payment SDKs</a>
                  </li>
                  <li>
                    <a href="#payment-apis" class="toc-h2 toc-link" data-title="Payment APIs">Payment APIs</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#online-payments" class="toc-h1 toc-link" data-title="Online Payments">Online Payments</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#getting-started" class="toc-h2 toc-link" data-title="Getting Started">Getting Started</a>
                  </li>
                  <li>
                    <a href="#environments" class="toc-h2 toc-link" data-title="Environments">Environments</a>
                  </li>
                  <li>
                    <a href="#create-a-payment-form" class="toc-h2 toc-link" data-title="Create a Payment Form">Create a Payment Form</a>
                  </li>
                  <li>
                    <a href="#obtain-a-token" class="toc-h2 toc-link" data-title="Obtain a Token">Obtain a Token</a>
                  </li>
                  <li>
                    <a href="#token-sale" class="toc-h2 toc-link" data-title="Token Sale">Token Sale</a>
                  </li>
                  <li>
                    <a href="#token-authorize" class="toc-h2 toc-link" data-title="Token Authorize">Token Authorize</a>
                  </li>
                  <li>
                    <a href="#repeat-sales-and-cards-on-file" class="toc-h2 toc-link" data-title="Repeat Sales and Cards-on-File">Repeat Sales and Cards-on-File</a>
                  </li>
                  <li>
                    <a href="#refunds-and-voids" class="toc-h2 toc-link" data-title="Refunds and Voids">Refunds and Voids</a>
                  </li>
                  <li>
                    <a href="#level-ii-and-level-iii-data" class="toc-h2 toc-link" data-title="Level II and Level III Data">Level II and Level III Data</a>
                  </li>
                  <li>
                    <a href="#ach-and-echecks" class="toc-h2 toc-link" data-title="ACH and eChecks">ACH and eChecks</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#in-person-payments" class="toc-h1 toc-link" data-title="In-Person Payments">In-Person Payments</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#overview" class="toc-h2 toc-link" data-title="Overview">Overview</a>
                  </li>
                  <li>
                    <a href="#supported-devices" class="toc-h2 toc-link" data-title="Supported Devices">Supported Devices</a>
                  </li>
                  <li>
                    <a href="#getting-started-2" class="toc-h2 toc-link" data-title="Getting Started">Getting Started</a>
                  </li>
                  <li>
                    <a href="#basic-sale" class="toc-h2 toc-link" data-title="Basic Sale">Basic Sale</a>
                  </li>
                  <li>
                    <a href="#tips-amp-gratuities" class="toc-h2 toc-link" data-title="Tips &amp; Gratuities">Tips &amp; Gratuities</a>
                  </li>
                  <li>
                    <a href="#lodging-amp-hotels" class="toc-h2 toc-link" data-title="Lodging &amp; Hotels">Lodging &amp; Hotels</a>
                  </li>
                  <li>
                    <a href="#pharmacy-amp-healthcare" class="toc-h2 toc-link" data-title="Pharmacy &amp; Healthcare">Pharmacy &amp; Healthcare</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#transaction-reporting" class="toc-h1 toc-link" data-title="Transaction Reporting">Transaction Reporting</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#transactionrowfilter" class="toc-h2 toc-link" data-title="TransactionRowFilter">TransactionRowFilter</a>
                  </li>
                  <li>
                    <a href="#transactionset" class="toc-h2 toc-link" data-title="TransactionSet">TransactionSet</a>
                  </li>
                  <li>
                    <a href="#transactionrow" class="toc-h2 toc-link" data-title="TransactionRow">TransactionRow</a>
                  </li>
                  <li>
                    <a href="#operation-contract" class="toc-h2 toc-link" data-title="Operation Contract">Operation Contract</a>
                  </li>
                  <li>
                    <a href="#reporting-tips-amp-examples" class="toc-h2 toc-link" data-title="Reporting Tips &amp; Examples">Reporting Tips &amp; Examples</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#response-codes" class="toc-h1 toc-link" data-title="Response Codes">Response Codes</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#avs-response-codes" class="toc-h2 toc-link" data-title="AVS Response Codes">AVS Response Codes</a>
                  </li>
                  <li>
                    <a href="#cvv-response-codes" class="toc-h2 toc-link" data-title="CVV Response Codes">CVV Response Codes</a>
                  </li>
                  <li>
                    <a href="#gateway-result-codes" class="toc-h2 toc-link" data-title="Gateway Result Codes">Gateway Result Codes</a>
                  </li>
                  <li>
                    <a href="#gateway-message-codes" class="toc-h2 toc-link" data-title="Gateway Message Codes">Gateway Message Codes</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#test-cards-and-triggers" class="toc-h1 toc-link" data-title="Test Cards and Triggers">Test Cards and Triggers</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#cards-and-checks" class="toc-h2 toc-link" data-title="Cards and Checks">Cards and Checks</a>
                  </li>
                  <li>
                    <a href="#trigger-amounts" class="toc-h2 toc-link" data-title="Trigger Amounts">Trigger Amounts</a>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href="https://forms.office.com/r/0PjKcTGH5D" class="beyond-button" target="_blank" style="text-decoration:none;color:white;">Get API Keys</a></li>
            <li>______________</li>
            <li><a href='https://www.getbeyond.com/' target="_blank">www.getbeyond.com</a></li>
            <li>©2021 Beyond</li>
            <li>______________</li>
            <li><a href='https://www.getbeyond.com/privacy-policy/' target="_blank">Privacy Policy</a></li>
            <li><a href='https://www.getbeyond.com/ccpa/' target="_blank">CCPA Consumer Privacy</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <p><br><br>Welcome to Beyond Pay: an omnichannel payment suite that enables a secure and embedded purchasing experience within your solution.</p>

<blockquote>
<p><a href="https://forms.office.com/r/0PjKcTGH5D" target="_blank" class="beyond-button" style="border-bottom:0px;font-weight:700;">Get Sandbox API Keys</a> and get coding now!</p>
</blockquote>
<h1 id='integration-options'>Integration Options</h1>
<blockquote>
<p>Contact us if you have questions or need help: <a href='mailto:BeyondPayIntegrations@getbeyond.com'>BeyondPayIntegrations@getbeyond.com</a></p>
</blockquote>

<p>Whether you have an existing shopping cart or are building a custom integration, we&#39;ve got you covered!</p>
<h2 id='payment-plugins'>Payment Plugins</h2>
<p>Why reinvent the wheel? We&#39;ve done the heavy lifting to build robust integrations to these popular solutions for you: sit back, relax, and plug in!</p>
<h3 id='woocommerce'>WooCommerce</h3>
<blockquote>
<p><a href="https://wordpress.org/plugins/beyond-pay-for-woocommerce" target="_blank" style=>
<code>
https://wordpress.org/plugins/beyond-pay-for-woocommerce
</code>
</a></p>

<p><a href="https://github.com/getbeyond/beyondpay_woocommerce" target="_blank">
<code>
https://github.com/getbeyond/beyondpay_woocommerce
</code>
</a></p>
</blockquote>

<p><a href="https://wordpress.org/plugins/beyond-pay-for-woocommerce/"  target="_blank"><img src="images/256x256_woo_icon.png" width="100" /></p>

<p>Get Beyond Pay for WooCommerce</a></p>
<div class="highlight"><pre class="highlight html tab-html"><code>=== Beyond Pay for WooCommerce ===
Contributors: beyondpay
Tags: credit card, payment, woocommerce, payment gateway, subscriptions, subscription payments, recurring billing
Requires at least: 4.7
Tested up to: 5.7.2
Stable tag: trunk
Requires PHP: 7.0
License: MIT
License URI: https://opensource.org/licenses/MIT
</code></pre></div>
<p>Beyond Pay for <a href="woocommerce.com" target="_blank">WooCommerce</a> enables secure payment card acceptance right from within your WooCommerce store. </p>

<ul>
<li>Pre-auth and later capture or instant sale modes</li>
<li>Secure saving of cards on file</li>
<li>Refund transactions directly from the Woo Order Details screen</li>
<li>Integration with <a href="https://woocommerce.com/products/woocommerce-subscriptions/" target="_blank">WooCommerce Subscriptions</a> for recurring billing</li>
<li>Interchange optimization by defaulting &quot;Level III&quot; data</li>
<li>Custom CSS styling of the hosted payment fields</li>
<li>Sandbox mode for development and staging</li>
</ul>
<h3 id='gravity-forms'>Gravity Forms</h3>
<blockquote>
<p><a href="https://wordpress.org/plugins/beyond-pay-for-gravity-forms" target="_blank">
<code>
https://wordpress.org/plugins/beyond-pay-for-gravity-forms
</code>
</a></p>

<p><a href="https://github.com/getbeyond/beyondpay_gravityforms" target="_blank">
<code>
https://github.com/getbeyond/beyondpay_gravityforms
</code>
</a></p>
</blockquote>

<p><a href="https://wordpress.org/plugins/beyond-pay-for-gravity-forms/" target="_blank"><img src="images/256x256_gravity_icon.png" width="100" /></p>

<p>Get Beyond Pay for Gravity Forms</a></p>
<div class="highlight"><pre class="highlight html tab-html"><code>=== Beyond Pay for Gravity Forms ===
Contributors: beyondpay
Tags: credit card, payment, gravity forms, payment gateway, donation
Requires at least: 4.7
Tested up to: 5.8
Stable tag: 1.1.1
Requires PHP: 7.0
License: MIT
License URI: https://opensource.org/licenses/MIT
</code></pre></div>
<p>Beyond Pay for <a href="gravityforms.com">Gravity Forms</a> allows you to create customized payment workflows for order checkout, donations, event registrations, and more!</p>

<ul>
<li>Define a Gravity Forms &quot;feed&quot; for each payment form</li>
<li>Accept payment instantly in Sale mode or capture an authorization later from the Gravity Forms &quot;Entries&quot; page</li>
<li>Interchange optimization by defaulting &quot;Level III&quot; data</li>
<li>Sandbox mode for development and staging</li>
</ul>
<h2 id='payment-sdks'>Payment SDKs</h2>
<p>We offer several client libraries (or software development kits) which consume the Beyond Pay APIs, making it even easier for you to integrate with your project.</p>

<p>Click the respective language tab to see SDK usage examples. SDKs coming soon to Github; contact <a href="mailto:BeyondPayIntegrations@getbeyond.com">BeyondPayIntegrations@getbeyond.com</a> to request access until then.</p>

<ul>
<li>PHP</li>
<li>.NET</li>
<li>Java</li>
<li>Android for mCommerce</li>
<li>Android for mPOS</li>
<li>iOS for mCommerce</li>
<li>iOS for mPOS</li>
</ul>

<aside class="success">
Note that "mCommerce" SDKs are for use in cardholder-initiated payments such as a consumer-facing app, while "mPOS" SDKs are for use in a merchant-facing app environment such as a mobile-based Point of Sale system.
</aside>

<aside class="warning">
If your payment application stores, processes, or transmits sensitive cardholder data, then it may be in scope for the Payment Card Industry Payment Application Data Security Standard ("PCI PA-DSS"). You are responsible for adhering to all applicable industry standards, including PA-DSS and PCI DSS.
</aside>
<h2 id='payment-apis'>Payment APIs</h2>
<p>The primary APIs for integrating to the Beyond Pay platform are:</p>

<ul>
<li><strong>TokenPay.js</strong> – an extension of Beyond Pay that combines client-side and server-side technologies for PCI-compliant online payment capture</li>
<li><strong>Beyond Pay API</strong> - a set of robust web service APIs offering support for credit cards, ACH/checks, tokenization, and more</li>
<li><strong>PayGuardian</strong> – a cloud-based terminal integration option for Point of Sale developers</li>
</ul>
<h1 id='online-payments'>Online Payments</h1><h2 id='getting-started'>Getting Started</h2>
<blockquote>
<p>To get started, include this script on your checkout page:</p>
</blockquote>

<p>TokenPay maximizes the user experience by allowing for the capture of sensitive card data within the payment form of the merchant’s website or mobile application. The consumer remains on the merchant’s payment page at all times during the checkout process.</p>
<div class="highlight"><pre class="highlight html tab-html"><code><span class="nt">&lt;script
  </span><span class="na">src=</span><span class="s">"https://api-test.getbeyondpay.com/WebSecurity/TokenPay/plain-js/tokenPay.js"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div>
<p>TokenPay is an integration interface for Beyond Pay Gateway which facilitates online card payments in a manner that ensures that no sensitive card data ever touches your servers so your integration can operate with minimized scope of PCI.</p>

<blockquote>
<p>Next, create an instance of TokenPay:</p>
</blockquote>

<p>To ensure that merchants are eligible for the simplest PCI validation method, Self-Assessment Questionnaire A (SAQ-A), TokenPay utilizes</p>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">tokenpay</span> <span class="o">=</span> <span class="nx">TokenPay</span><span class="p">(</span><span class="dl">'</span><span class="s1">your-public-key</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div>
<blockquote>
<p>Replace <code>your-public-key</code> with your publishable public key</a>.</p>
</blockquote>

<ul>
<li><strong>Isolation</strong> – Beyond Pay Gateway hosts the sensitive cardholder data input fields. The fields are injected into your form as an HTML iframe thus isolating your page and your server from card sensitive data.</li>
<li><strong>Tokenization</strong> – in order to execute transactions against the user’s card, TokenPay replaces the sensitive cardholder data with a non-sensitive surrogate value (token). The token is generated via the use of the TokenPay JavaScript library and your payment form.</li>
<li><strong>Segregation</strong> – Requests for charges against the user’s card are made server-to-server – not in the browser or mobile app where it is publicly visible. The tokenized card data is submitted to your server where a secure server-to-server request is made to execute the transaction.</li>
<li><strong>Authentication</strong> – The injection of the TokenPay hosted input fields and card tokenization is authenticated via a public key assigned to the merchant. API requests to execute charges against the tokenized card are made by the backend server and are authenticated with a private key assigned to the merchant.</li>
</ul>
<h3 id='tokenpay-js'>TokenPay.js</h3>
<p>TokenPay.js is the hosted JavaScript library for building online or mobile checkout flows with Beyond Pay Gateway. With it, you can collect sensitive data from the cardholder and create tokens for securely sending the data to your server.</p>

<p>TokenPay.js provides a ready-made UI component for collecting the sensitive card data from the user. TokenPay.js then tokenizes the information without it ever having to touch your server.</p>

<p>The TokenPay.js UI component includes:</p>

<ul>
<li>Automatic formatting of card information as it is entered</li>
<li>Validation of card information as it is entered</li>
<li>Responsive design that works on user’s screen or mobile device</li>
<li>Customizable styling to match your website&#39;s look and feel</li>
</ul>
<h3 id='https-requirements'>HTTPS Requirements</h3>
<p>All submission of payment information using TokenPay.js is made via a secure HTTPS connection. However, to protect yourself from man-in-the-middle attacks and to prevent your users from experiencing mixed content warnings in their browser, you <b>MUST</b> serve the page with your payment form over HTTPS.</p>
<h2 id='environments'>Environments</h2>
<p>Only <a href="#test-cards-and-triggers">test cards</a> should be used in sandbox environments.</p>

<blockquote>
<p>TokenPay.js Hosted Scripts</p>

<p><b>Sandbox:</b></p>
</blockquote>
<div class="highlight"><pre class="highlight html tab-html"><code>https://api-test.getbeyondpay.com/Bridgepay.WebSecurity/TokenPay/js/tokenPay.js
</code></pre></div>
<blockquote>
<p><b>Production:</b></p>
</blockquote>
<div class="highlight"><pre class="highlight html tab-html"><code>https://api.getbeyondpay.com/WebSecurity/TokenPay/js/tokenPay.js
</code></pre></div>
<p>The hosted TokenPay script has different versions for test and production.</p>

<blockquote>
<p>Beyond Pay SOAP API Endpoints</p>

<p><b>Sandbox:</b></p>
</blockquote>
<div class="highlight"><pre class="highlight html tab-html"><code>https://api-test.getbeyondpay.com/PaymentService/RequestHandler.svc
</code></pre></div>
<blockquote>
<p><b>Production:</b></p>
</blockquote>
<div class="highlight"><pre class="highlight html tab-html"><code>https://api.getbeyondpay.com/PaymentService/RequestHandler.svc
</code></pre></div>
<p>A WSDL is available for Beyond Pay SOAP API by appending &quot;?wsdl&quot; to these endpoints.</p>
<h2 id='create-a-payment-form'>Create a Payment Form</h2>
<blockquote>
<p>To determine where to insert the UI components, create empty DOM elements with unique IDs within your payment form.</p>
</blockquote>

<p>To securely collect sensitive card details from your users, TokenPay.js creates UI components for you that are hosted by Beyond Pay Gateway. These are then inserted into your payment form.</p>
<div class="highlight"><pre class="highlight html tab-html"><code><span class="nt">&lt;form</span> <span class="na">id=</span><span class="s">"paymentForm"</span> <span class="na">action=</span><span class="s">"/charge"</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span> 
  <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">name=</span><span class="s">"amount"</span> <span class="na">id=</span><span class="s">"amount"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"25"</span><span class="nt">&gt;</span>$25<span class="nt">&lt;/option&gt;</span>
    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"50"</span><span class="nt">&gt;</span>$50<span class="nt">&lt;/option&gt;</span> 
  <span class="nt">&lt;/select&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"card"</span><span class="nt">&gt;&lt;/div&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"errorMessage"</span><span class="nt">&gt;&lt;/div&gt;</span>
  <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"submit"</span><span class="nt">&gt;</span>Submit<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</code></pre></div>
<p>The TokenPay element simplifies the form and minimizes the fields required by inserting a single input field that securely collects all needed card data.</p>

<blockquote>
<p>If you want to customize the style of the card entry area, create a hidden <code>&lt;div&gt;</code> element to contain your styling. The <code>id</code> of this element MUST be <code>customStyles</code>.</p>
</blockquote>

<aside class="warning">
When implementing payment forms, it is imperative that you utilize <b>reCAPTCHA</b> or similar mechanisms. reCAPTCHA protects your web forms from spam and bot abuse. Using reCAPTCHA on your payment forms reduces the risk of fraudulent transactions on the merchant's eCommerce sites by performing a Completely Automated Public Turing Test to Tell Computers and Humans Apart (CAPTCHA). For more information on reducing form spam and bot abuse see <a href="https://developers.google.com/recaptcha/intro" target="_blank">https://developers.google.com/recaptcha/intro</a>
</aside>
<div class="highlight"><pre class="highlight html tab-html"><code><span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">"display: none"</span> <span class="na">id=</span><span class="s">"customStyles"</span><span class="nt">&gt;</span> 
  body {
    margin: 8px 0;
    }
 #payment-form {
  border: 2px solid #003b5c; 
  padding: 5px 10px; 
  border-radius: 5px; 
  background: white;
  color: #333;
}
<span class="nt">&lt;/div&gt;</span>
</code></pre></div>
<blockquote>
<p>When the form is loaded, initialize the Pay element:</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">tokenpay</span><span class="p">.</span><span class="nx">initialize</span><span class="p">({</span>
  <span class="na">dataElement</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#card</span><span class="dl">'</span><span class="p">,</span> 
  <span class="na">errorElement</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#errorMessage</span><span class="dl">'</span><span class="p">,</span> 
  <span class="na">useStyles</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="na">disableZip</span><span class="p">:</span> <span class="kc">false</span>
<span class="p">});</span>
</code></pre></div>
<blockquote>
<p>If you have created the <code>customStyles</code> element to style the card entry area, change the value of <code>useStyles</code> to <code>true</code>.</p>
</blockquote>

<aside class="success">
You should always submit the ZIP or Postal code in order to ensure the best chances for fraud reduction as well as the lowest interchange rates. "disableZip" is only intended for when you will collect the ZIP code with the rest of your form data rather than in the TokenPay iframe.
</aside>

<blockquote>
<p>To disable the ZIP code field from appearing in the iframe so that it can be captured elsewhere in your form, set <code>disableZip</code> to <code>true</code>.</p>
</blockquote>
<h2 id='obtain-a-token'>Obtain a Token</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">form</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">paymentForm</span><span class="dl">'</span><span class="p">);</span> 
<span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">#paymentForm</span><span class="dl">'</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">submit</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span> 
  <span class="nx">tokenpay</span><span class="p">.</span><span class="nx">createToken</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">hiddenInput</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">'</span><span class="s1">input</span><span class="dl">'</span><span class="p">);</span> 
    <span class="nx">hiddenInput</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="dl">'</span><span class="s1">type</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">hidden</span><span class="dl">'</span><span class="p">);</span> 
    <span class="nx">hiddenInput</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="dl">'</span><span class="s1">name</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">token</span><span class="dl">'</span><span class="p">);</span> 
    <span class="nx">hiddenInput</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="dl">'</span><span class="s1">value</span><span class="dl">'</span><span class="p">,</span> <span class="nx">result</span><span class="p">.</span><span class="nx">token</span><span class="p">);</span> 
    <span class="nx">form</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">hiddenInput</span><span class="p">);</span>
    <span class="nx">form</span><span class="p">.</span><span class="nx">submit</span><span class="p">();</span>
  <span class="p">},</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">error: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">result</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div>
<p>The card data collected by the TokenPay element is posted from the client browser to Beyond Pay Gateway where it is converted into a token. If there are any errors in the collection of the card data or creation of the token, information is automatically displayed in the <code>errorElement</code> of your payment form.</p>

<p>The token is stored as a hidden input value and passed to your server on form submission.</p>
<h2 id='token-sale'>Token Sale</h2>
<blockquote>
<p>With the token and other form fields obtained by your server, now construct the payload:</p>
</blockquote>

<p>Once you have securely collected and tokenized your user’s card data using TokenPay.js you can now use the single-use token to submit a transaction. Authorization or sale requests using single-use tokens must <em>ONLY</em> made from your server and not from the client.</p>
<div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$bpRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BridgeCommRequest</span><span class="p">();</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RequestMessage</span><span class="p">();</span>

<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nc">RequestDateTime</span> <span class="o">=</span> <span class="nc">DateTime</span><span class="mf">.</span><span class="nc">Now</span><span class="mf">.</span><span class="nf">ToString</span><span class="p">(</span><span class="s2">"yyyyMMddHHmmss"</span><span class="p">);</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nc">RequestType</span> <span class="o">=</span> <span class="s2">"004"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nc">PrivateKey</span> <span class="o">=</span> <span class="s2">"YourPrivateKey"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nc">AuthenticationTokenId</span> <span class="o">=</span> <span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nc">TransactionID</span> <span class="o">=</span> <span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">MerchantCode</span> <span class="o">=</span> <span class="s2">"123456"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">MerchantAccountCode</span> <span class="o">=</span> <span class="s2">"789123"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">Amount</span> <span class="o">=</span> <span class="s2">"1200"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">TransIndustryType</span> <span class="o">=</span> <span class="s2">"EC"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">TransactionType</span> <span class="o">=</span> <span class="s2">"SALE"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">ExpirationDate</span> <span class="o">=</span> <span class="s2">"1224"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">AcctType</span> <span class="o">=</span> <span class="s2">"R"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">HolderType</span> <span class="o">=</span> <span class="s2">"O"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">IsoCurrencyCode</span> <span class="o">=</span> <span class="s2">"USD"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">SoftwareVendor</span> <span class="o">=</span> <span class="s2">"YourSoftwareName 1.0"</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">BridgeCommRequest</span> <span class="n">bcRequest</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">BridgeCommRequest</span><span class="p">();</span>
<span class="n">RequestMessage</span> <span class="n">rqMessage</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RequestMessage</span><span class="p">();</span>

<span class="n">bcRequest</span><span class="p">.</span><span class="n">RequestType</span> <span class="p">=</span> <span class="s">"004"</span><span class="p">;</span>
<span class="n">bcRequest</span><span class="p">.</span><span class="n">TransactionID</span> <span class="p">=</span> <span class="s">"00000000-0000-0000-0000-000000000000"</span><span class="p">;</span>
<span class="n">bcRequest</span><span class="p">.</span><span class="n">PrivateKey</span> <span class="p">=</span> <span class="s">"YourPrivateKey"</span><span class="p">;</span>
<span class="n">bcRequest</span><span class="p">.</span><span class="n">AuthenticationTokenId</span> <span class="p">=</span> <span class="s">"00000000-0000-0000-0000-000000000000"</span><span class="p">;</span>
<span class="n">bcRequest</span><span class="p">.</span><span class="n">RequestDateTime</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">Now</span><span class="p">.</span><span class="nf">ToString</span><span class="p">(</span><span class="s">"yyyyMMddHHmmss"</span><span class="p">);</span>

<span class="n">rqMessage</span><span class="p">.</span><span class="n">MerchantCode</span> <span class="p">=</span> <span class="s">"123456"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">MerchantAccountCode</span> <span class="p">=</span> <span class="s">"789123"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">TransactionType</span> <span class="p">=</span> <span class="s">"SALE"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">TransIndustryType</span> <span class="p">=</span> <span class="s">"EC"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">Amount</span> <span class="p">=</span> <span class="s">"1200"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">HolderType</span> <span class="p">=</span> <span class="s">"O"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">AcctType</span> <span class="p">=</span> <span class="s">"R"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">IsoCurrencyCode</span> <span class="p">=</span> <span class="s">"USD"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">SoftwareVendor</span> <span class="p">=</span> <span class="s">"YourSoftwareName 1.0"</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">BridgeCommRequest</span> <span class="n">bcRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BridgeCommRequest</span><span class="o">();</span>
<span class="nc">RequestMessage</span> <span class="n">rqMessage</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RequestMessage</span><span class="o">();</span>

<span class="n">bcRequest</span><span class="o">.</span><span class="na">setRequestType</span><span class="o">(</span><span class="s">"004"</span><span class="o">);</span>
<span class="n">bcRequest</span><span class="o">.</span><span class="na">setAuthenticationTokenId</span><span class="o">(</span><span class="s">"00000000-0000-0000-0000-000000000000"</span><span class="o">);</span>
<span class="n">bcRequest</span><span class="o">.</span><span class="na">setTransactionID</span><span class="o">(</span><span class="nc">DateTime</span><span class="o">.</span><span class="na">Now</span><span class="o">.</span><span class="na">ToString</span><span class="o">(</span><span class="s">"yyyyMMddHHmmss"</span><span class="o">));</span>
<span class="n">bcRequest</span><span class="o">.</span><span class="na">setRequestMessage</span><span class="o">(</span><span class="k">new</span> <span class="n">rqMessage</span><span class="o">);</span>

<span class="n">rqMessage</span><span class="o">.</span><span class="na">setMerchantCode</span><span class="o">(</span><span class="s">"123456"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setMerchantAccountCode</span><span class="o">(</span><span class="s">"789123"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="s">"1200"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setTransIndustryType</span><span class="o">(</span><span class="s">"EC"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setTransactionType</span><span class="o">(</span><span class="s">"SALE"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setHolderType</span><span class="o">(</span><span class="s">"O"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setExpirationDate</span><span class="o">(</span><span class="s">"1234"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setIsoCurrencyCode</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setAcctType</span><span class="o">(</span><span class="s">"R"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setSoftwareVendor</span><span class="o">(</span><span class="s">"Your Software Name 1.0"</span><span class="o">);</span>
</code></pre></div>
<blockquote>
<p>Beyond Pay SDKs wrap the core XML API message</p>
</blockquote>

<p>You can construct the SOAP/XML message to Beyond Pay gateway or let our SDKs do it for you. Instructions are provided for those who want to send the raw SOAP message.</p>
<div class="highlight"><pre class="highlight xml tab-xml"><code><span class="nt">&lt;requestHeader&gt;</span>
    <span class="nt">&lt;ClientIdentifier&gt;</span>SOAP<span class="nt">&lt;/ClientIdentifier&gt;</span>
    <span class="nt">&lt;TransactionID&gt;</span>00000000-0000-0000-0000-000000000000<span class="nt">&lt;/TransactionID&gt;</span>
    <span class="nt">&lt;RequestType&gt;</span>004<span class="nt">&lt;/RequestType&gt;</span>
    <span class="nt">&lt;RequestDateTime&gt;</span>yyyyMMddHHmmss<span class="nt">&lt;/RequestDateTime&gt;</span>
    <span class="nt">&lt;PrivateKey&gt;</span>YourPrivateKey<span class="nt">&lt;/PrivateKey&gt;</span>
    <span class="nt">&lt;AuthenticationTokenId&gt;</span>00000000-0000-0000-0000-000000000000<span class="nt">&lt;/AuthenticationTokenId&gt;</span>
    <span class="nt">&lt;requestMessage&gt;</span>                                        
        <span class="nt">&lt;SoftwareVendor&gt;</span>YourSoftwareName 1.0<span class="nt">&lt;/SoftwareVendor&gt;</span>
        <span class="nt">&lt;TransIndustryType&gt;</span>EC<span class="nt">&lt;/TransIndustryType&gt;</span>
        <span class="nt">&lt;TransactionType&gt;</span>sale<span class="nt">&lt;/TransactionType&gt;</span>
        <span class="nt">&lt;AcctType&gt;</span>R<span class="nt">&lt;/AcctType&gt;</span>
        <span class="nt">&lt;HolderType&gt;</span>O<span class="nt">&lt;/HolderType&gt;</span>
        <span class="nt">&lt;Amount&gt;</span>1200<span class="nt">&lt;/Amount&gt;</span>
        <span class="nt">&lt;CurrencyCode&gt;</span>USD<span class="nt">&lt;/CurrencyCode&gt;</span>
    <span class="nt">&lt;/requestMessage&gt;</span>
<span class="nt">&lt;/requestHeader&gt;</span>
</code></pre></div>
<p>You will have a 15 minute window in which to complete the transaction request once you have obtained the client-side token. The token expires after the window or once used.</p>

<blockquote>
<p>The XML payload is then Base64-encoded and packaged within a SOAP envelope</p>
</blockquote>

<p>On your server, collect the token information and the form POST parameters submitted by your form.</p>
<div class="highlight"><pre class="highlight xml tab-xml"><code><span class="nt">&lt;soapenv:Envelope</span> <span class="na">xmlns:soapenv=</span><span class="s">"http://schemas.xmlsoap.org/soap/envelope/"</span> <span class="na">xmlns:req=</span><span class="s">"http://bridgepaynetsecuretx.com/requesthandler"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;soapenv:Header/&gt;</span>
                        <span class="nt">&lt;soapenv:Body&gt;</span>
                            <span class="nt">&lt;req:ProcessRequest&gt;</span>
                                <span class="nt">&lt;req:requestMsg&gt;</span>{Base-64 encoded XML payload}<span class="nt">&lt;/req:requestMsg&gt;</span>
                            <span class="nt">&lt;/req:ProcessRequest&gt;</span>
                        <span class="nt">&lt;/soapenv:Body&gt;</span>
                    <span class="nt">&lt;/soapenv:Envelope&gt;</span>
</code></pre></div>
<p>Now submit the token and parameters according to the example XML request, with the following substitutions:</p>

<ul>
<li><code>{transactionId}</code> - unique transaction ID generated by your application for tracking purposes</li>
<li><code>{requestDateTime}</code> - date and time of the transaction in <code>yyyyMMddHHmmss</code> format</li>
<li><code>{yourPrivateKey}</code> - your private API key</li>
<li><code>{token}</code> - token delivered in the submission of your payment form</li>
<li><code>{amountInCents}</code> - transaction amount in cents ($1.25 would be 125)</li>
<li><code>{yourSoftwareName}</code> - the name and version number of your software application</li>
</ul>

<blockquote>
<p>Beyond Pay Sample Approved Sale Response</p>
</blockquote>
<div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$bcResponse</span><span class="o">-&gt;</span><span class="nc">TransactionID</span> <span class="o">=</span> <span class="s2">"635693706433821501&lt;"</span><span class="p">;</span>
<span class="nv">$bcResponse</span><span class="o">-&gt;</span><span class="nc">RequestType</span> <span class="o">=</span> <span class="s2">"004"</span><span class="p">;</span>
<span class="nv">$bcResponse</span><span class="o">-&gt;</span><span class="nc">ResponseCode</span> <span class="o">=</span> <span class="s2">"00000"</span><span class="p">;</span>
<span class="nv">$bcResponse</span><span class="o">-&gt;</span><span class="nc">ResponseDescription</span> <span class="o">=</span> <span class="s2">"Successful Request"</span><span class="p">;</span>
<span class="nv">$rsMessage</span> <span class="o">=</span> <span class="nv">$bcResponse</span><span class="o">-&gt;</span><span class="n">responseMessage</span><span class="p">;</span>
<span class="nv">$rsMessage</span><span class="o">-&gt;</span><span class="nc">AuthenticationTokenId</span> <span class="o">=</span> <span class="s2">"735333"</span><span class="p">;</span>
<span class="nv">$rsMessage</span><span class="o">-&gt;</span><span class="nc">Token</span> <span class="o">=</span> <span class="s2">"100000007470001"</span><span class="p">;</span>
<span class="nv">$rsMessage</span><span class="o">-&gt;</span><span class="nc">PublicKey</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
<span class="nv">$rsMessage</span><span class="o">-&gt;</span><span class="nc">ExpirationDate</span> <span class="o">=</span> <span class="s2">"1022"</span><span class="p">;</span>
<span class="nv">$rsMessage</span><span class="o">-&gt;</span><span class="nc">AuthorizationCode</span> <span class="o">=</span> <span class="s2">"735333"</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">BridgeCommConnection</span> <span class="n">connection</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">BridgeCommConnection</span><span class="p">();</span>
<span class="n">BridgeCommResponse</span> <span class="n">bcResponse</span> <span class="p">=</span> <span class="n">connection</span><span class="p">.</span><span class="nf">processRequest</span><span class="p">(</span><span class="n">URL</span><span class="p">,</span> <span class="n">bcRequest</span><span class="p">);</span>
<span class="n">ResponseMessage</span> <span class="n">rsMessage</span> <span class="p">=</span> <span class="n">bcResponse</span><span class="p">.</span><span class="n">responseMessage</span><span class="p">;</span>

<span class="n">bcResponse</span><span class="p">.</span><span class="n">BridgeCommResponseType</span> <span class="p">=</span> <span class="s">"Auth"</span><span class="p">;</span>
<span class="n">bcResponse</span><span class="p">.</span><span class="n">RequestType</span> <span class="p">=</span> <span class="s">"004"</span><span class="p">;</span>
<span class="n">bcResponse</span><span class="p">.</span><span class="n">ResponseCode</span> <span class="p">=</span> <span class="s">"00000"</span><span class="p">;</span>
<span class="n">bcResponse</span><span class="p">.</span><span class="n">ResponseDescription</span> <span class="p">=</span> <span class="s">"Successful Request"</span><span class="p">;</span>
<span class="n">bcResponse</span><span class="p">.</span><span class="n">TransactionID</span> <span class="p">=</span> <span class="s">"20190709092529"</span><span class="p">;</span>

<span class="n">rsMessage</span><span class="p">.</span><span class="n">GatewayMessage</span> <span class="p">=</span> <span class="s">"A01 - Approved"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">GatewayResult</span> <span class="p">=</span> <span class="s">"00000"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">GatewayTransID</span> <span class="p">=</span> <span class="s">"3710636504"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">TransactionCode</span> <span class="p">=</span> <span class="s">"20190709092529"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">TransactionDate</span> <span class="p">=</span> <span class="s">"20190709"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">AuthorizationCode</span> <span class="p">=</span> <span class="s">"537977"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">AuthorizedAmount</span> <span class="p">=</span> <span class="s">"1200"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">InternalMessage</span> <span class="p">=</span> <span class="s">"Approved: 537977 (approval code)"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">isCommercialCard</span> <span class="p">=</span> <span class="s">"False"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">IsoCountryCode</span> <span class="p">=</span> <span class="s">"840"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">IsoCurrencyCode</span> <span class="p">=</span> <span class="s">"USD"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">IsoRequestDate</span> <span class="p">=</span> <span class="s">"2019-07-09 09:25:30.663"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">IsoTransactionDate</span> <span class="p">=</span> <span class="s">"2019-07-09 09:25:30.663"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">MaskedPan</span> <span class="p">=</span> <span class="s">"1***********1234"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">ExpirationDate</span> <span class="p">=</span> <span class="s">"1234"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">CardClass</span> <span class="p">=</span> <span class="s">"Credit"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">CardType</span> <span class="p">=</span> <span class="s">"Visa"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">OriginalAmount</span> <span class="p">=</span> <span class="s">"1200"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">ProviderResponseMessage</span> <span class="p">=</span> <span class="s">"Approved"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">Token</span> <span class="p">=</span> <span class="s">"11110000000375160150"</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">BridgeCommResponse</span> <span class="n">bcResponse</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="na">processRequest</span><span class="o">(</span><span class="no">URL</span><span class="o">,</span> <span class="n">bcRequest</span><span class="o">);</span>
<span class="n">bcResponse</span><span class="o">.</span><span class="na">RequestType</span> <span class="o">=</span> <span class="s">"004"</span><span class="o">;</span>
<span class="n">bcResponse</span><span class="o">.</span><span class="na">ResponseCode</span> <span class="o">=</span> <span class="s">"00000"</span><span class="o">;</span>
<span class="n">bcResponse</span><span class="o">.</span><span class="na">ResponseDescription</span> <span class="o">=</span> <span class="s">"Successful Request"</span><span class="o">;</span>
<span class="n">bcResponse</span><span class="o">.</span><span class="na">TransactionID</span> <span class="o">=</span> <span class="s">"635693706433821501"</span><span class="o">;</span>

<span class="nc">ResponseMessage</span> <span class="n">rsMessage</span> <span class="o">=</span> <span class="n">bcResponse</span><span class="o">.</span><span class="na">responseMessage</span><span class="o">;</span>
<span class="n">rsMessage</span><span class="o">.</span><span class="na">Token</span> <span class="o">=</span> <span class="s">"1000000074700016"</span><span class="o">;</span>
<span class="n">rsMessage</span><span class="o">.</span><span class="na">ExpirationDate</span> <span class="o">=</span> <span class="s">"1022"</span><span class="o">;</span>
<span class="n">rsMessage</span><span class="o">.</span><span class="na">AuthrorizationCode</span> <span class="o">=</span> <span class="s">"735333"</span><span class="o">;</span>
</code></pre></div>
<blockquote>
<p>Raw XML response</p>
</blockquote>
<div class="highlight"><pre class="highlight xml tab-xml"><code><span class="cp">&lt;?xml version="1.0" encoding="utf-16"?&gt;</span>
<span class="nt">&lt;Auth&gt;</span>
  <span class="nt">&lt;TransactionID&gt;</span>123456789<span class="nt">&lt;/TransactionID&gt;</span>
  <span class="nt">&lt;RequestType&gt;</span>004<span class="nt">&lt;/RequestType&gt;</span>
  <span class="nt">&lt;ResponseCode&gt;</span>00000<span class="nt">&lt;/ResponseCode&gt;</span>
  <span class="nt">&lt;ResponseDescription&gt;</span>Successful Request<span class="nt">&lt;/ResponseDescription&gt;</span>
  <span class="nt">&lt;responseMessage&gt;</span>
    <span class="nt">&lt;Token&gt;</span>1000000010261111<span class="nt">&lt;/Token&gt;</span>
    <span class="nt">&lt;AuthorizationCode&gt;</span>642973<span class="nt">&lt;/AuthorizationCode&gt;</span>
    <span class="nt">&lt;ReferenceNumber&gt;&lt;/ReferenceNumber&gt;</span>
    <span class="nt">&lt;GatwayResult&gt;</span>00000<span class="nt">&lt;/GatewayResult&gt;</span>
    <span class="nt">&lt;AuthorizedAmount&gt;</span>700<span class="nt">&lt;/AuthorizedAmount&gt;</span>
    <span class="nt">&lt;OriginalAmount&gt;</span>700<span class="nt">&lt;/OriginalAmount&gt;</span>
    <span class="nt">&lt;ExpirationDate&gt;</span>1224<span class="nt">&lt;/ExpirationDate&gt;</span>
    <span class="nt">&lt;AVSMessage&gt;</span>Street address and ZIP match<span class="nt">&lt;/AVSMessage&gt;</span>
    <span class="nt">&lt;AVSResult&gt;</span>4F<span class="nt">&lt;/AVSResult&gt;</span>
    <span class="nt">&lt;StreetMatchMessage&gt;&lt;/StreetMatchMessage&gt;</span>
    <span class="nt">&lt;ZipMatchMessage&gt;&lt;/ZipMatchMessage&gt;</span>
    <span class="nt">&lt;CVMessage&gt;</span>Matches<span class="nt">&lt;/CVMessage&gt;</span>
    <span class="nt">&lt;CVResult&gt;</span>M<span class="nt">&lt;/CVResult&gt;</span>
    <span class="nt">&lt;IsCommercialCard&gt;</span>False<span class="nt">&lt;/IsCommercialCard&gt;</span>
    <span class="nt">&lt;GatewayTransID&gt;</span>1235539604<span class="nt">&lt;/GatewayTransID&gt;</span>
    <span class="nt">&lt;GatewayMessage&gt;</span>A01 - Approved<span class="nt">&lt;/GatewayMessage&gt;</span>
    <span class="nt">&lt;InternalMessage&gt;</span>Approved: 642973 (approval Code)<span class="nt">&lt;/InternalMessage&gt;</span>
    <span class="nt">&lt;Balance&gt;&lt;/Balance&gt;</span>
    <span class="nt">&lt;CashBackAmount&gt;&lt;/CashBackAmount&gt;</span>
    <span class="nt">&lt;TransactionCode&gt;</span>123456789<span class="nt">&lt;/TransactionCode&gt;</span>
    <span class="nt">&lt;TransactionDate&gt;</span>20200528<span class="nt">&lt;/TransactionDate&gt;</span>
    <span class="nt">&lt;RemainingAmount&gt;</span>0<span class="nt">&lt;/RemainingAmount&gt;</span>
    <span class="nt">&lt;IsoCountryCode&gt;</span>840<span class="nt">&lt;/IsoCountryCode&gt;</span>
    <span class="nt">&lt;IsoCurrencyCode&gt;</span>USD<span class="nt">&lt;/IsoCurrencyCode&gt;</span>
    <span class="nt">&lt;IsoTransactionDate&gt;</span>2020-05-28 12:41:33.587<span class="nt">&lt;/IsoTransactionDate&gt;</span>
    <span class="nt">&lt;IsoRequestDate&gt;</span>2020-05-28 12:41:33.587<span class="nt">&lt;/IsoRequestDate&gt;</span>
    <span class="nt">&lt;NetworkReferenceNumber&gt;&lt;/NetworkReferenceNumber&gt;</span>
    <span class="nt">&lt;NetworkMerchantId&gt;&lt;/NetworkMerchantId&gt;</span>
    <span class="nt">&lt;NetworkTerminalId&gt;&lt;/NetworkTerminalId&gt;</span>
    <span class="nt">&lt;CardClass&gt;</span>Credit<span class="nt">&lt;/CardClass&gt;</span>
    <span class="nt">&lt;CardType&gt;</span>Visa<span class="nt">&lt;/CardType&gt;</span>
    <span class="nt">&lt;CardHolderName&gt;</span>Test card<span class="nt">&lt;/CardHolderName&gt;</span>
    <span class="nt">&lt;CardModifier&gt;</span>None<span class="nt">&lt;/CardModifier&gt;</span>
    <span class="nt">&lt;ProviderResponseCode&gt;&lt;/ProviderResponseCode&gt;</span>
    <span class="nt">&lt;ProviderResponseMessage&gt;</span>Approved<span class="nt">&lt;/ProviderResponseMessage&gt;</span>
    <span class="nt">&lt;MaskedPan&gt;&lt;/MaskedPan&gt;</span>
    <span class="nt">&lt;WalletID&gt;&lt;/WalletID&gt;</span>
    <span class="nt">&lt;WalletPaymentMethodID&gt;&lt;/WalletPaymentID&gt;</span>
    <span class="nt">&lt;WalletResponseMessage&gt;&lt;/WalletResponseMessage&gt;</span>
    <span class="nt">&lt;WalletResponseCode&gt;&lt;/WalletResponseCode&gt;</span>
    <span class="nt">&lt;MerchantCategoryCode&gt;&lt;/MerchantCategoryCode&gt;</span>
    <span class="nt">&lt;ResponseTypeDescription&gt;</span>sale<span class="nt">&lt;/ResponseTypeDescription&gt;</span>
    <span class="nt">&lt;ReceiptTagData&gt;&lt;/ReceiptTagData&gt;</span>
    <span class="nt">&lt;IssuerTagData&gt;&lt;/IssuerTagData&gt;</span>
  <span class="nt">&lt;/responseMessage&gt;</span>
<span class="nt">&lt;/Auth&gt;</span>
</code></pre></div>
<p>After your transaction has been successfully submitted to the gateway, make sure you inspect the response message. Specifically, look at:</p>

<ul>
<li><code>ResponseCode</code> - a 5 digit response code indicating the status of the transaction request</li>
<li><code>ResponseDescription</code>- a verbose description of the ResponseCode</li>
<li><code>GatewayResult</code> - an additional response code that may provide additional information on the status of the transaction</li>
<li><code>GatewayMessage</code> - a verbose description of the GatewayResult</li>
<li><code>AVSResult</code> - a code indicating the status of the Address Verification System request, if any</li>
<li><code>AVSMessage</code> - a verbose description of the AVSResult code meaning</li>
<li><code>CVResult</code> - a code indicating the status of the Card Security Code (aka CVV2, CID) sent in the request message</li>
<li><code>CVMessage</code> - a verbose description of the CVResult code meaning</li>
<li><code>Token</code> - a non-sensitive representation of the card number used in the transaction. The last four digits are the same as the last four digits of the card number. This value can be persisted and used for <a href="#repeat-sales-and-cards-on-file">future recurring transactions from the same cardholder</a>. </li>
</ul>

<blockquote>
<p>Beyond Pay Sample Declined Sale Response</p>
</blockquote>
<div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$bcResponse</span><span class="o">-&gt;</span><span class="nc">TransactionID</span> <span class="o">=</span> <span class="s2">"635693706433821501&lt;"</span><span class="p">;</span>
<span class="nv">$bcResponse</span><span class="o">-&gt;</span><span class="nc">RequestType</span> <span class="o">=</span> <span class="s2">"004"</span><span class="p">;</span>
<span class="nv">$bcResponse</span><span class="o">-&gt;</span><span class="nc">ResponseCode</span> <span class="o">=</span> <span class="s2">"30032"</span><span class="p">;</span>
<span class="nv">$bcResponse</span><span class="o">-&gt;</span><span class="nc">ResponseDescription</span> <span class="o">=</span> <span class="s2">"Denied by customer's bank"</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">BridgeCommConnection</span> <span class="n">connection</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">BridgeCommConnection</span><span class="p">();</span>
<span class="n">BridgeCommResponse</span> <span class="n">bcResponse</span> <span class="p">=</span> <span class="n">connection</span><span class="p">.</span><span class="nf">processRequest</span><span class="p">(</span><span class="n">URL</span><span class="p">,</span> <span class="n">bcRequest</span><span class="p">);</span>
<span class="n">ResponseMessage</span> <span class="n">rsMessage</span> <span class="p">=</span> <span class="n">bcResponse</span><span class="p">.</span><span class="n">responseMessage</span><span class="p">;</span>

<span class="n">bcResponse</span><span class="p">.</span><span class="n">BridgeCommResponseType</span> <span class="p">=</span> <span class="s">"Auth"</span><span class="p">;</span>
<span class="n">bcResponse</span><span class="p">.</span><span class="n">RequestType</span> <span class="p">=</span> <span class="s">"004"</span><span class="p">;</span>
<span class="n">bcResponse</span><span class="p">.</span><span class="n">ResponseCode</span> <span class="p">=</span> <span class="s">"30032"</span><span class="p">;</span>
<span class="n">bcResponse</span><span class="p">.</span><span class="n">ResponseDescription</span> <span class="p">=</span> <span class="s">"Denied by customer's bank"</span><span class="p">;</span>
<span class="n">bcResponse</span><span class="p">.</span><span class="n">TransactionID</span> <span class="p">=</span> <span class="s">"20190709092529"</span><span class="p">;</span>

<span class="n">rsMessage</span><span class="p">.</span><span class="n">GatewayMessage</span> <span class="p">=</span> <span class="s">"D01 - Denied by customer's bank (Issuer Unavailable)"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">GatewayResult</span> <span class="p">=</span> <span class="s">"30032"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">GatewayTransID</span> <span class="p">=</span> <span class="s">"3710636804"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">TransactionCode</span> <span class="p">=</span> <span class="s">"20190709094426"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">TransactionDate</span> <span class="p">=</span> <span class="s">"20190709"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">AuthorizationCode</span> <span class="p">=</span> <span class="s">"537977"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">AuthorizedAmount</span> <span class="p">=</span> <span class="s">"1200"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">InternalMessage</span> <span class="p">=</span> <span class="s">"Denied by customer's bank"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">ResponseTypeDescription</span> <span class="p">=</span> <span class="s">"denied"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">isCommercialCard</span> <span class="p">=</span> <span class="s">"False"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">IsoCountryCode</span> <span class="p">=</span> <span class="s">"840"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">IsoCurrencyCode</span> <span class="p">=</span> <span class="s">"USD"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">IsoRequestDate</span> <span class="p">=</span> <span class="s">"2019-07-09 09:25:30.663"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">IsoTransactionDate</span> <span class="p">=</span> <span class="s">"2019-07-09 09:25:30.663"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">MaskedPan</span> <span class="p">=</span> <span class="s">"1***********1234"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">ExpirationDate</span> <span class="p">=</span> <span class="s">"1234"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">CardClass</span> <span class="p">=</span> <span class="s">"Credit"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">CardType</span> <span class="p">=</span> <span class="s">"Visa"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">OriginalAmount</span> <span class="p">=</span> <span class="s">"1200"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">ProviderResponseMessage</span> <span class="p">=</span> <span class="s">"Declined"</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">BridgeCommResponse</span> <span class="n">bcResponse</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="na">processRequest</span><span class="o">(</span><span class="no">URL</span><span class="o">,</span> <span class="n">bcRequest</span><span class="o">);</span>
<span class="n">bcResponse</span><span class="o">.</span><span class="na">RequestType</span> <span class="o">=</span> <span class="s">"004"</span><span class="o">;</span>
<span class="n">bcResponse</span><span class="o">.</span><span class="na">ResponseCode</span> <span class="o">=</span> <span class="s">"30032"</span><span class="o">;</span>
<span class="n">bcResponse</span><span class="o">.</span><span class="na">ResponseDescription</span> <span class="o">=</span> <span class="s">"Denied by customer's bank"</span><span class="o">;</span>
<span class="n">bcResponse</span><span class="o">.</span><span class="na">TransactionID</span> <span class="o">=</span> <span class="s">"635693706433821501"</span><span class="o">;</span>

<span class="nc">ResponseMessage</span> <span class="n">rsMessage</span> <span class="o">=</span> <span class="n">bcResponse</span><span class="o">.</span><span class="na">responseMessage</span><span class="o">;</span>
<span class="n">rsMessage</span><span class="o">.</span><span class="na">CardType</span> <span class="o">=</span> <span class="s">"Visa"</span><span class="o">;</span>
<span class="n">rsMessage</span><span class="o">.</span><span class="na">CardClass</span> <span class="o">=</span> <span class="s">"Credit"</span><span class="o">;</span>
<span class="n">rsMessage</span><span class="o">.</span><span class="na">ProviderResponseMessage</span> <span class="o">=</span> <span class="s">"735333"</span><span class="o">;</span>
</code></pre></div>
<blockquote>
<p>Raw XML response</p>
</blockquote>
<div class="highlight"><pre class="highlight xml tab-xml"><code><span class="nt">&lt;Auth&gt;</span>
    <span class="nt">&lt;TransactionID&gt;</span>123<span class="nt">&lt;/TransactionID&gt;</span>
    <span class="nt">&lt;RequestType&gt;</span>004<span class="nt">&lt;/RequestType&gt;</span>
    <span class="nt">&lt;ResponseCode&gt;</span>30032<span class="nt">&lt;/ResponseCode&gt;</span>
    <span class="nt">&lt;ResponseDescription&gt;</span>Denied by customer's bank<span class="nt">&lt;/ResponseDescription&gt;</span>
    <span class="nt">&lt;responseMessage&gt;</span>
        <span class="nt">&lt;Token&gt;</span>1000000010532376<span class="nt">&lt;/Token&gt;</span>
        <span class="nt">&lt;ExpirationDate&gt;</span>1224<span class="nt">&lt;/ExpirationDate&gt;</span>
        <span class="nt">&lt;OrganizationId&gt;</span>1706<span class="nt">&lt;/OrganizationId&gt;</span>
        <span class="nt">&lt;AuthorizationCode</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;ReferenceNumber&gt;</span>960406639<span class="nt">&lt;/ReferenceNumber&gt;</span>
        <span class="nt">&lt;AuthorizedAmount&gt;</span>0<span class="nt">&lt;/AuthorizedAmount&gt;</span>
        <span class="nt">&lt;OriginalAmount&gt;</span>20<span class="nt">&lt;/OriginalAmount&gt;</span>
        <span class="nt">&lt;GatewayTransID&gt;</span>4011311504<span class="nt">&lt;/GatewayTransID&gt;</span>
        <span class="nt">&lt;GatewayMessage&gt;</span>D01 - Denied by customer's bank (Issuer Unavailable)<span class="nt">&lt;/GatewayMessage&gt;</span>
        <span class="nt">&lt;InternalMessage&gt;</span>Denied by customer's bank<span class="nt">&lt;/InternalMessage&gt;</span>
        <span class="nt">&lt;GatewayResult&gt;</span>30032<span class="nt">&lt;/GatewayResult&gt;</span>
        <span class="nt">&lt;AVSMessage</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;AVSResult</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;CVMessage</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;CVResult</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;TransactionCode&gt;</span>123<span class="nt">&lt;/TransactionCode&gt;</span>
        <span class="nt">&lt;TransactionDate&gt;</span>20210831<span class="nt">&lt;/TransactionDate&gt;</span>
        <span class="nt">&lt;RemainingAmount&gt;</span>0<span class="nt">&lt;/RemainingAmount&gt;</span>
        <span class="nt">&lt;IsoCountryCode&gt;</span>840<span class="nt">&lt;/IsoCountryCode&gt;</span>
        <span class="nt">&lt;IsoCurrencyCode&gt;</span>USD<span class="nt">&lt;/IsoCurrencyCode&gt;</span>
        <span class="nt">&lt;IsoTransactionDate&gt;</span>2021-08-31 21:33:09.537<span class="nt">&lt;/IsoTransactionDate&gt;</span>
        <span class="nt">&lt;IsoRequestDate&gt;</span>2021-08-31 21:33:09.537<span class="nt">&lt;/IsoRequestDate&gt;</span>
        <span class="nt">&lt;NetworkReferenceNumber</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;MerchantCategoryCode</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;NetworkMerchantId</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;NetworkTerminalId</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;CardClass&gt;</span>Credit<span class="nt">&lt;/CardClass&gt;</span>
        <span class="nt">&lt;CardType&gt;</span>Amex<span class="nt">&lt;/CardType&gt;</span>
        <span class="nt">&lt;CardHolderName</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;CardModifier&gt;</span>None<span class="nt">&lt;/CardModifier&gt;</span>
        <span class="nt">&lt;ProviderResponseCode</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;ProviderResponseMessage&gt;</span>Denied by customer's bank (Issuer Unavailable)<span class="nt">&lt;/ProviderResponseMessage&gt;</span>
        <span class="nt">&lt;MaskedPan&gt;</span>3**********2376<span class="nt">&lt;/MaskedPan&gt;</span>
        <span class="nt">&lt;ResponseTypeDescription&gt;</span>decline<span class="nt">&lt;/ResponseTypeDescription&gt;</span>
        <span class="nt">&lt;IsCommercialCard&gt;</span>False<span class="nt">&lt;/IsCommercialCard&gt;</span>
        <span class="nt">&lt;StreetMatchMessage</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;WalletID</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;WalletPaymentMethodID</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;WalletResponseCode</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;WalletResponseMessage</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/responseMessage&gt;</span>
<span class="nt">&lt;/Auth&gt;</span>
</code></pre></div>
<aside class="warning">
You should always inspect the AVSResult and CVResult fields as these can be good indicators of potential fraud. If you see a AVSResult or CVResult code that you do not want to accept because it may be too risky (such as "No Match" on the submitted Zip code), then you should submit a void transaction to cancel the authorization and advise the cardholder that their transaction has been declined.
</aside>
<h2 id='token-authorize'>Token Authorize</h2>
<blockquote>
<p>To change from a &quot;sale&quot; transaction to an &quot;authorize&quot; transaction, simply set <code>TransactionType</code> to <code>sale-auth</code> in the Beyond Pay SDK:</p>
</blockquote>

<p>Sometimes you may not want to accept payment right away for a transaction, such as when shipping physical goods. The normal practice in this scenario is to first authorize a card which will place a hold on the funds, and then to later &quot;capture&quot; that authorization when the order is fulfilled.</p>
<div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$bpRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BridgeCommRequest</span><span class="p">();</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RequestMessage</span><span class="p">();</span>

<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nc">RequestDateTime</span> <span class="o">=</span> <span class="nc">DateTime</span><span class="mf">.</span><span class="nc">Now</span><span class="mf">.</span><span class="nf">ToString</span><span class="p">(</span><span class="s2">"yyyyMMddHHmmss"</span><span class="p">);</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nc">RequestType</span> <span class="o">=</span> <span class="s2">"004"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nc">PrivateKey</span> <span class="o">=</span> <span class="s2">"YourPrivateKey"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nc">AuthenticationTokenId</span> <span class="o">=</span> <span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nc">TransactionID</span> <span class="o">=</span> <span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">MerchantCode</span> <span class="o">=</span> <span class="s2">"123456"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">MerchantAccountCode</span> <span class="o">=</span> <span class="s2">"789123"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">Amount</span> <span class="o">=</span> <span class="s2">"1200"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">TransIndustryType</span> <span class="o">=</span> <span class="s2">"EC"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">TransactionType</span> <span class="o">=</span> <span class="s2">"SALE-AUTH"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">ExpirationDate</span> <span class="o">=</span> <span class="s2">"1224"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">AcctType</span> <span class="o">=</span> <span class="s2">"R"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">HolderType</span> <span class="o">=</span> <span class="s2">"O"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">IsoCurrencyCode</span> <span class="o">=</span> <span class="s2">"USD"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">SettlementDelay</span> <span class="o">=</span> <span class="s2">"30"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">SoftwareVendor</span> <span class="o">=</span> <span class="s2">"YourSoftwareName 1.0"</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">BridgeCommRequest</span> <span class="n">bcRequest</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">BridgeCommRequest</span><span class="p">();</span>
<span class="n">RequestMessage</span> <span class="n">rqMessage</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RequestMessage</span><span class="p">();</span>

<span class="n">bcRequest</span><span class="p">.</span><span class="n">RequestType</span> <span class="p">=</span> <span class="s">"004"</span><span class="p">;</span>
<span class="n">bcRequest</span><span class="p">.</span><span class="n">TransactionID</span> <span class="p">=</span> <span class="s">"00000000-0000-0000-0000-000000000000"</span><span class="p">;</span>
<span class="n">bcRequest</span><span class="p">.</span><span class="n">PrivateKey</span> <span class="p">=</span> <span class="s">"YourPrivateKey"</span><span class="p">;</span>
<span class="n">bcRequest</span><span class="p">.</span><span class="n">AuthenticationTokenId</span> <span class="p">=</span> <span class="s">"00000000-0000-0000-0000-000000000000"</span><span class="p">;</span>
<span class="n">bcRequest</span><span class="p">.</span><span class="n">RequestDateTime</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">Now</span><span class="p">.</span><span class="nf">ToString</span><span class="p">(</span><span class="s">"yyyyMMddHHmmss"</span><span class="p">);</span>

<span class="n">rqMessage</span><span class="p">.</span><span class="n">MerchantCode</span> <span class="p">=</span> <span class="s">"123456"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">MerchantAccountCode</span> <span class="p">=</span> <span class="s">"789123"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">TransactionType</span> <span class="p">=</span> <span class="s">"SALE-AUTH"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">TransIndustryType</span> <span class="p">=</span> <span class="s">"EC"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">Amount</span> <span class="p">=</span> <span class="s">"1200"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">HolderType</span> <span class="p">=</span> <span class="s">"O"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">AcctType</span> <span class="p">=</span> <span class="s">"R"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">IsoCurrencyCode</span> <span class="p">=</span> <span class="s">"USD"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">SettlementDelay</span> <span class="p">=</span> <span class="s">"30"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">SoftwareVendor</span> <span class="p">=</span> <span class="s">"YourSoftwareName 1.0"</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">BridgeCommRequest</span> <span class="n">bcRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BridgeCommRequest</span><span class="o">();</span>
<span class="nc">RequestMessage</span> <span class="n">rqMessage</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RequestMessage</span><span class="o">();</span>

<span class="n">bcRequest</span><span class="o">.</span><span class="na">setRequestType</span><span class="o">(</span><span class="s">"004"</span><span class="o">);</span>
<span class="n">bcRequest</span><span class="o">.</span><span class="na">setAuthenticationTokenId</span><span class="o">(</span><span class="s">"00000000-0000-0000-0000-000000000000"</span><span class="o">);</span>
<span class="n">bcRequest</span><span class="o">.</span><span class="na">setTransactionID</span><span class="o">(</span><span class="nc">DateTime</span><span class="o">.</span><span class="na">Now</span><span class="o">.</span><span class="na">ToString</span><span class="o">(</span><span class="s">"yyyyMMddHHmmss"</span><span class="o">));</span>
<span class="n">bcRequest</span><span class="o">.</span><span class="na">setRequestMessage</span><span class="o">(</span><span class="k">new</span> <span class="n">rqMessage</span><span class="o">);</span>

<span class="n">rqMessage</span><span class="o">.</span><span class="na">setMerchantCode</span><span class="o">(</span><span class="s">"123456"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setMerchantAccountCode</span><span class="o">(</span><span class="s">"789123"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="s">"1200"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setTransIndustryType</span><span class="o">(</span><span class="s">"EC"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setTransactionType</span><span class="o">(</span><span class="s">"SALE-AUTH"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setHolderType</span><span class="o">(</span><span class="s">"O"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setExpirationDate</span><span class="o">(</span><span class="s">"1234"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setAcctType</span><span class="o">(</span><span class="s">"R"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setSettlementDelay</span><span class="o">(</span><span class="s">"30"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setSoftwareVendor</span><span class="o">(</span><span class="s">"YourSoftwareName 1.0"</span><span class="o">);</span>
</code></pre></div>
<blockquote>
<p>Or, in the raw XML:</p>
</blockquote>
<div class="highlight"><pre class="highlight xml tab-xml"><code><span class="nt">&lt;requestHeader&gt;</span>
    <span class="nt">&lt;ClientIdentifier&gt;</span>SOAP<span class="nt">&lt;/ClientIdentifier&gt;</span>
    <span class="nt">&lt;TransactionID&gt;</span>00000000-0000-0000-0000-000000000000<span class="nt">&lt;/TransactionID&gt;</span>
    <span class="nt">&lt;RequestType&gt;</span>004<span class="nt">&lt;/RequestType&gt;</span>
    <span class="nt">&lt;RequestDateTime&gt;</span>yyyyMMddHHmmss<span class="nt">&lt;/RequestDateTime&gt;</span>
    <span class="nt">&lt;PrivateKey&gt;</span>YourPrivateKey<span class="nt">&lt;/PrivateKey&gt;</span>
    <span class="nt">&lt;AuthenticationTokenId&gt;</span>00000000-0000-0000-0000-000000000000<span class="nt">&lt;/AuthenticationTokenId&gt;</span>
    <span class="nt">&lt;requestMessage&gt;</span>                    
        <span class="nt">&lt;SoftwareVendor&gt;</span>YourSoftwareName 1.0<span class="nt">&lt;/SoftwareVendor&gt;</span>
        <span class="nt">&lt;TransIndustryType&gt;</span>EC<span class="nt">&lt;/TransIndustryType&gt;</span>
        <span class="nt">&lt;TransactionType&gt;</span>sale-auth<span class="nt">&lt;/TransactionType&gt;</span>
        <span class="nt">&lt;AcctType&gt;</span>R<span class="nt">&lt;/AcctType&gt;</span>
        <span class="nt">&lt;HolderType&gt;</span>O<span class="nt">&lt;/HolderType&gt;</span>
        <span class="nt">&lt;Amount&gt;</span>1200<span class="nt">&lt;/Amount&gt;</span>
        <span class="nt">&lt;CurrencyCode&gt;</span>USD<span class="nt">&lt;/CurrencyCode&gt;</span>
        <span class="nt">&lt;SettlementDelay&gt;</span>30<span class="nt">&lt;/SettlementDelay&gt;</span>
    <span class="nt">&lt;/requestMessage&gt;</span>
<span class="nt">&lt;/requestHeader&gt;</span>

</code></pre></div>
<blockquote>
<p>Beyond Pay Sample Authorization Response</p>
</blockquote>
<div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$bcResponse</span><span class="o">-&gt;</span><span class="nc">TransactionID</span> <span class="o">=</span> <span class="s2">"635693706433821501"</span><span class="p">;</span>
<span class="nv">$bcResponse</span><span class="o">-&gt;</span><span class="nc">RequestType</span> <span class="o">=</span> <span class="s2">"004"</span><span class="p">;</span>
<span class="nv">$bcResponse</span><span class="o">-&gt;</span><span class="nc">ResponseCode</span> <span class="o">=</span> <span class="s2">"00000"</span><span class="p">;</span>
<span class="nv">$bcResponse</span><span class="o">-&gt;</span><span class="nc">ResponseDescription</span> <span class="o">=</span> <span class="s2">"Successful Request"</span><span class="p">;</span>
<span class="nv">$rsMessage</span> <span class="o">=</span> <span class="nv">$bcResponse</span><span class="o">-&gt;</span><span class="n">responseMessage</span><span class="p">;</span>
<span class="nv">$rsMessage</span><span class="o">-&gt;</span><span class="nc">AuthenticationTokenId</span> <span class="o">=</span> <span class="s2">"735333"</span><span class="p">;</span>
<span class="nv">$rsMessage</span><span class="o">-&gt;</span><span class="nc">Token</span> <span class="o">=</span> <span class="s2">"100000007470001"</span><span class="p">;</span>
<span class="nv">$rsMessage</span><span class="o">-&gt;</span><span class="nc">PublicKey</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
<span class="nv">$rsMessage</span><span class="o">-&gt;</span><span class="nc">ExpirationDate</span> <span class="o">=</span> <span class="s2">"1022"</span><span class="p">;</span>
<span class="nv">$rsMessage</span><span class="o">-&gt;</span><span class="nc">AuthorizationCode</span> <span class="o">=</span> <span class="s2">"735333"</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">BridgeCommConnection</span> <span class="n">connection</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">BridgeCommConnection</span><span class="p">();</span>
<span class="n">BridgeCommResponse</span> <span class="n">bcResponse</span> <span class="p">=</span> <span class="n">connection</span><span class="p">.</span><span class="nf">processRequest</span><span class="p">(</span><span class="n">URL</span><span class="p">,</span> <span class="n">bcRequest</span><span class="p">);</span>
<span class="n">ResponseMessage</span> <span class="n">rsMessage</span> <span class="p">=</span> <span class="n">bcResponse</span><span class="p">.</span><span class="n">responseMessage</span><span class="p">;</span>

<span class="n">bcResponse</span><span class="p">.</span><span class="n">BridgeCommResponseType</span> <span class="p">=</span> <span class="s">"Auth"</span><span class="p">;</span>
<span class="n">bcResponse</span><span class="p">.</span><span class="n">RequestType</span> <span class="p">=</span> <span class="s">"004"</span><span class="p">;</span>
<span class="n">bcResponse</span><span class="p">.</span><span class="n">ResponseCode</span> <span class="p">=</span> <span class="s">"00000"</span><span class="p">;</span>
<span class="n">bcResponse</span><span class="p">.</span><span class="n">ResponseDescription</span> <span class="p">=</span> <span class="s">"Successful Request"</span><span class="p">;</span>
<span class="n">bcResponse</span><span class="p">.</span><span class="n">TransactionID</span> <span class="p">=</span> <span class="s">"20190709092529"</span><span class="p">;</span>

<span class="n">rsMessage</span><span class="p">.</span><span class="n">GatewayMessage</span> <span class="p">=</span> <span class="s">"A01 - Approved"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">GatewayResult</span> <span class="p">=</span> <span class="s">"00000"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">GatewayTransID</span> <span class="p">=</span> <span class="s">"3710636504"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">TransactionCode</span> <span class="p">=</span> <span class="s">"20190709092529"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">TransactionDate</span> <span class="p">=</span> <span class="s">"20190709"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">AuthorizationCode</span> <span class="p">=</span> <span class="s">"537977"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">AuthorizedAmount</span> <span class="p">=</span> <span class="s">"1200"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">InternalMessage</span> <span class="p">=</span> <span class="s">"Approved: 537977 (approval code)"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">isCommercialCard</span> <span class="p">=</span> <span class="s">"False"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">IsoCountryCode</span> <span class="p">=</span> <span class="s">"840"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">IsoCurrencyCode</span> <span class="p">=</span> <span class="s">"USD"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">IsoRequestDate</span> <span class="p">=</span> <span class="s">"2019-07-09 09:25:30.663"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">IsoTransactionDate</span> <span class="p">=</span> <span class="s">"2019-07-09 09:25:30.663"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">MaskedPan</span> <span class="p">=</span> <span class="s">"1***********1234"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">ExpirationDate</span> <span class="p">=</span> <span class="s">"1234"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">CardClass</span> <span class="p">=</span> <span class="s">"Credit"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">CardType</span> <span class="p">=</span> <span class="s">"Visa"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">OriginalAmount</span> <span class="p">=</span> <span class="s">"1200"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">ProviderResponseMessage</span> <span class="p">=</span> <span class="s">"Approved"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">Token</span> <span class="p">=</span> <span class="s">"11110000000375160150"</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">BridgeCommResponse</span> <span class="n">bcResponse</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="na">processRequest</span><span class="o">(</span><span class="no">URL</span><span class="o">,</span> <span class="n">bcRequest</span><span class="o">);</span>
<span class="n">bcResponse</span><span class="o">.</span><span class="na">RequestType</span> <span class="o">=</span> <span class="s">"004"</span><span class="o">;</span>
<span class="n">bcResponse</span><span class="o">.</span><span class="na">ResponseCode</span> <span class="o">=</span> <span class="s">"00000"</span><span class="o">;</span>
<span class="n">bcResponse</span><span class="o">.</span><span class="na">ResponseDescription</span> <span class="o">=</span> <span class="s">"Successful Request"</span><span class="o">;</span>
<span class="n">bcResponse</span><span class="o">.</span><span class="na">TransactionID</span> <span class="o">=</span> <span class="s">"635693706433821501"</span><span class="o">;</span>

<span class="nc">ResponseMessage</span> <span class="n">rsMessage</span> <span class="o">=</span> <span class="n">bcResponse</span><span class="o">.</span><span class="na">responseMessage</span><span class="o">;</span>
<span class="n">rsMessage</span><span class="o">.</span><span class="na">Token</span> <span class="o">=</span> <span class="s">"1000000074700016"</span><span class="o">;</span>
<span class="n">rsMessage</span><span class="o">.</span><span class="na">ExpirationDate</span> <span class="o">=</span> <span class="s">"1022"</span><span class="o">;</span>
<span class="n">rsMessage</span><span class="o">.</span><span class="na">AuthrorizationCode</span> <span class="o">=</span> <span class="s">"735333"</span><span class="o">;</span>
</code></pre></div>
<blockquote>
<p>Raw XML response</p>
</blockquote>
<div class="highlight"><pre class="highlight xml tab-xml"><code><span class="nt">&lt;Auth&gt;</span>
 <span class="nt">&lt;TransactionID&gt;</span>635693706433821501<span class="nt">&lt;/TransactionID&gt;</span>
    <span class="nt">&lt;RequestType&gt;</span>004<span class="nt">&lt;/RequestType&gt;</span>
    <span class="nt">&lt;ResponseCode&gt;</span>00000<span class="nt">&lt;/ResponseCode&gt;</span>
    <span class="nt">&lt;ResponseDescription&gt;</span>Successful Request<span class="nt">&lt;/ResponseDescription&gt;</span>
        <span class="nt">&lt;responseMessage&gt;</span>
            <span class="nt">&lt;Token&gt;</span>1000000074700016<span class="nt">&lt;/Token&gt;</span>
            <span class="nt">&lt;ExpirationDate&gt;</span>1022<span class="nt">&lt;/ExpirationDate&gt;</span>
            <span class="nt">&lt;OrganizationId&gt;</span>3538<span class="nt">&lt;/OrganizationId&gt;</span>
            <span class="nt">&lt;AuthorizationCode&gt;</span>735333<span class="nt">&lt;/AuthorizationCode&gt;</span>
        <span class="nt">&lt;/responseMessage&gt;</span>
<span class="nt">&lt;/Auth&gt;</span>
</code></pre></div>
<p>The <code>SettlementDelay</code> tag can be added for sale-auth transactions, and designates the number of batch cycles that the authorization remains &quot;open&quot; (or uncaptured). If the sale-auth transaction is not captured before completion of the designated number of batches, then the original authorization will be automatically voided and not captured. This value cannot exceed &quot;30&quot; (batch cycles).</p>

<blockquote>
<p>In order to capture that authorization and charge the card, you must submit 019 capture <code>RequestType</code>, passing the original sale-auth <code>ReferenceNumber</code>, and using the <code>User</code> and <code>Password</code> credentials instead of <code>AuthenticationTokenId</code> and <code>PrivateKey</code> to authenticate:</p>
</blockquote>

<p>To capture an authorization, simply submit a <code>RequestType</code> of <code>019</code> for capture, along with passing the reference number of the original authorization as shown here.</p>
<div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$bpRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BridgeCommRequest</span><span class="p">();</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RequestMessage</span><span class="p">();</span>

<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nc">RequestDateTime</span> <span class="o">=</span> <span class="nc">DateTime</span><span class="mf">.</span><span class="nc">Now</span><span class="mf">.</span><span class="nf">ToString</span><span class="p">(</span><span class="s2">"yyyyMMddHHmmss"</span><span class="p">);</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nc">User</span> <span class="o">=</span> <span class="s2">"xxxxxx"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nc">Password</span> <span class="o">=</span> <span class="s2">"xxxxxx"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nc">RequestType</span> <span class="o">=</span> <span class="s2">"019"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nc">TransactionID</span> <span class="o">=</span> <span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">MerchantCode</span> <span class="o">=</span> <span class="s2">"123456"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">MerchantAccountCode</span> <span class="o">=</span> <span class="s2">"789123"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">Amount</span> <span class="o">=</span> <span class="s2">"1200"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">TransIndustryType</span> <span class="o">=</span> <span class="s2">"EC"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">TransactionType</span> <span class="o">=</span> <span class="s2">"CAPTURE"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">AcctType</span> <span class="o">=</span> <span class="s2">"R"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">HolderType</span> <span class="o">=</span> <span class="s2">"O"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">ReferenceNumber</span> <span class="o">=</span> <span class="s2">"12345678"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">SoftwareVendor</span> <span class="o">=</span> <span class="s2">"YourSoftwareName 1.0"</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">BridgeCommRequest</span> <span class="n">bcRequest</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">BridgeCommRequest</span><span class="p">();</span>
<span class="n">RequestMessage</span> <span class="n">rqMessage</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RequestMessage</span><span class="p">();</span>

<span class="n">bcRequest</span><span class="p">.</span><span class="n">User</span> <span class="p">=</span> <span class="s">"xxxxxx"</span><span class="p">;</span>
<span class="n">bcRequest</span><span class="p">.</span><span class="n">Password</span> <span class="p">=</span> <span class="s">"xxxxxx"</span><span class="p">;</span>
<span class="n">bcRequest</span><span class="p">.</span><span class="n">RequestType</span> <span class="p">=</span> <span class="s">"019"</span><span class="p">;</span>
<span class="n">bcRequest</span><span class="p">.</span><span class="n">TransactionID</span> <span class="p">=</span> <span class="s">"00000000-0000-0000-0000-000000000000"</span><span class="p">;</span>
<span class="n">bcRequest</span><span class="p">.</span><span class="n">RequestDateTime</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">Now</span><span class="p">.</span><span class="nf">ToString</span><span class="p">(</span><span class="s">"yyyyMMddHHmmss"</span><span class="p">);</span>

<span class="n">rqMessage</span><span class="p">.</span><span class="n">MerchantCode</span> <span class="p">=</span> <span class="s">"123456"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">MerchantAccountCode</span> <span class="p">=</span> <span class="s">"789123"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">TransactionType</span> <span class="p">=</span> <span class="s">"CAPTURE"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">TransIndustryType</span> <span class="p">=</span> <span class="s">"EC"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">Amount</span> <span class="p">=</span> <span class="s">"1200"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">HolderType</span> <span class="p">=</span> <span class="s">"O"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">AcctType</span> <span class="p">=</span> <span class="s">"R"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">ReferenceNumber</span> <span class="p">=</span> <span class="s">"12345678"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">SoftwareVendor</span> <span class="p">=</span> <span class="s">"YourSoftwareName 1.0"</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">BridgeCommRequest</span> <span class="n">bcRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BridgeCommRequest</span><span class="o">();</span>
<span class="nc">RequestMessage</span> <span class="n">rqMessage</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RequestMessage</span><span class="o">();</span>

<span class="n">bcRequest</span><span class="o">.</span><span class="na">setUser</span><span class="o">(</span><span class="s">"xxxxxx"</span><span class="o">);</span>
<span class="n">bcRequest</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"xxxxxx"</span><span class="o">);</span>
<span class="n">bcRequest</span><span class="o">.</span><span class="na">setRequestType</span><span class="o">(</span><span class="s">"019"</span><span class="o">);</span>
<span class="n">bcRequest</span><span class="o">.</span><span class="na">setTransactionID</span><span class="o">(</span><span class="s">"00000000-0000-0000-0000-000000000000"</span><span class="o">);</span>
<span class="n">bcRequest</span><span class="o">.</span><span class="na">setRequestDateTime</span><span class="o">(</span><span class="nc">DateTime</span><span class="o">.</span><span class="na">Now</span><span class="o">.</span><span class="na">ToString</span><span class="o">(</span><span class="s">"yyyyMMddHHmmss"</span><span class="o">));</span>
<span class="n">bcRequest</span><span class="o">.</span><span class="na">setRequestMessage</span><span class="o">(</span><span class="k">new</span> <span class="n">rqMessage</span><span class="o">);</span>

<span class="n">rqMessage</span><span class="o">.</span><span class="na">setMerchantCode</span><span class="o">(</span><span class="s">"123456"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setMerchantAccountCode</span><span class="o">(</span><span class="s">"789123"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setTransIndustryType</span><span class="o">(</span><span class="s">"EC"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setTransactionType</span><span class="o">(</span><span class="s">"CAPTURE"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setReferenceNumber</span><span class="o">(</span><span class="s">"12345678"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setSoftwareVendor</span><span class="o">(</span><span class="s">"YourSoftwareName 1.0"</span><span class="o">);</span>
</code></pre></div>
<blockquote>
<p>Or, in the raw XML:</p>
</blockquote>
<div class="highlight"><pre class="highlight xml tab-xml"><code><span class="nt">&lt;requestHeader&gt;</span>
    <span class="nt">&lt;ClientIdentifier&gt;</span>SOAP<span class="nt">&lt;/ClientIdentifier&gt;</span>
    <span class="nt">&lt;TransactionID&gt;</span>00000000-0000-0000-0000-000000000000<span class="nt">&lt;/TransactionID&gt;</span>
    <span class="nt">&lt;RequestType&gt;</span>019<span class="nt">&lt;/RequestType&gt;</span>
    <span class="nt">&lt;RequestDateTime&gt;</span>yyyyMMddHHmmss<span class="nt">&lt;/RequestDateTime&gt;</span>
    <span class="nt">&lt;User&gt;</span>xxxxxx<span class="nt">&lt;/User&gt;</span>
    <span class="nt">&lt;Password&gt;</span>xxxxxx<span class="nt">&lt;/Password&gt;</span>
    <span class="nt">&lt;requestMessage&gt;</span>                    
        <span class="nt">&lt;SoftwareVendor&gt;</span>YourSoftwareNam 1.0<span class="nt">&lt;/SoftwareVendor&gt;</span>
        <span class="nt">&lt;TransactionType&gt;</span>capture<span class="nt">&lt;/TransactionType&gt;</span>
        <span class="nt">&lt;ReferenceNumber&gt;</span>12345678<span class="nt">&lt;/ReferenceNumber&gt;</span>
        <span class="nt">&lt;Amount&gt;</span>1200<span class="nt">&lt;/Amount&gt;</span>
    <span class="nt">&lt;/requestMessage&gt;</span>
<span class="nt">&lt;/requestHeader&gt;</span>
</code></pre></div>
<aside class="notice">
This capture request and several other API requests described here may take differing credentials in order to authenticate the client. All such credentials will be provided by Beyond for testing and production.
</aside>

<blockquote>
<p>Beyond Pay Sample Capture Response</p>
</blockquote>
<div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$bcResponse</span><span class="o">-&gt;</span><span class="nc">TransactionID</span> <span class="o">=</span> <span class="s2">"635693706433821501"</span><span class="p">;</span>
<span class="nv">$bcResponse</span><span class="o">-&gt;</span><span class="nc">RequestType</span> <span class="o">=</span> <span class="s2">"019"</span><span class="p">;</span>
<span class="nv">$bcResponse</span><span class="o">-&gt;</span><span class="nc">ResponseCode</span> <span class="o">=</span> <span class="s2">"00000"</span><span class="p">;</span>
<span class="nv">$bcResponse</span><span class="o">-&gt;</span><span class="nc">ResponseDescription</span> <span class="o">=</span> <span class="s2">"Successful Request"</span><span class="p">;</span>
<span class="nv">$rsMessage</span> <span class="o">=</span> <span class="nv">$bcResponse</span><span class="o">-&gt;</span><span class="n">responseMessage</span><span class="p">;</span>
<span class="nv">$rsMessage</span><span class="o">-&gt;</span><span class="nc">ReferenceNumber</span> <span class="o">=</span> <span class="s2">"735333"</span><span class="p">;</span>
<span class="nv">$rsMessage</span><span class="o">-&gt;</span><span class="nc">GatewayResult</span> <span class="o">=</span> <span class="s2">"00000"</span><span class="p">;</span>
<span class="nv">$rsMessage</span><span class="o">-&gt;</span><span class="nc">GatewayTransID</span> <span class="o">=</span> <span class="s2">"3710636504"</span><span class="p">;</span>
<span class="nv">$rsMessage</span><span class="o">-&gt;</span><span class="nc">GatewayMessage</span> <span class="o">=</span> <span class="s2">"A01 - Approved"</span><span class="p">;</span>
<span class="nv">$rsMessage</span><span class="o">-&gt;</span><span class="nc">TransactionCode</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">BridgeCommConnection</span> <span class="n">connection</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">BridgeCommConnection</span><span class="p">();</span>
<span class="n">BridgeCommResponse</span> <span class="n">bcResponse</span> <span class="p">=</span> <span class="n">connection</span><span class="p">.</span><span class="nf">processRequest</span><span class="p">(</span><span class="n">URL</span><span class="p">,</span> <span class="n">bcRequest</span><span class="p">);</span>
<span class="n">ResponseMessage</span> <span class="n">rsMessage</span> <span class="p">=</span> <span class="n">bcResponse</span><span class="p">.</span><span class="n">responseMessage</span><span class="p">;</span>

<span class="n">bcResponse</span><span class="p">.</span><span class="n">BridgeCommResponseType</span> <span class="p">=</span> <span class="s">"Auth"</span><span class="p">;</span>
<span class="n">bcResponse</span><span class="p">.</span><span class="n">RequestType</span> <span class="p">=</span> <span class="s">"019"</span><span class="p">;</span>
<span class="n">bcResponse</span><span class="p">.</span><span class="n">ResponseCode</span> <span class="p">=</span> <span class="s">"00000"</span><span class="p">;</span>
<span class="n">bcResponse</span><span class="p">.</span><span class="n">ResponseDescription</span> <span class="p">=</span> <span class="s">"Successful Request"</span><span class="p">;</span>
<span class="n">bcResponse</span><span class="p">.</span><span class="n">TransactionID</span> <span class="p">=</span> <span class="s">"20190709092529"</span><span class="p">;</span>

<span class="n">rsMessage</span><span class="p">.</span><span class="n">GatewayMessage</span> <span class="p">=</span> <span class="s">"A01 - Approved"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">GatewayResult</span> <span class="p">=</span> <span class="s">"00000"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">GatewayTransID</span> <span class="p">=</span> <span class="s">"3710636504"</span><span class="p">;</span>
<span class="n">rsMessage</span><span class="p">.</span><span class="n">TransactionCode</span> <span class="p">=</span> <span class="s">"20190709092529"</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">BridgeCommConnection</span> <span class="n">connection</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BridgeCommConnection</span><span class="o">();</span>
<span class="nc">BridgeCommResponse</span> <span class="n">bcResponse</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="na">processRequest</span><span class="o">(</span><span class="no">URL</span><span class="o">,</span> <span class="n">bcRequest</span><span class="o">);</span>
<span class="nc">ResponseMessage</span> <span class="n">rsMessage</span> <span class="o">=</span> <span class="n">bcResponse</span><span class="o">.</span><span class="na">responseMessage</span><span class="o">;</span>

<span class="n">bcResponse</span><span class="o">.</span><span class="na">BridgeCommResponseType</span> <span class="o">=</span> <span class="s">"Auth"</span><span class="o">;</span>
<span class="n">bcResponse</span><span class="o">.</span><span class="na">RequestType</span> <span class="o">=</span> <span class="s">"019"</span><span class="o">;</span>
<span class="n">bcResponse</span><span class="o">.</span><span class="na">ResponseCode</span> <span class="o">=</span> <span class="s">"00000"</span><span class="o">;</span>
<span class="n">bcResponse</span><span class="o">.</span><span class="na">ResponseDescription</span> <span class="o">=</span> <span class="s">"Successful Request"</span><span class="o">;</span>
<span class="n">bcResponse</span><span class="o">.</span><span class="na">TransactionID</span> <span class="o">=</span> <span class="s">"20190709092529"</span><span class="o">;</span>

<span class="n">rsMessage</span><span class="o">.</span><span class="na">GatewayMessage</span> <span class="o">=</span> <span class="s">"A01 - Approved"</span><span class="o">;</span>
<span class="n">rsMessage</span><span class="o">.</span><span class="na">GatewayResult</span> <span class="o">=</span> <span class="s">"00000"</span><span class="o">;</span>
<span class="n">rsMessage</span><span class="o">.</span><span class="na">GatewayTransID</span> <span class="o">=</span> <span class="s">"3710636504"</span><span class="o">;</span>
<span class="n">rsMessage</span><span class="o">.</span><span class="na">TransactionCode</span> <span class="o">=</span> <span class="s">"20190709092529"</span><span class="o">;</span>
</code></pre></div>
<blockquote>
<p>Raw XML response</p>
</blockquote>
<div class="highlight"><pre class="highlight xml tab-xml"><code><span class="cp">&lt;?xml version="1.0" encoding="utf-16"?&gt;</span>
<span class="nt">&lt;Capture&gt;</span>
  <span class="nt">&lt;TransactionID&gt;</span>20190709092529<span class="nt">&lt;/TransactionID&gt;</span>
  <span class="nt">&lt;RequestType&gt;</span>019<span class="nt">&lt;/RequestType&gt;</span>
  <span class="nt">&lt;ResponseCode&gt;</span>00000<span class="nt">&lt;/ResponseCode&gt;</span>
  <span class="nt">&lt;responseMessage&gt;</span>
    <span class="nt">&lt;ReferenceNumber&gt;&lt;/ReferenceNumber&gt;</span>
    <span class="nt">&lt;GatewayResult&gt;</span>00000<span class="nt">&lt;/GatewayResult&gt;</span>
    <span class="nt">&lt;GatewayTransID&gt;</span>3710636504<span class="nt">&lt;/GatewayTransID&gt;</span>
    <span class="nt">&lt;GatewayMessage&gt;</span>A01 - Approved<span class="nt">&lt;/GatewayMessage&gt;</span>
    <span class="nt">&lt;TransactionCode&gt;&lt;/TransactionCode&gt;</span>
  <span class="nt">&lt;/responseMessage&gt;</span>
<span class="nt">&lt;/Capture&gt;</span>
</code></pre></div><h2 id='repeat-sales-and-cards-on-file'>Repeat Sales and Cards-on-File</h2>
<blockquote>
<p>The <code>Token</code> element represents a card number, can be used multiple times, and does not expire. It may be used as input in a transaction in lieu of the <code>PaymentAccountNumber</code> or the <code>AuthenticationTokenId</code>, and also requires the <code>ExpirationDate</code> field to be submitted with it.</p>
</blockquote>

<p>Every sale or authorization response from Beyond Pay contains a <code>Token</code> element. This Token represents the card number used in the original transaction, but is not considered a sensitive data element per the PCI DSS. To ease in identifying the original card, however, the last four digits of the <code>Token</code> are the same as the last four digits of the card number.</p>
<div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$bpRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BridgeCommRequest</span><span class="p">();</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RequestMessage</span><span class="p">();</span>

<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nc">RequestDateTime</span> <span class="o">=</span> <span class="nc">DateTime</span><span class="mf">.</span><span class="nc">Now</span><span class="mf">.</span><span class="nf">ToString</span><span class="p">(</span><span class="s2">"yyyyMMddHHmmss"</span><span class="p">);</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nc">User</span> <span class="o">=</span> <span class="s2">"xxxxxx"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nc">Password</span> <span class="o">=</span> <span class="s2">"xxxxxx"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nc">RequestType</span> <span class="o">=</span> <span class="s2">"004"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nc">TransactionID</span> <span class="o">=</span> <span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">MerchantCode</span> <span class="o">=</span> <span class="s2">"123456"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">MerchantAccountCode</span> <span class="o">=</span> <span class="s2">"789123"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">Amount</span> <span class="o">=</span> <span class="s2">"1200"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">TransIndustryType</span> <span class="o">=</span> <span class="s2">"EC"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">TransactionType</span> <span class="o">=</span> <span class="s2">"SALE"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">AcctType</span> <span class="o">=</span> <span class="s2">"R"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">HolderType</span> <span class="o">=</span> <span class="s2">"O"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">SoftwareVendor</span> <span class="o">=</span> <span class="s2">"YourSoftwareName 1.0"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">Token</span> <span class="o">=</span> <span class="s2">"1000000010532376"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">ExpirationDate</span> <span class="o">=</span> <span class="s2">"12/23"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="n">requestMessage</span><span class="o">-&gt;</span><span class="nc">StoredCredential</span> <span class="o">=</span> <span class="s2">"recurring"</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">BridgeCommRequest</span> <span class="n">bcRequest</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">BridgeCommRequest</span><span class="p">();</span>
<span class="n">RequestMessage</span> <span class="n">rqMessage</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RequestMessage</span><span class="p">();</span>

<span class="n">bcRequest</span><span class="p">.</span><span class="n">User</span> <span class="p">=</span> <span class="s">"xxxxxx"</span><span class="p">;</span>
<span class="n">bcRequest</span><span class="p">.</span><span class="n">Password</span> <span class="p">=</span> <span class="s">"xxxxxx"</span><span class="p">;</span>
<span class="n">bcRequest</span><span class="p">.</span><span class="n">RequestType</span> <span class="p">=</span> <span class="s">"004"</span><span class="p">;</span>
<span class="n">bcRequest</span><span class="p">.</span><span class="n">TransactionID</span> <span class="p">=</span> <span class="s">"00000000-0000-0000-0000-000000000000"</span><span class="p">;</span>
<span class="n">bcRequest</span><span class="p">.</span><span class="n">RequestDateTime</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">Now</span><span class="p">.</span><span class="nf">ToString</span><span class="p">(</span><span class="s">"yyyyMMddHHmmss"</span><span class="p">);</span>

<span class="n">rqMessage</span><span class="p">.</span><span class="n">MerchantCode</span> <span class="p">=</span> <span class="s">"123456"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">MerchantAccountCode</span> <span class="p">=</span> <span class="s">"789123"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">TransactionType</span> <span class="p">=</span> <span class="s">"SALE"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">TransIndustryType</span> <span class="p">=</span> <span class="s">"EC"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">Amount</span> <span class="p">=</span> <span class="s">"1200"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">HolderType</span> <span class="p">=</span> <span class="s">"O"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">AcctType</span> <span class="p">=</span> <span class="s">"R"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">SoftwareVendor</span> <span class="p">=</span> <span class="s">"YourSoftwareName 1.0"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">Token</span> <span class="p">=</span> <span class="s">"1000000010532376"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">ExpirationDate</span> <span class="p">=</span> <span class="s">"12/23"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">StoredCredential</span> <span class="p">=</span> <span class="s">"recurring"</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">BridgeCommRequest</span> <span class="n">bcRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BridgeCommRequest</span><span class="o">();</span>
<span class="nc">RequestMessage</span> <span class="n">rqMessage</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RequestMessage</span><span class="o">();</span>

<span class="n">bcRequest</span><span class="o">.</span><span class="na">setUser</span><span class="o">(</span><span class="s">"xxxxxx"</span><span class="o">);</span>
<span class="n">bcRequest</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"xxxxxx"</span><span class="o">);</span>
<span class="n">bcRequest</span><span class="o">.</span><span class="na">setRequestType</span><span class="o">(</span><span class="s">"004"</span><span class="o">);</span>
<span class="n">bcRequest</span><span class="o">.</span><span class="na">setTransactionID</span><span class="o">(</span><span class="s">"00000000-0000-0000-0000-000000000000"</span><span class="o">);</span>
<span class="n">bcRequest</span><span class="o">.</span><span class="na">setRequestDateTime</span><span class="o">(</span><span class="nc">DateTime</span><span class="o">.</span><span class="na">Now</span><span class="o">.</span><span class="na">ToString</span><span class="o">(</span><span class="s">"yyyyMMddHHmmss"</span><span class="o">));</span>
<span class="n">bcRequest</span><span class="o">.</span><span class="na">setRequestMessage</span><span class="o">(</span><span class="k">new</span> <span class="n">rqMessage</span><span class="o">);</span>

<span class="n">rqMessage</span><span class="o">.</span><span class="na">setMerchantCode</span><span class="o">(</span><span class="s">"123456"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setMerchantAccountCode</span><span class="o">(</span><span class="s">"789123"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setTransIndustryType</span><span class="o">(</span><span class="s">"EC"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setTransactionType</span><span class="o">(</span><span class="s">"SALE"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setReferenceNumber</span><span class="o">(</span><span class="s">"12345678"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setSoftwareVendor</span><span class="o">(</span><span class="s">"YourSoftwareName 1.0"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="s">"1000000010532376"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setExpirationDate</span><span class="o">(</span><span class="s">"12/23"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">StoredCredential</span><span class="o">(</span><span class="s">"recurring"</span><span class="o">);</span>
</code></pre></div>
<blockquote>
<p>Or, in the raw XML:</p>
</blockquote>
<div class="highlight"><pre class="highlight xml tab-xml"><code><span class="nt">&lt;requestHeader&gt;</span>
    <span class="nt">&lt;ClientIdentifier&gt;</span>SOAP<span class="nt">&lt;/ClientIdentifier&gt;</span>
    <span class="nt">&lt;TransactionID&gt;</span>00000000-0000-0000-0000-000000000000<span class="nt">&lt;/TransactionID&gt;</span>
    <span class="nt">&lt;RequestType&gt;</span>004<span class="nt">&lt;/RequestType&gt;</span>
    <span class="nt">&lt;RequestDateTime&gt;</span>yyyyMMddHHmmss<span class="nt">&lt;/RequestDateTime&gt;</span>
    <span class="nt">&lt;User&gt;</span>xxxxxx<span class="nt">&lt;/User&gt;</span>
    <span class="nt">&lt;Password&gt;</span>xxxxxx<span class="nt">&lt;/Password&gt;</span>
    <span class="nt">&lt;requestMessage&gt;</span>
        <span class="nt">&lt;SoftwareVendor&gt;</span>YourSoftwareName 1.0<span class="nt">&lt;/SoftwareVendor&gt;</span>                    
        <span class="nt">&lt;Token&gt;</span>1000000010532376<span class="nt">&lt;/Token&gt;</span>
        <span class="nt">&lt;ExpirationDate&gt;</span>1223<span class="nt">&lt;/ExpirationDate&gt;</span>
        <span class="nt">&lt;TransactionType&gt;</span>sale<span class="nt">&lt;/TransactionType&gt;</span>
        <span class="nt">&lt;TransIndustryType&gt;</span>EC<span class="nt">&lt;/TransIndustryType&gt;</span>
        <span class="nt">&lt;AcctType&gt;</span>R<span class="nt">&lt;/AcctType&gt;</span>
        <span class="nt">&lt;HolderType&gt;</span>O<span class="nt">&lt;/HolderType&gt;</span>
        <span class="nt">&lt;Amount&gt;</span>1200<span class="nt">&lt;/Amount&gt;</span>
        <span class="nt">&lt;CurrencyCode&gt;</span>USD<span class="nt">&lt;/CurrencyCode&gt;</span>
        <span class="nt">&lt;StoredCredential&gt;</span>recurring<span class="nt">&lt;/StoredCredential&gt;</span>
    <span class="nt">&lt;/requestMessage&gt;</span>
<span class="nt">&lt;/requestHeader&gt;</span>
</code></pre></div>
<p>This Token value may be persisted and, with the cardholder&#39;s permission, associated with their user account in your application in order to make future purchases with the same card (&quot;card-on-file&quot;).</p>

<p>Submitting a sale or sale-auth transaction with the Token as input requires use of the <code>User</code> and <code>Password</code> credentials in the request message, and also requires that the card <code>ExpirationDate</code> value be persisted and stored with the <code>Token</code> (the <code>ExpirationDate</code> value is returned in the original response message along with the <code>Token</code>).</p>
<h2 id='refunds-and-voids'>Refunds and Voids</h2>
<p>In order to refund or void a previous sale or sale-auth transaction, simply construct an XML message with <code>RequestType</code> of <code>012</code> and <code>TransactionType</code> of <code>refund</code>. Note that if the original transaction is still in an unsettled batch, the gateway will perform a void/reversal transaction. If the original transaction has already settled, then the gateway will perform a refund to the original card.</p>

<blockquote>
<p>The <code>GatewayTransId</code> is returned in the response to a previous sale or sale-auth request and may be used as input to refund or void that original transaction.</p>
</blockquote>
<div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$bpRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BridgeCommRequest</span><span class="p">();</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RequestMessage</span><span class="p">();</span>

<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nc">RequestDateTime</span> <span class="o">=</span> <span class="nc">DateTime</span><span class="mf">.</span><span class="nc">Now</span><span class="mf">.</span><span class="nf">ToString</span><span class="p">(</span><span class="s2">"yyyyMMddHHmmss"</span><span class="p">);</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nc">User</span> <span class="o">=</span> <span class="s2">"xxxxxx"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nc">Password</span> <span class="o">=</span> <span class="s2">"xxxxxx"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nc">RequestType</span> <span class="o">=</span> <span class="s2">"012"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nc">TransactionID</span> <span class="o">=</span> <span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">MerchantCode</span> <span class="o">=</span> <span class="s2">"123456"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">MerchantAccountCode</span> <span class="o">=</span> <span class="s2">"789123"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">Amount</span> <span class="o">=</span> <span class="s2">"1200"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">TransactionType</span> <span class="o">=</span> <span class="s2">"REFUND"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">AcctType</span> <span class="o">=</span> <span class="s2">"R"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">HolderType</span> <span class="o">=</span> <span class="s2">"O"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">SoftwareVendor</span> <span class="o">=</span> <span class="s2">"YourSoftwareName 1.0"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">ReferenceNumber</span> <span class="o">=</span> <span class="s2">"12345678"</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">BridgeCommRequest</span> <span class="n">bcRequest</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">BridgeCommRequest</span><span class="p">();</span>
<span class="n">RequestMessage</span> <span class="n">rqMessage</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RequestMessage</span><span class="p">();</span>

<span class="n">bcRequest</span><span class="p">.</span><span class="n">User</span> <span class="p">=</span> <span class="s">"xxxxxx"</span><span class="p">;</span>
<span class="n">bcRequest</span><span class="p">.</span><span class="n">Password</span> <span class="p">=</span> <span class="s">"xxxxxx"</span><span class="p">;</span>
<span class="n">bcRequest</span><span class="p">.</span><span class="n">RequestType</span> <span class="p">=</span> <span class="s">"012"</span><span class="p">;</span>
<span class="n">bcRequest</span><span class="p">.</span><span class="n">TransactionID</span> <span class="p">=</span> <span class="s">"00000000-0000-0000-0000-000000000000"</span><span class="p">;</span>
<span class="n">bcRequest</span><span class="p">.</span><span class="n">RequestDateTime</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">Now</span><span class="p">.</span><span class="nf">ToString</span><span class="p">(</span><span class="s">"yyyyMMddHHmmss"</span><span class="p">);</span>

<span class="n">rqMessage</span><span class="p">.</span><span class="n">MerchantCode</span> <span class="p">=</span> <span class="s">"123456"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">MerchantAccountCode</span> <span class="p">=</span> <span class="s">"789123"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">TransactionType</span> <span class="p">=</span> <span class="s">"REFUND"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">Amount</span> <span class="p">=</span> <span class="s">"1200"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">HolderType</span> <span class="p">=</span> <span class="s">"O"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">AcctType</span> <span class="p">=</span> <span class="s">"R"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">SoftwareVendor</span> <span class="p">=</span> <span class="s">"YourSoftwareName 1.0"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">ReferenceNumber</span> <span class="p">=</span> <span class="s">"12345678"</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">BridgeCommRequest</span> <span class="n">bcRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BridgeCommRequest</span><span class="o">();</span>
<span class="nc">RequestMessage</span> <span class="n">rqMessage</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RequestMessage</span><span class="o">();</span>

<span class="n">bcRequest</span><span class="o">.</span><span class="na">setUser</span><span class="o">(</span><span class="s">"xxxxxx"</span><span class="o">);</span>
<span class="n">bcRequest</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"xxxxxx"</span><span class="o">);</span>
<span class="n">bcRequest</span><span class="o">.</span><span class="na">setRequestType</span><span class="o">(</span><span class="s">"012"</span><span class="o">);</span>
<span class="n">bcRequest</span><span class="o">.</span><span class="na">setTransactionID</span><span class="o">(</span><span class="s">"00000000-0000-0000-0000-000000000000"</span><span class="o">);</span>
<span class="n">bcRequest</span><span class="o">.</span><span class="na">setRequestDateTime</span><span class="o">(</span><span class="nc">DateTime</span><span class="o">.</span><span class="na">Now</span><span class="o">.</span><span class="na">ToString</span><span class="o">(</span><span class="s">"yyyyMMddHHmmss"</span><span class="o">));</span>
<span class="n">bcRequest</span><span class="o">.</span><span class="na">setRequestMessage</span><span class="o">(</span><span class="k">new</span> <span class="n">rqMessage</span><span class="o">);</span>

<span class="n">rqMessage</span><span class="o">.</span><span class="na">setMerchantCode</span><span class="o">(</span><span class="s">"123456"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setMerchantAccountCode</span><span class="o">(</span><span class="s">"789123"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setTransactionType</span><span class="o">(</span><span class="s">"REFUND"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setReferenceNumber</span><span class="o">(</span><span class="s">"12345678"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setSoftwareVendor</span><span class="o">(</span><span class="s">"YourSoftwareName 1.0"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setReferenceNumber</span><span class="o">(</span><span class="s">"12345678"</span><span class="o">);</span>
</code></pre></div>
<blockquote>
<p>Or, in the raw XML:</p>
</blockquote>
<div class="highlight"><pre class="highlight xml tab-xml"><code><span class="nt">&lt;requestHeader&gt;</span>
    <span class="nt">&lt;ClientIdentifier&gt;</span>SOAP<span class="nt">&lt;/ClientIdentifier&gt;</span>
    <span class="nt">&lt;TransactionID&gt;</span>{transactionId}<span class="nt">&lt;/TransactionID&gt;</span>
    <span class="nt">&lt;RequestType&gt;</span>012<span class="nt">&lt;/RequestType&gt;</span>
    <span class="nt">&lt;RequestDateTime&gt;</span>{requestDateTime}<span class="nt">&lt;/RequestDateTime&gt;</span>
    <span class="nt">&lt;User&gt;</span>{Beyond-assigned username}<span class="nt">&lt;/User&gt;</span>
    <span class="nt">&lt;Password&gt;</span>{Beyond-assigned password}<span class="nt">&lt;/Password&gt;</span>
    <span class="nt">&lt;requestMessage&gt;</span>                    
        <span class="nt">&lt;SoftwareVendor&gt;</span>{yourSoftwareName}<span class="nt">&lt;/SoftwareVendor&gt;</span>
        <span class="nt">&lt;TransactionType&gt;</span>refund<span class="nt">&lt;/TransactionType&gt;</span>
        <span class="nt">&lt;ReferenceNumber&gt;</span>{original sale or sale-auth GatewayTransId}<span class="nt">&lt;/ReferenceNumber&gt;</span>
        <span class="nt">&lt;Amount&gt;</span>{amountInCents}<span class="nt">&lt;/Amount&gt;</span>
    <span class="nt">&lt;/requestMessage&gt;</span>
<span class="nt">&lt;/requestHeader&gt;</span>
</code></pre></div>
<aside class="notice">
You may refund/void the full amount of an original transaction or only part of the amount (a "partial refund" or "partial reversal"). If the transaction is in the current open (unsettled) batch, then only a single void (for the full amount or partial amount) may be performed. If the transaction has settled, the refund request transaction may be repeated for multiple partial refunds up to the amount of the original transaction.
</aside>

<blockquote>
<p>Raw XML response</p>
</blockquote>
<div class="highlight"><pre class="highlight xml tab-xml"><code><span class="cp">&lt;?xml version="1.0" encoding="utf-16"?&gt;</span>
<span class="nt">&lt;VoidRefund&gt;</span>
  <span class="nt">&lt;TransactionID&gt;</span>12345<span class="nt">&lt;/TransactionID&gt;</span>
  <span class="nt">&lt;RequestType&gt;</span>012<span class="nt">&lt;/RequestType&gt;</span>
  <span class="nt">&lt;ResponseCode&gt;</span>00000<span class="nt">&lt;/ResponseCode&gt;</span>
  <span class="nt">&lt;ResponseDescription&gt;</span>Successful Request<span class="nt">&lt;/ResponseDescription&gt;</span>
  <span class="nt">&lt;responseMessage&gt;</span>
    <span class="nt">&lt;ReferenceNumber</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;GatewayTransID&gt;</span>3807822104<span class="nt">&lt;/GatewayTransID&gt;</span>
    <span class="nt">&lt;GatewayMessage&gt;</span>A08 - Partial Refund Posted<span class="nt">&lt;/GatewayMessage&gt;</span>
    <span class="nt">&lt;InternalMessage&gt;</span>Approved: 945466 (approval code)<span class="nt">&lt;/InternalMessage&gt;</span>
    <span class="nt">&lt;GatewayResult&gt;</span>00000<span class="nt">&lt;/GatewayResult&gt;</span>
    <span class="nt">&lt;TransactionCode&gt;</span>12345<span class="nt">&lt;/TransactionCode&gt;</span>
    <span class="nt">&lt;RemainingAmount&gt;</span>3000<span class="nt">&lt;/RemainingAmount&gt;</span>
    <span class="nt">&lt;OrganizationId&gt;</span>2380<span class="nt">&lt;/OrganizationId&gt;</span>
    <span class="nt">&lt;MerchantAccountCode</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;ResponseType&gt;</span>refund<span class="nt">&lt;/ResponseType&gt;</span>
    <span class="nt">&lt;ResponseTypeDescription&gt;</span>refund<span class="nt">&lt;/ResponseTypeDescription&gt;</span>
    <span class="nt">&lt;CardClass</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;CardType</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;CardHolderName</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;ProviderResponseCode</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;ProviderResponseMessage</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/responseMessage&gt;</span>
<span class="nt">&lt;/VoidRefund&gt;</span>

</code></pre></div><h2 id='level-ii-and-level-iii-data'>Level II and Level III Data</h2>
<p>Some business cards may be eligible for lower interchange rates if you send additional data with the transaction. Beyond Pay supports these additional data fields and can help you or your clients secure <a href="https://www.getbeyond.com/b2b-payment-solutions/" target="_blank">these significantly reduced rates and other B2B benefits</a>.</p>
<h3 id='level-ii-data'>Level II Data</h3>
<blockquote>
<p>Sample transaction with Level II data:</p>
</blockquote>
<div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$bpRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BeyondPayRequest</span><span class="p">();</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RequestMessage</span><span class="p">();</span>

<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nc">RequestDateTime</span> <span class="o">=</span> <span class="nc">DateTime</span><span class="mf">.</span><span class="nc">Now</span><span class="mf">.</span><span class="nf">ToString</span><span class="p">(</span><span class="s2">"yyyyMMddHHmmss"</span><span class="p">);</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nc">RequestType</span> <span class="o">=</span> <span class="s2">"004"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nc">PrivateKey</span> <span class="o">=</span> <span class="s2">"YourPrivateKey"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nc">AuthenticationTokenId</span> <span class="o">=</span> <span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nc">TransactionID</span> <span class="o">=</span> <span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">MerchantCode</span> <span class="o">=</span> <span class="s2">"123456"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">MerchantAccountCode</span> <span class="o">=</span> <span class="s2">"789123"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">Amount</span> <span class="o">=</span> <span class="s2">"1200"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">TransIndustryType</span> <span class="o">=</span> <span class="s2">"EC"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">TransactionType</span> <span class="o">=</span> <span class="s2">"SALE"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">ExpirationDate</span> <span class="o">=</span> <span class="s2">"1224"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">AcctType</span> <span class="o">=</span> <span class="s2">"R"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">HolderType</span> <span class="o">=</span> <span class="s2">"O"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">IsoCurrencyCode</span> <span class="o">=</span> <span class="s2">"USD"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">SoftwareVendor</span> <span class="o">=</span> <span class="s2">"YourSoftwareName 1.0"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">PONum</span> <span class="o">=</span> <span class="s2">"PO-4321"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">TaxAmount</span> <span class="o">=</span> <span class="s2">"110"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">TaxIndicator</span> <span class="o">=</span> <span class="s2">"P"</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">BridgeCommRequest</span> <span class="n">bcRequest</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">BridgeCommRequest</span><span class="p">();</span>
<span class="n">RequestMessage</span> <span class="n">rqMessage</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RequestMessage</span><span class="p">();</span>

<span class="n">bcRequest</span><span class="p">.</span><span class="n">RequestType</span> <span class="p">=</span> <span class="s">"004"</span><span class="p">;</span>
<span class="n">bcRequest</span><span class="p">.</span><span class="n">TransactionID</span> <span class="p">=</span> <span class="s">"00000000-0000-0000-0000-000000000000"</span><span class="p">;</span>
<span class="n">bcRequest</span><span class="p">.</span><span class="n">PrivateKey</span> <span class="p">=</span> <span class="s">"YourPrivateKey"</span><span class="p">;</span>
<span class="n">bcRequest</span><span class="p">.</span><span class="n">AuthenticationTokenId</span> <span class="p">=</span> <span class="s">"00000000-0000-0000-0000-000000000000"</span><span class="p">;</span>
<span class="n">bcRequest</span><span class="p">.</span><span class="n">RequestDateTime</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">Now</span><span class="p">.</span><span class="nf">ToString</span><span class="p">(</span><span class="s">"yyyyMMddHHmmss"</span><span class="p">);</span>

<span class="n">rqMessage</span><span class="p">.</span><span class="n">MerchantCode</span> <span class="p">=</span> <span class="s">"123456"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">MerchantAccountCode</span> <span class="p">=</span> <span class="s">"789123"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">TransactionType</span> <span class="p">=</span> <span class="s">"SALE"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">TransIndustryType</span> <span class="p">=</span> <span class="s">"EC"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">Amount</span> <span class="p">=</span> <span class="s">"1200"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">HolderType</span> <span class="p">=</span> <span class="s">"O"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">AcctType</span> <span class="p">=</span> <span class="s">"R"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">IsoCurrencyCode</span> <span class="p">=</span> <span class="s">"USD"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">SoftwareVendor</span> <span class="p">=</span> <span class="s">"YourSoftwareName 1.0"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">PONum</span> <span class="p">=</span> <span class="s">"PO-4321"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">TaxAmount</span> <span class="p">=</span> <span class="s">"110"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">TaxIndicator</span> <span class="p">=</span> <span class="s">"P"</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">BridgeCommRequest</span> <span class="n">bcRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BridgeCommRequest</span><span class="o">();</span>
<span class="nc">RequestMessage</span> <span class="n">rqMessage</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RequestMessage</span><span class="o">();</span>

<span class="n">bcRequest</span><span class="o">.</span><span class="na">setRequestType</span><span class="o">(</span><span class="s">"004"</span><span class="o">);</span>
<span class="n">bcRequest</span><span class="o">.</span><span class="na">setAuthenticationTokenId</span><span class="o">(</span><span class="s">"00000000-0000-0000-0000-000000000000"</span><span class="o">);</span>
<span class="n">bcRequest</span><span class="o">.</span><span class="na">setTransactionID</span><span class="o">(</span><span class="nc">DateTime</span><span class="o">.</span><span class="na">Now</span><span class="o">.</span><span class="na">ToString</span><span class="o">(</span><span class="s">"yyyyMMddHHmmss"</span><span class="o">));</span>
<span class="n">bcRequest</span><span class="o">.</span><span class="na">setRequestMessage</span><span class="o">(</span><span class="k">new</span> <span class="n">rqMessage</span><span class="o">);</span>

<span class="n">rqMessage</span><span class="o">.</span><span class="na">setMerchantCode</span><span class="o">(</span><span class="s">"123456"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setMerchantAccountCode</span><span class="o">(</span><span class="s">"789123"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="s">"1200"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setTransIndustryType</span><span class="o">(</span><span class="s">"EC"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setTransactionType</span><span class="o">(</span><span class="s">"SALE"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setHolderType</span><span class="o">(</span><span class="s">"O"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setExpirationDate</span><span class="o">(</span><span class="s">"1234"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setIsoCurrencyCode</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setAcctType</span><span class="o">(</span><span class="s">"R"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setSoftwareVendor</span><span class="o">(</span><span class="s">"Your Software Name 1.0"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setPONum</span><span class="o">(</span><span class="s">"PO-4321"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setTaxAmount</span><span class="o">(</span><span class="s">"110"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setTaxIndicator</span><span class="o">(</span><span class="s">"P"</span><span class="o">);</span>
</code></pre></div>
<p>In order for a transaction to qualify at reduced &quot;Level II&quot; interchange rates, assuming the card is eligible for such, the following fields should be provided in the XML message to the gateway in addition to the basic required fields given in the <a href="#token-sale">instructions for processing a basic sale transaction</a>:</p>

<ul>
<li><code>PONum</code> - the customer&#39;s Purchase Order number; may be up to 24 alphanumeric characters and hyphens</li>
<li><code>TaxAmount</code> - applicable tax amount in cents (implied decimal); must be less than the total transaction <code>Amount</code></li>
<li><code>TaxIndicator</code> - may be <code>P</code> (Provided), <code>N</code> (Not Provided), or <code>E</code> (Exempt). Use P if you are sending a value in <code>TaxAmount</code>, or E if you are tax-exempt</li>
</ul>

<blockquote>
<p>Or, in the raw XML:</p>
</blockquote>
<div class="highlight"><pre class="highlight xml tab-xml"><code><span class="nt">&lt;requestHeader&gt;</span>
    <span class="nt">&lt;ClientIdentifier&gt;</span>SOAP<span class="nt">&lt;/ClientIdentifier&gt;</span>
    <span class="nt">&lt;TransactionID&gt;</span>00000000-0000-0000-0000-000000000000<span class="nt">&lt;/TransactionID&gt;</span>
    <span class="nt">&lt;RequestType&gt;</span>004<span class="nt">&lt;/RequestType&gt;</span>
    <span class="nt">&lt;RequestDateTime&gt;</span>yyyyMMddHHmmss<span class="nt">&lt;/RequestDateTime&gt;</span>
    <span class="nt">&lt;PrivateKey&gt;</span>YourPrivateKey<span class="nt">&lt;/PrivateKey&gt;</span>
    <span class="nt">&lt;AuthenticationTokenId&gt;</span>00000000-0000-0000-0000-000000000000<span class="nt">&lt;/AuthenticationTokenId&gt;</span>
    <span class="nt">&lt;requestMessage&gt;</span>                    
        <span class="nt">&lt;SoftwareVendor&gt;</span>YourSoftwareName 1.0<span class="nt">&lt;/SoftwareVendor&gt;</span>
        <span class="nt">&lt;TransIndustryType&gt;</span>EC<span class="nt">&lt;/TransIndustryType&gt;</span>
        <span class="nt">&lt;TransactionType&gt;</span>sale<span class="nt">&lt;/TransactionType&gt;</span>
        <span class="nt">&lt;AcctType&gt;</span>R<span class="nt">&lt;/AcctType&gt;</span>
        <span class="nt">&lt;HolderType&gt;</span>O<span class="nt">&lt;/HolderType&gt;</span>
        <span class="nt">&lt;Amount&gt;</span>1200<span class="nt">&lt;/Amount&gt;</span>
        <span class="nt">&lt;CurrencyCode&gt;</span>USD<span class="nt">&lt;/CurrencyCode&gt;</span>
        <span class="nt">&lt;PONum&gt;</span>PO-4321<span class="nt">&lt;/PONum&gt;</span>
        <span class="nt">&lt;TaxAmount&gt;</span>110<span class="nt">&lt;/TaxAmount&gt;</span>
        <span class="nt">&lt;TaxIndicator&gt;</span>P<span class="nt">&lt;/TaxIndicator&gt;</span>
    <span class="nt">&lt;/requestMessage&gt;</span>
<span class="nt">&lt;/requestHeader&gt;</span>
</code></pre></div><h3 id='level-iii-data'>Level III Data</h3>
<p>Cards that are eligible for Level III interchange rates are typically corporate purchasing or some travel cards. If a card is eligible for such, you can achieve a reduced interchange rate by providing the following fields in your gateway request message (in addition to those required for Level II and basic sale or &quot;Level I&quot; transactions).</p>

<blockquote>
<p>Sample sale transaction via <a href="/getting-started">TokenPay.js</a> with Level III line-item details:</p>
</blockquote>
<div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$bpRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BeyondPayRequest</span><span class="p">();</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RequestMessage</span><span class="p">();</span>

<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nc">RequestDateTime</span> <span class="o">=</span> <span class="nc">DateTime</span><span class="mf">.</span><span class="nc">Now</span><span class="mf">.</span><span class="nf">ToString</span><span class="p">(</span><span class="s2">"yyyyMMddHHmmss"</span><span class="p">);</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nc">RequestType</span> <span class="o">=</span> <span class="s2">"004"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nc">PrivateKey</span> <span class="o">=</span> <span class="s2">"YourPrivateKey"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nc">AuthenticationTokenId</span> <span class="o">=</span> <span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nc">TransactionID</span> <span class="o">=</span> <span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">MerchantCode</span> <span class="o">=</span> <span class="s2">"123456"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">MerchantAccountCode</span> <span class="o">=</span> <span class="s2">"789123"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">Amount</span> <span class="o">=</span> <span class="s2">"1200"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">TransIndustryType</span> <span class="o">=</span> <span class="s2">"EC"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">TransactionType</span> <span class="o">=</span> <span class="s2">"SALE"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">ExpirationDate</span> <span class="o">=</span> <span class="s2">"1224"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">AcctType</span> <span class="o">=</span> <span class="s2">"R"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">HolderType</span> <span class="o">=</span> <span class="s2">"O"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">IsoCurrencyCode</span> <span class="o">=</span> <span class="s2">"USD"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">SoftwareVendor</span> <span class="o">=</span> <span class="s2">"YourSoftwareName 1.0"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">InvoiceNum</span> <span class="o">=</span> <span class="s2">"INV-1234"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">PONum</span> <span class="o">=</span> <span class="s2">"PO-4321"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">CustomerAccountCode</span> <span class="o">=</span> <span class="s2">"CID-9876"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">TaxAmount</span> <span class="o">=</span> <span class="s2">"110"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">TaxIndicator</span> <span class="o">=</span> <span class="s2">"P"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">ItemCount</span> <span class="o">=</span> <span class="s2">"1"</span><span class="p">;</span>

<span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nv">$rqItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Item</span><span class="p">();</span>
<span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nv">$rqItem</span><span class="o">-&gt;</span><span class="nc">ItemCode</span> <span class="o">=</span> <span class="s2">"123456"</span><span class="p">;</span>
<span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nv">$rqItem</span><span class="o">-&gt;</span><span class="nc">ItemCommodityCode</span> <span class="o">=</span> <span class="s2">"5999"</span><span class="p">;</span>
<span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nv">$rqItem</span><span class="o">-&gt;</span><span class="nc">ItemDescription</span> <span class="o">=</span> <span class="s2">"Widget"</span><span class="p">;</span>
<span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nv">$rqItem</span><span class="o">-&gt;</span><span class="nc">ItemQuantity</span> <span class="o">=</span> <span class="s2">"1"</span><span class="p">;</span>
<span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nv">$rqItem</span><span class="o">-&gt;</span><span class="nc">ItemUnitCostAmt</span> <span class="o">=</span> <span class="s2">"1000"</span><span class="p">;</span>
<span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nv">$rqItem</span><span class="o">-&gt;</span><span class="nc">ItemUnitMeasure</span> <span class="o">=</span> <span class="s2">"EA"</span><span class="p">;</span>
<span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nv">$rqItem</span><span class="o">-&gt;</span><span class="nc">ItemTotalAmount</span> <span class="o">=</span> <span class="s2">"1110"</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">BridgeCommRequest</span> <span class="n">bcRequest</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">BridgeCommRequest</span><span class="p">();</span>
<span class="n">RequestMessage</span> <span class="n">rqMessage</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RequestMessage</span><span class="p">();</span>

<span class="n">bcRequest</span><span class="p">.</span><span class="n">RequestType</span> <span class="p">=</span> <span class="s">"004"</span><span class="p">;</span>
<span class="n">bcRequest</span><span class="p">.</span><span class="n">TransactionID</span> <span class="p">=</span> <span class="s">"00000000-0000-0000-0000-000000000000"</span><span class="p">;</span>
<span class="n">bcRequest</span><span class="p">.</span><span class="n">PrivateKey</span> <span class="p">=</span> <span class="s">"YourPrivateKey"</span><span class="p">;</span>
<span class="n">bcRequest</span><span class="p">.</span><span class="n">AuthenticationTokenId</span> <span class="p">=</span> <span class="s">"00000000-0000-0000-0000-000000000000"</span><span class="p">;</span>
<span class="n">bcRequest</span><span class="p">.</span><span class="n">RequestDateTime</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">Now</span><span class="p">.</span><span class="nf">ToString</span><span class="p">(</span><span class="s">"yyyyMMddHHmmss"</span><span class="p">);</span>

<span class="n">rqMessage</span><span class="p">.</span><span class="n">MerchantCode</span> <span class="p">=</span> <span class="s">"123456"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">MerchantAccountCode</span> <span class="p">=</span> <span class="s">"789123"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">TransactionType</span> <span class="p">=</span> <span class="s">"SALE"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">TransIndustryType</span> <span class="p">=</span> <span class="s">"EC"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">Amount</span> <span class="p">=</span> <span class="s">"1200"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">HolderType</span> <span class="p">=</span> <span class="s">"O"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">AcctType</span> <span class="p">=</span> <span class="s">"R"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">IsoCurrencyCode</span> <span class="p">=</span> <span class="s">"USD"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">SoftwareVendor</span> <span class="p">=</span> <span class="s">"YourSoftwareName 1.0"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">PONum</span> <span class="p">=</span> <span class="s">"PO-4321"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">InvoiceNum</span> <span class="p">=</span> <span class="s">"INV-1234"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">CustomerAccountCode</span> <span class="p">=</span> <span class="s">"CID-9876"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">TaxAmount</span> <span class="p">=</span> <span class="s">"110"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">TaxIndicator</span> <span class="p">=</span> <span class="s">"P"</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">BridgeCommRequest</span> <span class="n">bcRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BridgeCommRequest</span><span class="o">();</span>
<span class="nc">RequestMessage</span> <span class="n">rqMessage</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RequestMessage</span><span class="o">();</span>

<span class="n">bcRequest</span><span class="o">.</span><span class="na">setRequestType</span><span class="o">(</span><span class="s">"004"</span><span class="o">);</span>
<span class="n">bcRequest</span><span class="o">.</span><span class="na">setAuthenticationTokenId</span><span class="o">(</span><span class="s">"00000000-0000-0000-0000-000000000000"</span><span class="o">);</span>
<span class="n">bcRequest</span><span class="o">.</span><span class="na">setTransactionID</span><span class="o">(</span><span class="nc">DateTime</span><span class="o">.</span><span class="na">Now</span><span class="o">.</span><span class="na">ToString</span><span class="o">(</span><span class="s">"yyyyMMddHHmmss"</span><span class="o">));</span>
<span class="n">bcRequest</span><span class="o">.</span><span class="na">setRequestMessage</span><span class="o">(</span><span class="k">new</span> <span class="n">rqMessage</span><span class="o">);</span>

<span class="n">rqMessage</span><span class="o">.</span><span class="na">setMerchantCode</span><span class="o">(</span><span class="s">"123456"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setMerchantAccountCode</span><span class="o">(</span><span class="s">"789123"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="s">"1200"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setTransIndustryType</span><span class="o">(</span><span class="s">"EC"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setTransactionType</span><span class="o">(</span><span class="s">"SALE"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setHolderType</span><span class="o">(</span><span class="s">"O"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setExpirationDate</span><span class="o">(</span><span class="s">"1234"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setIsoCurrencyCode</span><span class="o">(</span><span class="s">"USD"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setAcctType</span><span class="o">(</span><span class="s">"R"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setSoftwareVendor</span><span class="o">(</span><span class="s">"Your Software Name 1.0"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setInvoiceNum</span><span class="o">(</span><span class="s">"INV-1234"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setPONum</span><span class="o">(</span><span class="s">"PO-4321"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setCustomerAccountCode</span><span class="o">(</span><span class="s">"CID-9876"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setTaxAmount</span><span class="o">(</span><span class="s">"110"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setTaxIndicator</span><span class="o">(</span><span class="s">"P"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setItemCount</span><span class="o">(</span><span class="s">"1"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setItem</span><span class="o">(</span><span class="k">new</span> <span class="n">rqItem</span><span class="o">);</span>

<span class="n">rqItem</span><span class="o">.</span><span class="na">setItemCode</span><span class="o">(</span><span class="s">"123456"</span><span class="o">);</span>
<span class="n">rqItem</span><span class="o">.</span><span class="na">setItemCommodityCode</span><span class="o">(</span><span class="s">"5999"</span><span class="o">);</span>
<span class="n">rqItem</span><span class="o">.</span><span class="na">setItemDescription</span><span class="o">(</span><span class="s">"Widget"</span><span class="o">);</span>
<span class="n">rqItem</span><span class="o">.</span><span class="na">setItemQuantity</span><span class="o">(</span><span class="s">"1"</span><span class="o">);</span>
<span class="n">rqItem</span><span class="o">.</span><span class="na">setItemUnitCostAmt</span><span class="o">(</span><span class="s">"1000"</span><span class="o">);</span>
<span class="n">rqItem</span><span class="o">.</span><span class="na">setItemUnitMeasure</span><span class="o">(</span><span class="s">"EA"</span><span class="o">);</span>
<span class="n">rqItem</span><span class="o">.</span><span class="na">setItemTotalAmount</span><span class="o">(</span><span class="s">"1110"</span><span class="o">);</span>
</code></pre></div>
<blockquote>
<p>Or, in the raw XML:</p>
</blockquote>
<div class="highlight"><pre class="highlight xml tab-xml"><code><span class="nt">&lt;requestHeader&gt;</span>
    <span class="nt">&lt;ClientIdentifier&gt;</span>SOAP<span class="nt">&lt;/ClientIdentifier&gt;</span>
    <span class="nt">&lt;TransactionID&gt;</span>00000000-0000-0000-0000-000000000000<span class="nt">&lt;/TransactionID&gt;</span>
    <span class="nt">&lt;RequestType&gt;</span>004<span class="nt">&lt;/RequestType&gt;</span>
    <span class="nt">&lt;RequestDateTime&gt;</span>yyyyMMddHHmmss<span class="nt">&lt;/RequestDateTime&gt;</span>
    <span class="nt">&lt;PrivateKey&gt;</span>YourPrivateKey<span class="nt">&lt;/PrivateKey&gt;</span>
    <span class="nt">&lt;AuthenticationTokenId&gt;</span>00000000-0000-0000-0000-000000000000<span class="nt">&lt;/AuthenticationTokenId&gt;</span>
    <span class="nt">&lt;requestMessage&gt;</span>                    
        <span class="nt">&lt;SoftwareVendor&gt;</span>YourSoftwareName 1.0<span class="nt">&lt;/SoftwareVendor&gt;</span>
        <span class="nt">&lt;TransIndustryType&gt;</span>EC<span class="nt">&lt;/TransIndustryType&gt;</span>
        <span class="nt">&lt;TransactionType&gt;</span>sale<span class="nt">&lt;/TransactionType&gt;</span>
        <span class="nt">&lt;AcctType&gt;</span>R<span class="nt">&lt;/AcctType&gt;</span>
        <span class="nt">&lt;HolderType&gt;</span>O<span class="nt">&lt;/HolderType&gt;</span>
        <span class="nt">&lt;Amount&gt;</span>1110<span class="nt">&lt;/Amount&gt;</span>
        <span class="nt">&lt;CurrencyCode&gt;</span>USD<span class="nt">&lt;/CurrencyCode&gt;</span>
        <span class="nt">&lt;InvoiceNum&gt;</span>INV-1234<span class="nt">&lt;/InvoiceNum&gt;</span>
        <span class="nt">&lt;PONum&gt;</span>PO-4321<span class="nt">&lt;/PONum&gt;</span>
        <span class="nt">&lt;CustomerAccountCode&gt;</span>CID-9876<span class="nt">&lt;/CustomerAccountCode&gt;</span>
        <span class="nt">&lt;TaxAmount&gt;</span>110<span class="nt">&lt;/TaxAmount&gt;</span>
        <span class="nt">&lt;TaxIndicator&gt;</span>P<span class="nt">&lt;/TaxIndicator&gt;</span>
        <span class="nt">&lt;ItemCount&gt;</span>1<span class="nt">&lt;/ItemCount&gt;</span>
        <span class="nt">&lt;Item&gt;</span>
          <span class="nt">&lt;ItemCode&gt;</span>123456<span class="nt">&lt;/ItemCode&gt;</span>
          <span class="nt">&lt;ItemCommodityCode&gt;</span>5999<span class="nt">&lt;/ItemCommodityCode&gt;</span>
          <span class="nt">&lt;ItemDescription&gt;</span>Widget<span class="nt">&lt;/ItemDescription&gt;</span>
          <span class="nt">&lt;ItemQuantity&gt;</span>1<span class="nt">&lt;/ItemQuantity&gt;</span>
          <span class="nt">&lt;ItemUnitCostAmt&gt;</span>1000<span class="nt">&lt;/ItemUnitCostAmt&gt;</span>
          <span class="nt">&lt;ItemUnitMeasure&gt;</span>EA<span class="nt">&lt;/ItemUnitMeasure&gt;</span>
          <span class="nt">&lt;ItemTotalAmount&gt;</span>1110<span class="nt">&lt;/ItemTotalAmount&gt;</span>
        <span class="nt">&lt;/Item&gt;</span>
    <span class="nt">&lt;/requestMessage&gt;</span>
<span class="nt">&lt;/requestHeader&gt;</span>
</code></pre></div>
<p>Note that Level III transactions require line-item details from the purchase. You should send one Item array for each line item on a given invoice; many integrators will dynamically map these required fields into their existing inventory, order management, or ERP systems. Alternatively, if you only sell one type of item, you may consider creating a static mapping of these fields, or &quot;hard-coding&quot; the values specific to your business.</p>

<ul>
<li><code>ItemCount</code> - the total number of line items being submitted in this request</li>
<li><code>Item</code> - an array representing each line item in the request, consisting of:</li>
<li><code>ItemCode</code> - a unique identifier assigned to this item in the merchant&#39;s inventory system (typically a SKU, SKID, or UPC) - 12 character maximum</li>
<li><code>ItemCommodityCode</code> - a standardized code that classifies the item, such as the <a href="https://www.unspsc.org/" target="_blank">UN Standard Products and Services Code (UNSPSC)</a>; many integrators and merchants use the Merchant Category Code in this field</li>
<li><code>ItemDescription</code> - A short textual description of the item, limited to 35 characters</li>
<li><code>ItemQuantity</code> - quantity of item units purchased as part of this transaction; supports up to 4 decimal places</li>
<li><code>ItemUnitCostAmt</code> - cost of a single unit of the item in cents (implied decimal)</li>
<li><code>ItemUnitMeasure</code> - unit of measure used to quantify the items purchased (e.g.: kg, lb, in, etc.); &quot;EA&quot; for &quot;each&quot; is most commonly used and recommended for single-item merchants</li>
<li><code>ItemTotalAmount</code> - total amount paid for the item (including tax and any discount)</li>
</ul>

<aside class="success">
In general, for most card brands and card issuers, the presence of a value in the appropriate Level III field is enough to qualify for the reduced interchange rate. The accuracy of these values is not validated by the card brands in most cases, but may impact the reporting received by the administrator of a given corporate purchasing card program.
</aside>
<h2 id='ach-and-echecks'>ACH and eChecks</h2><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$bpRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BridgeCommRequest</span><span class="p">();</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RequestMessage</span><span class="p">();</span>

<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nc">RequestDateTime</span> <span class="o">=</span> <span class="nc">DateTime</span><span class="mf">.</span><span class="nc">Now</span><span class="mf">.</span><span class="nf">ToString</span><span class="p">(</span><span class="s2">"yyyyMMddHHmmss"</span><span class="p">);</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nc">User</span> <span class="o">=</span> <span class="s2">"xxxxxx"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nc">Password</span> <span class="o">=</span> <span class="s2">"xxxxxx"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nc">RequestType</span> <span class="o">=</span> <span class="s2">"004"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nc">TransactionID</span> <span class="o">=</span> <span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">MerchantCode</span> <span class="o">=</span> <span class="s2">"123456"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">MerchantAccountCode</span> <span class="o">=</span> <span class="s2">"789123"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">Amount</span> <span class="o">=</span> <span class="s2">"1200"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">TransactionType</span> <span class="o">=</span> <span class="s2">"SALE"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">TransIndustryType</span> <span class="o">=</span> <span class="s2">"WEB"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">AcctType</span> <span class="o">=</span> <span class="s2">"C"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">SoftwareVendor</span> <span class="o">=</span> <span class="s2">"YourSoftwareName 1.0"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">RoutingNum</span> <span class="o">=</span> <span class="s2">"021000021"</span><span class="p">;</span>
<span class="nv">$bpRequest</span><span class="o">-&gt;</span><span class="nv">$requestMessage</span><span class="o">-&gt;</span><span class="nc">BankAccountNum</span> <span class="o">=</span> <span class="s2">"4099999992"</span><span class="p">;</span>
</code></pre></div>
<p>Processing an eCheck/ACH transaction is very similar to processing a credit card transaction. Instead of passing a token to the webservice, you can directly pass the bank&#39;s routing/transit number and the bank account number. These data elements are not considered sensitive to the same degree as card data, and are not covered by the scope of PCI DSS. You should still encrypt said data elements whether at rest or in motion, but they will not impact your scope of PCI compliance.</p>
<div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="n">BridgeCommRequest</span> <span class="n">bcRequest</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">BridgeCommRequest</span><span class="p">();</span>
<span class="n">RequestMessage</span> <span class="n">rqMessage</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RequestMessage</span><span class="p">();</span>

<span class="n">bcRequest</span><span class="p">.</span><span class="n">User</span> <span class="p">=</span> <span class="s">"xxxxxx"</span><span class="p">;</span>
<span class="n">bcRequest</span><span class="p">.</span><span class="n">Password</span> <span class="p">=</span> <span class="s">"xxxxxx"</span><span class="p">;</span>
<span class="n">bcRequest</span><span class="p">.</span><span class="n">RequestType</span> <span class="p">=</span> <span class="s">"004"</span><span class="p">;</span>
<span class="n">bcRequest</span><span class="p">.</span><span class="n">TransactionID</span> <span class="p">=</span> <span class="s">"00000000-0000-0000-0000-000000000000"</span><span class="p">;</span>
<span class="n">bcRequest</span><span class="p">.</span><span class="n">RequestDateTime</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">Now</span><span class="p">.</span><span class="nf">ToString</span><span class="p">(</span><span class="s">"yyyyMMddHHmmss"</span><span class="p">);</span>

<span class="n">rqMessage</span><span class="p">.</span><span class="n">MerchantCode</span> <span class="p">=</span> <span class="s">"123456"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">MerchantAccountCode</span> <span class="p">=</span> <span class="s">"789123"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">TransactionType</span> <span class="p">=</span> <span class="s">"SALE"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">Amount</span> <span class="p">=</span> <span class="s">"1200"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">TransIndustryType</span> <span class="p">=</span> <span class="s">"WEB"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">AcctType</span> <span class="p">=</span> <span class="s">"C"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">SoftwareVendor</span> <span class="p">=</span> <span class="s">"YourSoftwareName 1.0"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">RoutingNum</span> <span class="p">=</span> <span class="s">"021000021"</span><span class="p">;</span>
<span class="n">rqMessage</span><span class="p">.</span><span class="n">BankAccountNum</span> <span class="p">=</span> <span class="s">"4099999992"</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="nc">BridgeCommRequest</span> <span class="n">bcRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BridgeCommRequest</span><span class="o">();</span>
<span class="nc">RequestMessage</span> <span class="n">rqMessage</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RequestMessage</span><span class="o">();</span>

<span class="n">bcRequest</span><span class="o">.</span><span class="na">setUser</span><span class="o">(</span><span class="s">"xxxxxx"</span><span class="o">);</span>
<span class="n">bcRequest</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"xxxxxx"</span><span class="o">);</span>
<span class="n">bcRequest</span><span class="o">.</span><span class="na">setRequestType</span><span class="o">(</span><span class="s">"012"</span><span class="o">);</span>
<span class="n">bcRequest</span><span class="o">.</span><span class="na">setTransactionID</span><span class="o">(</span><span class="s">"00000000-0000-0000-0000-000000000000"</span><span class="o">);</span>
<span class="n">bcRequest</span><span class="o">.</span><span class="na">setRequestDateTime</span><span class="o">(</span><span class="nc">DateTime</span><span class="o">.</span><span class="na">Now</span><span class="o">.</span><span class="na">ToString</span><span class="o">(</span><span class="s">"yyyyMMddHHmmss"</span><span class="o">));</span>
<span class="n">bcRequest</span><span class="o">.</span><span class="na">setRequestMessage</span><span class="o">(</span><span class="k">new</span> <span class="n">rqMessage</span><span class="o">);</span>

<span class="n">rqMessage</span><span class="o">.</span><span class="na">setMerchantCode</span><span class="o">(</span><span class="s">"123456"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setMerchantAccountCode</span><span class="o">(</span><span class="s">"789123"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setTransactionType</span><span class="o">(</span><span class="s">"SALE"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setAcctType</span><span class="o">(</span><span class="s">"C"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setTransIndustryType</span><span class="o">(</span><span class="s">"WEB"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setSoftwareVendor</span><span class="o">(</span><span class="s">"YourSoftwareName 1.0"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setRoutingNumber</span><span class="o">(</span><span class="s">"021000021"</span><span class="o">);</span>
<span class="n">rqMessage</span><span class="o">.</span><span class="na">setBankAccountNumber</span><span class="o">(</span><span class="s">"4099999992"</span><span class="o">);</span>
</code></pre></div>
<blockquote>
<p>Or, in the raw XML:</p>
</blockquote>
<div class="highlight"><pre class="highlight xml tab-xml"><code><span class="nt">&lt;requestHeader&gt;</span>
    <span class="nt">&lt;ClientIdentifier&gt;</span>SOAP<span class="nt">&lt;/ClientIdentifier&gt;</span>
    <span class="nt">&lt;TransactionID&gt;</span>00000000-0000-0000-0000-000000000000<span class="nt">&lt;/TransactionID&gt;</span>
    <span class="nt">&lt;RequestType&gt;</span>004<span class="nt">&lt;/RequestType&gt;</span>
    <span class="nt">&lt;RequestDateTime&gt;</span>yyyyMMddHHmmss<span class="nt">&lt;/RequestDateTime&gt;</span>
    <span class="nt">&lt;User&gt;</span>xxxxxx<span class="nt">&lt;/User&gt;</span>
    <span class="nt">&lt;Password&gt;</span>xxxxxx<span class="nt">&lt;/Password&gt;</span>
    <span class="nt">&lt;requestMessage&gt;</span>
        <span class="nt">&lt;SoftwareVendor&gt;</span>YourSoftwareName 1.0<span class="nt">&lt;/SoftwareVendor&gt;</span>
        <span class="nt">&lt;TransactionType&gt;</span>sale<span class="nt">&lt;/TransactionType&gt;</span>
        <span class="nt">&lt;TransIndustryType&gt;</span>WEB<span class="nt">&lt;/TransIndustryType&gt;</span>
        <span class="nt">&lt;RoutingNum&gt;</span>021000021<span class="nt">&lt;/RoutingNum&gt;</span>
        <span class="nt">&lt;BankAccountNum&gt;</span>4099999992<span class="nt">&lt;/BankAccountNum&gt;</span>
        <span class="nt">&lt;AcctType&gt;</span>C<span class="nt">&lt;/AcctType&gt;</span>
        <span class="nt">&lt;Amount&gt;</span>1200<span class="nt">&lt;/Amount&gt;</span>
    <span class="nt">&lt;/requestMessage&gt;</span>
<span class="nt">&lt;/requestHeader&gt;</span>
</code></pre></div>
<p>In addition to passing the routing and account number, you also need to specify whether the bank account is a checking or savings account, as well as the &quot;Standard Entry Class&quot; code as defined by NACHA.</p>

<p><br><code>WEB</code> - Internet-Initiated Entry
<br><code>PPD</code> - Prearranged Payment and Deposit - for consumer checks (requires written authorization from customer)
<br><code>CCD</code> - Corporate Credit or Debit - for business checks (requires written authorization from customer)
<br><code>TEL</code> - Telephone-Initiated Entry</p>

<aside class="notice">
Different NACHA SEC codes require different types of authorizations from or disclosure to your customer:
<br><b>WEB</b> - <a href="https://www.nacha.org/system/files/resources/Authorization_0.pdf" target="_blank">best practices for authorization and sample language</a>
<br><b>CCD</b> and <b>PPD</b> - <a href="http://www.checktraining.com/docs/general/Programs/ACH%20Debit/ACH_Debit_auth_form.pdf" target="_blank">sample consumer authorization form</a>
<br><b>TEL</b> - <a href="http://www.checktraining.com/docs/general/Programs/Check%20By%20Phone/Checks-By-Phone_sample_script.pdf" target="_blank">sample script for IVR</a> or <a href="http://www.checktraining.com/docs/general/Programs/Check%20By%20Phone/Checks-By-Phone_written_auth.pdf" target="_blank">sample written authorization form</a>
</aside>
<h1 id='in-person-payments'>In-Person Payments</h1><h2 id='overview'>Overview</h2>
<p>If you are developing a payment application or point of sale (POS) system for use by only your business, then that application falls in your scope of PCI DSS compliance as a merchant. </p>

<p>If you are developing a POS to sell or license to other businesses, that application is in scope for PCI Payment Application Data Security Standard (PA-DSS) if it interacts with card data. </p>

<p>If that application is hosted/SaaS-based then you may also be in-scope PCI Service Provider (similar to a gateway provider).</p>

<p>The costs involved in validating PCI compliance for such software can be prohibitive for Indepdendent Software Vendors (ISVs). Increasingly, ISVs are also expected to offer support for EMV or chip cards: direct integration of which can also be very costly and time-consuming.</p>

<p>The solution to both of these challenges is a semi-integrated or &quot;out-of-scope&quot; architectural model, whereby a POS or application can integrate (or &quot;semi-integrate&quot;) to a pre-certified payment application and device. This removes the burden of complicated EMV/chip card certification and insulates the application from interacting with sensitive data.</p>

<p>Beyond PayGuardian is a cloud-based semi-integrated solution that makes it possible to easily support in-person card payments from any platform or environment.</p>
<h2 id='supported-devices'>Supported Devices</h2>
<p>Beyond&#39;s preferred card present devices are the Android-based &quot;A-series&quot; from PAX Technology:</p>

<ul>
<li><a href="https://www.paxtechnology.com/a920" target="_blank">PAX A920</a></li>
<li><a href="https://www.paxtechnology.com/a80" target="_blank">PAX A80</a></li>
</ul>

<p>Development devices are available to purchase by request. Please contact <a href="mailto:BeyondPayIntegrations@getbeyond.com">BeyondPayIntegrations@getbeyond.com</a>.</p>

<p>Beyond will provide development and production devices pre-configured with the necessary account information and settings. The only credential you will need to communicate with the device is its UUID or &quot;locationID&quot;, which will be provided by Beyond and can also be confirmed in the PayGuardian Cloud app on the the terminal device.</p>
<h2 id='getting-started-2'>Getting Started</h2>
<blockquote>
<p><b>Endpoint (Test and Production):</b></p>
</blockquote>
<div class="highlight"><pre class="highlight html tab-html"><code>https://pgc.bridgepaynetsecuretx.com/req/payment
</code></pre></div>
<p>Initiating a card present transaction is as simple as POSTing just a few lines of JSON to the web service, passing the following arguments:</p>

<blockquote>
<p>Credit Sale Request</p>

<p><code>POST</code></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="nl">"locationID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"91552FCB-01A7-4BA2-B00A-EA33FC660307"</span><span class="p">,</span><span class="w">
</span><span class="nl">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UAT"</span><span class="p">,</span><span class="w">
</span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"17.00"</span><span class="p">,</span><span class="w">
</span><span class="nl">"softwareVendor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My POS 1.0"</span><span class="p">,</span><span class="w">
</span><span class="nl">"tenderType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CREDIT"</span><span class="p">,</span><span class="w">
</span><span class="nl">"transType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SALE"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<ul>
<li><code>locationID</code> - the UUID from the PayGuardian Cloud app installed on the device</li>
<li><code>mode</code> - indicates what environment to use; options are: UAT for testing and development and PROD for production/live usage</li>
<li><code>amount</code> - the amount of the transaction
<code>softwareVendor</code> - the name and version of your POS or application
<code>tenderType</code> - the type of payment to expect; common values are: <code>UNKNOWN</code>, <code>CREDIT</code>, <code>DEBIT</code>, <code>CHECK</code>, <code>GIFT</code>
<code>transType</code> - the type of transaction to perform; common values are: <code>SALE</code>, <code>SALE_AUTH</code>, <code>REFUND</code>, <code>VOID</code>, <code>TOKENADD</code>, <code>CAPTURE</code></li>
</ul>

<blockquote>
<p>Credit Sale Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="nl">"requestID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2aaf2fe8663c561fe7edf5c663b4e7262dd47274bdba13f3daafb207"</span><span class="p">,</span><span class="w">
</span><span class="nl">"locationID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"91552FCB-01A7-4BA2-B00A-EA33FC660307"</span><span class="p">,</span><span class="w">
</span><span class="nl">"terminalID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3EADDF76-27E6-4883-A49C-0AA876E64734"</span><span class="p">,</span><span class="w">
</span><span class="nl">"approvedAmount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"17.00"</span><span class="p">,</span><span class="w">
</span><span class="nl">"authCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"830705"</span><span class="p">,</span><span class="w">
</span><span class="nl">"avsMessage"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
</span><span class="nl">"avsResponse"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
</span><span class="nl">"cardType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Visa"</span><span class="p">,</span><span class="w">
</span><span class="nl">"cashBackAmt"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
</span><span class="nl">"cvMessage"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
</span><span class="nl">"cvResponse"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
</span><span class="nl">"expirationDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0323"</span><span class="p">,</span><span class="w">
</span><span class="nl">"extData"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"lodgingItem"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nl">"receiptTagData"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"maskedCard"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4***********2645"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"chipCardAID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A0000000031010"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"invoice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345678"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"seq"</span><span class="p">:</span><span class="w"> </span><span class="s2">"23dbde68c492a6c2c6b5cbe726d40741"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"authCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"830705"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"entryMethod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Chip_Read"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"totalAmount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"17.00"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"pinVerified"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NO"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"signatureEncoded"</span><span class="p">:</span><span class="w"> </span><span class="s2">"iVBORw0KGgoAAAANSUhEUgAAAe8AAACWCAIAAAB4sZcnAAADOklEQVR42u..."</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="nl">"gatewayMessage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A01 - Approved"</span><span class="p">,</span><span class="w">
</span><span class="nl">"gatewayResult"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
</span><span class="nl">"internalMessage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Approved: 830705 (approval code)"</span><span class="p">,</span><span class="w">
</span><span class="nl">"isCommercialCard"</span><span class="p">:</span><span class="w"> </span><span class="s2">"False"</span><span class="p">,</span><span class="w">
</span><span class="nl">"isoCountryCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"840"</span><span class="p">,</span><span class="w">
</span><span class="nl">"isoCurrencyCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
</span><span class="nl">"isoRequestDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-06-28 14:25:04.963"</span><span class="p">,</span><span class="w">
</span><span class="nl">"isoTransactionDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-06-28 14:25:04.963"</span><span class="p">,</span><span class="w">
</span><span class="nl">"maskedAccountNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4***********2645"</span><span class="p">,</span><span class="w">
</span><span class="nl">"merchantCategoryCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
</span><span class="nl">"networkMerchantId"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
</span><span class="nl">"networkReferenceNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
</span><span class="nl">"networkTerminalId"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
</span><span class="nl">"pnRefNum"</span><span class="p">:</span><span class="w"> </span><span class="s2">"253271004"</span><span class="p">,</span><span class="w">
</span><span class="nl">"remainingAmount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00"</span><span class="p">,</span><span class="w">
</span><span class="nl">"requestedAmount"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
</span><span class="nl">"responseTypeDescription"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sale"</span><span class="p">,</span><span class="w">
</span><span class="nl">"resultCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
</span><span class="nl">"resultTxt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Successful Request"</span><span class="p">,</span><span class="w">
</span><span class="nl">"streetMatchMessage"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
</span><span class="nl">"submittedAmount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"17.00"</span><span class="p">,</span><span class="w">
</span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20180628"</span><span class="p">,</span><span class="w">
</span><span class="nl">"tipAmount"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
</span><span class="nl">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11110000000400142645"</span><span class="p">,</span><span class="w">
</span><span class="nl">"transactionCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"23dbde68c492a6c2c6b5cbe726d40741"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>If the card is an EMV/chip card, then the user will be presented with an option to select whichever Applications reside on the chip (that is, they can select an Application ID associated with either Credit or Debit, depending on their card) regardless of what tender type is sent in the request. If the <code>UNKNOWN</code> tender type is used, the cardholder will similarly be prompted to select either the credit or debit application on the chip.</p>

<p>If the card is magnetic stripe only and capable of being processed as either a debit or a credit transaction, then it will be processed as whatever tender type is sent in the request. If <code>UNKNOWN</code> is selected, the cardholder will likewise be prompted to make the selection.</p>

<p>Transaction types are defined as follows:</p>

<ul>
<li><code>SALE</code> - authorizes a card and captures it, placing it in the batch for settlement</li>
<li><code>SALE_AUTH</code> - authorizes a card but does not capture it, holding the cardholder&#39;s funds until the capture transaction is performed (or until 7 days at which time the authorization is voided)</li>
<li><code>REFUND</code> - this is the preferred transaction for both refunding and voiding; if the original transaction is still in an unsettled batch, the gateway will perform a void/reversal transaction; if the original transaction has already settled, then the gateway will perform a refund to the original card. See below notice.</li>
<li><code>TOKENADD</code> - this transaction only tokenizes a given card number and does not perform any financial adjustments to the account</li>
<li><code>CAPTURE</code> - used to capture a previous <code>SALE_AUTH</code> transaction and add it to the batch for settlement</li>
</ul>

<aside class="notice">
Additional data elements are presented in the following sections that cover industry-specific use cases and provide more detailed workflows.
</aside>
<h2 id='basic-sale'>Basic Sale</h2><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="nl">"locationID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"91552FCB-01A7-4BA2-B00A-EA33FC660307"</span><span class="p">,</span><span class="w">
</span><span class="nl">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UAT"</span><span class="p">,</span><span class="w">
</span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#####.##"</span><span class="p">,</span><span class="w">
</span><span class="nl">"softwareVendor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My POS 1.0"</span><span class="p">,</span><span class="w">
</span><span class="nl">"tenderType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CREDIT"</span><span class="p">,</span><span class="w">
</span><span class="nl">"transType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SALE"</span><span class="p">,</span><span class="w">
</span><span class="nl">"invNum"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invoice number"</span><span class="p">,</span><span class="w">
</span><span class="nl">"pnRefNum"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Reference number from a previous transaction"</span><span class="p">,</span><span class="w">
</span><span class="nl">"poNum"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Purchase order number"</span><span class="p">,</span><span class="w">
</span><span class="nl">"taxAmt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#####.##"</span><span class="p">,</span><span class="w">
</span><span class="nl">"allowPartialApproval"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true|false"</span><span class="p">,</span><span class="w">
</span><span class="nl">"clerkID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Employee/Clerk ID"</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>You may also want to send these additional fields on some transactions:</p>

<ul>
<li><code>invNum</code> - an invoice number you would like to associate with the transaction (may be up to 24 alphanumeric characters and hyphens)</li>
<li><code>pnRefNum</code> - the reference number from a prior transaction response, primarily used to perform refunds, voids, or adjustments</li>
<li><code>poNum</code> - a Purchase Order number associated with the transaction; required to receive a lower interchange rate on eligible B2B cards (may be up to 24 alphanumeric characters and hyphens)</li>
<li><code>taxAmt</code> - the amount of the tax on the transaction; required to receive a lower interchange rate on eligible B2B cards (may be up to 24 alphanumeric characters and hyphens)</li>
<li><code>allowPartialApproval</code> - whether or not to allow partial approvals; see below notice</li>
<li><code>clerkID</code> - an employee or clerk identifier for reporting purposes</li>
</ul>

<aside class="notice">
Partial authorization support is required for some merchant types and strongly encouraged for all others in order to reduce declines on prepaid open-loop (branded) cards when there are insufficient funds to cover the total amount of the transaction. See the <a href="https://usa.visa.com/dam/VCOM/global/support-legal/documents/visa-partial-authorization-service.pdf" target="_blank">Visa Partial Authorization Service Guide</a> for more details.
</aside>
<h2 id='tips-amp-gratuities'>Tips &amp; Gratuities</h2>
<p><code>tenderType</code>=<code>CREDIT</code> and <code>transType</code>=<code>ADJUSTMENT</code> will adjust a previous <code>SALE</code> or <code>SALE_AUTH</code> adding a tip amount based on a <code>pnRefNum</code> (previous transaction reference number). This action can only be performed on unsettled transactions in an open batch. </p>

<blockquote>
<p><code>CREDIT</code> + <code>ADJUSTMENT</code> request:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="nl">"locationID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"C832D913-982C-4256-9895-2DD13BDA5947"</span><span class="p">,</span><span class="w">
</span><span class="nl">"pnRefNum"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Reference number from a previous transaction"</span><span class="p">,</span><span class="w">
</span><span class="nl">"mode"</span><span class="p">:</span><span class="s2">"UAT"</span><span class="p">,</span><span class="w">
</span><span class="nl">"tipAmt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5.00"</span><span class="p">,</span><span class="w">
</span><span class="nl">"tenderType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CREDIT"</span><span class="p">,</span><span class="w">
</span><span class="nl">"transType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ADJUSTMENT"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p><code>CREDIT</code> + <code>ADJUSTMENT</code> response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="nl">"requestID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"388c37acbd88d7f00fce90ffee8b83c156efedb57828c1e8439e6284"</span><span class="p">,</span><span class="w">
</span><span class="nl">"locationID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"C832D913-982C-4256-9895-2DD13BDA5947"</span><span class="p">,</span><span class="w">
</span><span class="nl">"terminalID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9102C064-F990-41AB-BAD4-C98F33E4C684"</span><span class="p">,</span><span class="w">
</span><span class="nl">"approvedAmount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20.00"</span><span class="p">,</span><span class="w">
</span><span class="nl">"authCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"802431"</span><span class="p">,</span><span class="w">
</span><span class="nl">"avsMessage"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
</span><span class="nl">"avsResponse"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
</span><span class="nl">"cardType"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
</span><span class="nl">"cashBackAmt"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
</span><span class="nl">"cvMessage"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
</span><span class="nl">"cvResponse"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
</span><span class="nl">"expirationDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
</span><span class="nl">"extData"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"lodgingItem"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nl">"receiptTagData"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
            </span><span class="p">}</span><span class="w">   </span><span class="p">,</span><span class="w"> </span><span class="nl">"gatewayMessage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A12 - Tip Adjustment Posted"</span><span class="p">,</span><span class="w">
</span><span class="nl">"gatewayResult"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
</span><span class="nl">"internalMessage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tip Adjustment Posted"</span><span class="p">,</span><span class="w">
</span><span class="nl">"isCommercialCard"</span><span class="p">:</span><span class="w"> </span><span class="s2">"False"</span><span class="p">,</span><span class="w">
</span><span class="nl">"isoCountryCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
</span><span class="nl">"isoCurrencyCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
</span><span class="nl">"isoRequestDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
</span><span class="nl">"isoTransactionDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
</span><span class="nl">"maskedAccountNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
</span><span class="nl">"merchantCategoryCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
</span><span class="nl">"networkMerchantId"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
</span><span class="nl">"networkReferenceNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
</span><span class="nl">"networkTerminalId"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
</span><span class="nl">"pnRefNum"</span><span class="p">:</span><span class="w"> </span><span class="s2">"253276004"</span><span class="p">,</span><span class="w">
</span><span class="nl">"remainingAmount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00"</span><span class="p">,</span><span class="w">
</span><span class="nl">"requestedAmount"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
</span><span class="nl">"resultCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
</span><span class="nl">"resultTxt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Successful Request"</span><span class="p">,</span><span class="w">
</span><span class="nl">"streetMatchMessage"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
</span><span class="nl">"submittedAmount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"15.00"</span><span class="p">,</span><span class="w">
</span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
</span><span class="nl">"tipAmount"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
</span><span class="nl">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
</span><span class="nl">"transactionCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>If successful, the response will contain the new total approved amount: (initial amount) + (tip amount).</p>
<h2 id='lodging-amp-hotels'>Lodging &amp; Hotels</h2><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="nl">"locationID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"your-locationID"</span><span class="p">,</span><span class="w">
</span><span class="nl">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UAT"</span><span class="p">,</span><span class="w">
</span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.00"</span><span class="p">,</span><span class="w">
</span><span class="nl">"softwareVendor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"your_POS_name"</span><span class="p">,</span><span class="w">
</span><span class="nl">"tenderType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CREDIT"</span><span class="p">,</span><span class="w">
</span><span class="nl">"transType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SALE"</span><span class="p">,</span><span class="w">
</span><span class="nl">"extData"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="nl">"checkInDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Actual or anticipated check in date."</span><span class="p">,</span><span class="w">
</span><span class="nl">"checkOutDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Actual or anticipated check out date."</span><span class="p">,</span><span class="w">
</span><span class="nl">"departureAdjAmount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Additional amount charged after cardholder left the hotel."</span><span class="p">,</span><span class="w">
</span><span class="nl">"folioNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hotel folio number"</span><span class="p">,</span><span class="w">
</span><span class="nl">"lodgingChargeType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"H (Hotel)|R (Restaurant)|G (Gift Shop)|S (Health Spa)|B (Beauty Shop)|F (Convention Fee)|T (Tennis)|O (Golf)"</span><span class="p">,</span><span class="w">
</span><span class="nl">"lodgingItem"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
</span><span class="nl">"lodgingItemAmount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Amount (in cents) for lodging extra charge item. Implied (no) decimal."</span><span class="p">,</span><span class="w">
</span><span class="nl">"lodgingItemCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
</span><span class="nl">"lodgingItemType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"G (Gift Shop)|L (Laundry)|B (Mini Bar)|R (Restaurant)|T (Telephone)"</span><span class="w">
</span><span class="p">}],</span><span class="w">
</span><span class="nl">"lodgingItemCount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Indicates number of lodging industry items purchased as part of this transaction."</span><span class="p">,</span><span class="w">
</span><span class="nl">"roomNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hotel room number"</span><span class="p">,</span><span class="w">
</span><span class="nl">"roomRateAmt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Amount (in cents) of the daily room rate."</span><span class="p">,</span><span class="w">
</span><span class="nl">"roomTaxAmt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Amount (in cents) of the tax applied to daily room rate."</span><span class="p">,</span><span class="w">
</span><span class="nl">"specialProgramType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AD (Advance deposit)|AR (Assured reservation)|DC (Delayed charge)|ES (Express service)|NC (Normal charge)|NS (No show charge)"</span><span class="p">,</span><span class="w">
</span><span class="nl">"stayDuration"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Anticipated, actual or incremental stay in days."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>The extended data fields required for lodging transactions can easily be passed through the semi-integrated device to Beyond Pay Gateway.</p>
<h2 id='pharmacy-amp-healthcare'>Pharmacy &amp; Healthcare</h2><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="nl">"locationID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"your-locationID"</span><span class="p">,</span><span class="w">
</span><span class="nl">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UAT"</span><span class="p">,</span><span class="w">
</span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.00"</span><span class="p">,</span><span class="w">
</span><span class="nl">"softwareVendor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"your_POS_name"</span><span class="p">,</span><span class="w">
</span><span class="nl">"tenderType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CREDIT"</span><span class="p">,</span><span class="w">
</span><span class="nl">"transType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SALE"</span><span class="p">,</span><span class="w">
</span><span class="nl">"isQualifiedIIAS"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Indicates whether purchase items are verified against IIAS. Can be t|f"</span><span class="p">,</span><span class="w">
</span><span class="nl">"healthCareAmt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Amount (in cents) of the total Healthcare Amount."</span><span class="p">,</span><span class="w">
</span><span class="nl">"clinicAmt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Amount (in cents) of the portion of the Healthcare Amount spent on hospitalization."</span><span class="p">,</span><span class="w">
</span><span class="nl">"dentalAmt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Amount (in cents) of the portion of the Healthcare Amount spent on dental related medical services."</span><span class="p">,</span><span class="w">
</span><span class="nl">"prescriptionAmt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Amount (in cents) of the portion of the Healthcare Amount spent on prescription drugs or products."</span><span class="p">,</span><span class="w">
</span><span class="nl">"transitAmt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Amount (in cents) of the portion of the Healthcare Amount spent on transportaion."</span><span class="p">,</span><span class="w">
</span><span class="nl">"visionAmt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Amount (in cents) of the portion of the Healthcare Amount spent on vision related medical services."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Payment systems and Points of Sale for pharmacy merchants are required to pass some of these additional data fields in conjunction with their implementation of &quot;auto-substantiation&quot; using an &quot;inventory information approval system&quot; (IIAS). See <a href="https://sig-is.org/">sig-is.org</a> for more information.</p>
<h1 id='transaction-reporting'>Transaction Reporting</h1>
<blockquote>
<p><a href='https://www.dropbox.com/s/h7ih2g47w8b8v39/BridgePay%20Public%20Reporting%20API%20v1%200%201.pdf?dl=0'>Reporting Developer Guide</a></p>

<p><a href='https://www.dropbox.com/s/epf9jhj5swi5q68/BridgePay_Reporting%20_API.zip?dl=0'>Reporting API (Visual Studio)</a></p>

<p>Service: <a href='https://www.bridgepaynetsecuretest.com/Bridgepay.Reporting.API/ReportingAPI.svc'>https://www.bridgepaynetsecuretest.com/Bridgepay.Reporting.API/ReportingAPI.svc</a></p>

<p>C# sample implementation:</p>
</blockquote>
<div class="highlight"><pre class="highlight csharp"><code><span class="k">class</span> <span class="nc">Program</span>
<span class="p">{</span>
  <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">ReportingAPI</span><span class="p">.</span><span class="n">Credentials</span> <span class="n">credentials</span> <span class="p">=</span> <span class="k">new</span> <span class="n">ReportingAPI</span><span class="p">.</span><span class="nf">Credentials</span><span class="p">();</span>

    <span class="n">credentials</span><span class="p">.</span><span class="n">UserName</span> <span class="p">=</span> <span class="s">"username"</span><span class="p">;</span>
    <span class="n">credentials</span><span class="p">.</span><span class="n">Password</span> <span class="p">=</span> <span class="s">"password"</span><span class="p">;</span>

    <span class="n">ReportingAPI</span><span class="p">.</span><span class="n">ReportingAPIV1Client</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="n">ReportingAPI</span><span class="p">.</span><span class="nf">ReportingAPIV1Client</span><span class="p">();</span>
    <span class="n">ReportingAPI</span><span class="p">.</span><span class="n">TransactionRowFilter</span> <span class="n">filter</span> <span class="p">=</span> <span class="k">new</span> <span class="n">ReportingAPI</span><span class="p">.</span><span class="nf">TransactionRowFilter</span><span class="p">();</span>

    <span class="n">filter</span><span class="p">.</span><span class="n">MerchantID</span> <span class="p">=</span> <span class="m">2000</span><span class="p">;</span>
    <span class="n">filter</span><span class="p">.</span><span class="n">MerchantAccountID</span> <span class="p">=</span> <span class="m">2001</span><span class="p">;</span>

    <span class="n">filter</span><span class="p">.</span><span class="n">DateRangeFrom</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">Now</span><span class="p">.</span><span class="nf">AddMonths</span><span class="p">(-</span><span class="m">2</span><span class="p">);</span>
    <span class="n">filter</span><span class="p">.</span><span class="n">DateRangeTo</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">Now</span><span class="p">;</span>

    <span class="n">filter</span><span class="p">.</span><span class="n">Skip</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
    <span class="n">filter</span><span class="p">.</span><span class="n">Take</span> <span class="p">=</span> <span class="m">20</span><span class="p">;</span>

    <span class="n">ReportingAPI</span><span class="p">.</span><span class="n">TransactionSet</span> <span class="n">ts</span> <span class="p">=</span> <span class="k">new</span> <span class="n">ReportingAPI</span><span class="p">.</span><span class="nf">TransactionSet</span><span class="p">();</span>

    <span class="n">Ts</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">PublicGetTransactionsByFilter</span><span class="p">(</span><span class="n">credentials</span><span class="p">,</span> <span class="n">filter</span><span class="p">);</span>

    <span class="k">foreach</span> <span class="p">(</span><span class="n">ReportingAPI</span><span class="p">.</span><span class="n">TransactionRow</span> <span class="n">tr</span> <span class="k">in</span> <span class="n">ts</span><span class="p">.</span><span class="n">TransactionList</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Transaction ID: "</span> <span class="p">+</span> <span class="n">tr</span><span class="p">.</span><span class="n">TransactionId</span><span class="p">);</span> 
      <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Sale Date / Time: "</span> <span class="p">+</span> <span class="n">tr</span><span class="p">.</span><span class="n">SaleDateTime</span><span class="p">);</span> 
      <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Merchant Name: "</span> <span class="p">+</span> <span class="n">tr</span><span class="p">.</span><span class="n">MerchantName</span><span class="p">);</span> 
      <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Card Holder Name: "</span> <span class="p">+</span> <span class="n">tr</span><span class="p">.</span><span class="n">FirstName</span> <span class="p">+</span> <span class="s">" "</span> <span class="p">+</span> <span class="n">tr</span><span class="p">.</span><span class="n">LastName</span><span class="p">);</span> 
      <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Invoice Number: "</span> <span class="p">+</span> <span class="n">tr</span><span class="p">.</span><span class="n">InvoiceNumber</span><span class="p">);</span> 
      <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Auth Code: "</span> <span class="p">+</span> <span class="n">tr</span><span class="p">.</span><span class="n">AuthCode</span><span class="p">);</span> 
      <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Requested Amount: "</span> <span class="p">+</span> <span class="n">tr</span><span class="p">.</span><span class="n">RequestedAmount</span><span class="p">);</span> 
      <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Authorized Amount: "</span> <span class="p">+</span> <span class="n">tr</span><span class="p">.</span><span class="n">AuthorizedAmount</span><span class="p">);</span> 
      <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Remaining Amount: "</span> <span class="p">+</span> <span class="n">tr</span><span class="p">.</span><span class="n">RemainingAmount</span><span class="p">);</span> 
      <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Settle Anmount: "</span> <span class="p">+</span> <span class="n">tr</span><span class="p">.</span><span class="n">SettleAmnount</span><span class="p">);</span> 
      <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"--------------------------------------------"</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>The Beyond Pay Reporting API provides integrators with the ability to request transaction data via a SOAP request made to the service.  The user must provide data they wish to use as a filter in the parameter to the SOAP method and will receive a response containing the data they requested.</p>

<p>The Reporting API provides three data contracts.  One for the incoming request and two for the response to the request.  When making a request, the consumer must provide a TransctionRowFilter object. When receiving the response, the consumer will get a TransactionSet object which will contain a collection of TransactionRow objects.  The data contracts are described in more detail below.</p>
<h3 id='transactionrowfilter'>TransactionRowFilter</h3>
<table><thead>
<tr>
<th>Parameter Name</th>
<th>Data Type</th>
<th>Validations</th>
<th>Comparison Type</th>
</tr>
</thead><tbody>
<tr>
<td>AmountRangeFrom</td>
<td>Implied Integer</td>
<td>Optional</td>
<td>GTE</td>
</tr>
<tr>
<td>AmountRangeTo</td>
<td>Implied Integer</td>
<td>Optional</td>
<td></td>
</tr>
<tr>
<td>AuthorizationCode</td>
<td>String</td>
<td>Optional, Exact Match</td>
<td>EQUIV</td>
</tr>
<tr>
<td>BatchID</td>
<td>Integer</td>
<td>Optional</td>
<td>EQUIV</td>
</tr>
<tr>
<td>CardBrand</td>
<td>String</td>
<td>Optional, Must match known card brands</td>
<td>EQUIV</td>
</tr>
<tr>
<td>CardholderFirstName</td>
<td>String</td>
<td>Optional, Exact Match</td>
<td>EQUIV</td>
</tr>
<tr>
<td>CardholderLastName</td>
<td>String</td>
<td>Optional, Partial Match</td>
<td>CONTAINS</td>
</tr>
<tr>
<td>ClerkId</td>
<td>String</td>
<td>Optional, Exact Match</td>
<td>EQUIV</td>
</tr>
<tr>
<td>CustomerNumber</td>
<td>String</td>
<td>Optional, Exact Match</td>
<td>EQUIV</td>
</tr>
<tr>
<td>DateRangeFrom</td>
<td>DateTime</td>
<td>Optional</td>
<td>GTE</td>
</tr>
<tr>
<td>DateRangeTo</td>
<td>DateTime</td>
<td>Optional</td>
<td>LTE</td>
</tr>
<tr>
<td>EndPartialAccountNumber</td>
<td>String</td>
<td>Optional</td>
<td>EQUIV</td>
</tr>
<tr>
<td>ExcludeTransResults*</td>
<td>Boolean</td>
<td>Optional (1 or 0)</td>
<td>N/A</td>
</tr>
<tr>
<td>ExcludeVoid</td>
<td>Boolean</td>
<td>Optional (1 or 0)</td>
<td>N/A</td>
</tr>
<tr>
<td>ID</td>
<td>Integer</td>
<td>Optional, Exact Match</td>
<td>EQUIV</td>
</tr>
<tr>
<td>InvoiceNumber</td>
<td>String</td>
<td>Optional, Exact Match</td>
<td>EQUIV</td>
</tr>
<tr>
<td>MerchantAccountId</td>
<td>Integer</td>
<td>Optional</td>
<td>EQUIV</td>
</tr>
<tr>
<td>MerchantId</td>
<td>Integer</td>
<td>Optional</td>
<td>EQUIV</td>
</tr>
<tr>
<td>PaymentMethodID</td>
<td>String</td>
<td>Optional, Exact Match</td>
<td>EQUIV</td>
</tr>
<tr>
<td>PurchaseOrderNumber</td>
<td>String</td>
<td>Optional, Exact Match</td>
<td>EQUIV</td>
</tr>
<tr>
<td>ResellerID</td>
<td>Integer</td>
<td>Optional</td>
<td>EQUIV</td>
</tr>
<tr>
<td>ResponseCode</td>
<td>String</td>
<td>Optional, Partial Match</td>
<td>CONTAINS</td>
</tr>
<tr>
<td>SettlementStatus</td>
<td>String</td>
<td>Optional, Exact Match</td>
<td>EQUIV</td>
</tr>
<tr>
<td>Skip</td>
<td>Integer</td>
<td>Required</td>
<td>N/A</td>
</tr>
<tr>
<td>Take</td>
<td>Integer</td>
<td>Required</td>
<td>N/A</td>
</tr>
<tr>
<td>TransactionSourceIP</td>
<td>String</td>
<td>Optional, Exact Match</td>
<td>EQUIV</td>
</tr>
<tr>
<td>TransactionStatus</td>
<td>String</td>
<td>Optional, Exact Match</td>
<td>EQUIV</td>
</tr>
<tr>
<td>TransResults*</td>
<td>String</td>
<td>Optional, Multi-Match (comma separated list)</td>
<td>INLIST</td>
</tr>
</tbody></table>

<p>The TransResults field works by mapping the BridgeComm 5-digit response code back to the gateway response code (the ResponseCode field in this contract).  In some cases, more than one mapping may exist for a given code.  It is recommended that you use the ResponseCode field for more granular filtering. The ExcludeTransResults field can modify the behavior of the TransResults field by establishing a “not in” condition.</p>
<h3 id='transactionset'>TransactionSet</h3>
<table><thead>
<tr>
<th>Parameter Name</th>
<th>Data Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>RecordCount</td>
<td>Integer</td>
<td>The total number of records that match the filter, excluding the Take &amp; Skip fields.</td>
</tr>
<tr>
<td>TransactionList</td>
<td>List</td>
<td>A collection of TransactionRow objects.</td>
</tr>
</tbody></table>
<h3 id='transactionrow'>TransactionRow</h3>
<table><thead>
<tr>
<th>Parameter Name</th>
<th>Data Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Account Type</td>
<td>String</td>
<td>1 character identifier that determines the type of account. Valid values are R (Branded Credit Card), E (Branded debit checking card), V (Branded debit savings card), D (Unbranded debit checking card), I (Unbranded debit savings card), S (Bank savings account), C (Bank checking account), F (EBT food stamp), H (EBT cash benefit), G (Gift card), L (Fleet), A (Cash), K (Check)</td>
</tr>
<tr>
<td>AuthCode</td>
<td>String</td>
<td>The Authorization Code provided by the card issuer</td>
</tr>
<tr>
<td>AuthorizedAmount</td>
<td>Implied Integer</td>
<td>The amount that was actually authorized. This may be different from the requested amount (e.g., partial approvals)</td>
</tr>
<tr>
<td>BatchDateTime</td>
<td>DateTime</td>
<td>The close date of the batch that contains the transaction</td>
</tr>
<tr>
<td>BatchId</td>
<td>Integer</td>
<td>The gateway Batch ID that contains this transaction</td>
</tr>
<tr>
<td>CardBrand</td>
<td>String</td>
<td>Description of the card brand used. Valid values: AMEX, DISCOVER, MASTERCARD, DINERS, and VISA</td>
</tr>
<tr>
<td>ClerkId</td>
<td>String</td>
<td>The client-supplied Clerk ID (or the Username used to process the transaction if no Clerk ID was provided)</td>
</tr>
<tr>
<td>ClerkName</td>
<td>String</td>
<td>The client-supplied name of the Clerk who processed the transaction</td>
</tr>
<tr>
<td>CustomerAddress</td>
<td>String</td>
<td>The client-provided Street Address for the transaction</td>
</tr>
<tr>
<td>CustomerEmail</td>
<td>String</td>
<td>The client-provided Email Address for the transaction</td>
</tr>
<tr>
<td>CustomerNumber</td>
<td>String</td>
<td>The client-provided Customer ID</td>
</tr>
<tr>
<td>CustomerZip</td>
<td>String</td>
<td>The client-provided Zip Code</td>
</tr>
<tr>
<td>EntryModeId</td>
<td>String</td>
<td>Identifies how the transaction was processed. Valid valus are T1 (Track 1 Data), T2 (Track 2 Data), T3 (Track 1 and 2 Data), KD (Keyed)</td>
</tr>
<tr>
<td>ExpirationDate</td>
<td>String</td>
<td>Month and Year of the card expiry date in MMYY format</td>
</tr>
<tr>
<td>FirstName</td>
<td>String</td>
<td>First name of the account holder</td>
</tr>
<tr>
<td>HolderType</td>
<td>String</td>
<td>A one-character code identifying if the payment method was a personal account (P) or a business/corporate account (O)</td>
</tr>
<tr>
<td>InvoiceNumber</td>
<td>String</td>
<td>The client-provided Invoice Number</td>
</tr>
<tr>
<td>LastFour</td>
<td>String</td>
<td>The last four digits of the Primary Account Number (card number)</td>
</tr>
<tr>
<td>LastName</td>
<td>String</td>
<td>The last name of the account holder</td>
</tr>
<tr>
<td>MaskedAccount</td>
<td>String</td>
<td>A masked version of the account number used to process the transaction</td>
</tr>
<tr>
<td>Memo</td>
<td>String</td>
<td>The client-provided &quot;PaymentType&quot; value</td>
</tr>
<tr>
<td>MerchantAccountId</td>
<td>Integer</td>
<td>The &quot;MerchantAccountCode&quot; for the transaction</td>
</tr>
<tr>
<td>MerchantAccount</td>
<td>Integer</td>
<td>The &quot;MerchantAccount&quot; for the transaction</td>
</tr>
<tr>
<td>PaymentMethodId</td>
<td>String</td>
<td>Two letter code that identifies the payment method transaction type. Valid values: AC (Amex), bp (Bank Checking), BD (Bank Card Debit), BS (Bank Savings), DC (Discover Credit), DD (Discover Debit), EC (EBT Cash Benefit), EF (Food Stamps), FL (Fleet One), GF (Fuelman Fleet Wide), GG (General Gift), MC (Master Card Credit), MD (Master Card Debit), MF (Master Card Fleet), MP (Master Card Prepaid), NC (Diner’s Club), VC (Visa Credit), VD (Visa Debit), VF (Voyager), VP (Visa Prepaid), VS (Visa Fleet), WX (Wright Express)</td>
</tr>
<tr>
<td>ProcessorResponse</td>
<td>String</td>
<td>Description of the response provided by the account issuer</td>
</tr>
<tr>
<td>PurchaseOrderNumber</td>
<td>String</td>
<td>The client-provided Purchase Order Number</td>
</tr>
<tr>
<td>RemainingAmount</td>
<td>Implied Integer</td>
<td>The amount of the authorization that is remaining after partial refunds or voids have been applied</td>
</tr>
<tr>
<td>RequestedAmount</td>
<td>Implied Integer</td>
<td>The amount that was requested to be authorized when the transaction was processed</td>
</tr>
<tr>
<td>ResellerId</td>
<td>Integer</td>
<td>The gateway reseller ID for the transaction</td>
</tr>
<tr>
<td>ResponseCode</td>
<td>String</td>
<td>The 3-character <a href="#gateway-message-codes">Gateway Message code</a></td>
</tr>
<tr>
<td>SaleDateTime</td>
<td>DateTime</td>
<td>The date and time the transaction was processed</td>
</tr>
<tr>
<td>SettleAmount</td>
<td>Implied Integer</td>
<td>The amount of the transaction that was actually settled. This may be different than the requested or authorized amounts.</td>
</tr>
<tr>
<td>SettlementStatus</td>
<td>String</td>
<td>Identifies whether the transaction has been settled yet or not. Valid valuies: Settled, Unsettled</td>
</tr>
<tr>
<td>TerminalId</td>
<td>String</td>
<td>Reserved for Future Use</td>
</tr>
<tr>
<td>Token</td>
<td>String</td>
<td>The tokenized account number</td>
</tr>
<tr>
<td>TransactionId</td>
<td>Long Integer</td>
<td>The unique gateway ID for the transaction</td>
</tr>
<tr>
<td>TransactionIndustryType</td>
<td>String</td>
<td>A 2-3 character string that identifies what industry or SEC code the transaction was processed under. Valid values: RE (Retail), DM (Direct Marketing), EC (eCommerce), RS (Restaurant), LD (Lodging), PT (Petroleum), POP (Point Of Purchase), PPD (Prearranged Payment and Deposit), CCD (Corporate Credit or Debit), TEL (Telephone Initiated Entry), WEB (Internet Initiated Entry), C21 (Check 21)</td>
</tr>
<tr>
<td>TransactionSourceIP</td>
<td>String</td>
<td>The IP Address and Port where the transaction request originated</td>
</tr>
<tr>
<td>TransactionStatus</td>
<td>String</td>
<td>Identifies what state the transaction is in. Valid values: Open, Confirmed, or Voided.</td>
</tr>
<tr>
<td>TransactionType</td>
<td>String</td>
<td>Identifies the type of transaction that was requested. Valid values: Sale, Sale-Auth (authorization only), Credit, Void, Refund, Increment (incremental authorization).</td>
</tr>
<tr>
<td>VoidIndicator</td>
<td>Boolean</td>
<td>Indicates whether or not the transaction was voided before the batch was settled</td>
</tr>
</tbody></table>
<h2 id='operation-contract'>Operation Contract</h2>
<blockquote>
<p>This method returns a <code>TransactionSet</code> object as described above:</p>
</blockquote>
<div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="nf">PublicGetTransactionsByFilter</span><span class="p">(</span><span class="n">Credentials</span> <span class="n">credentials</span><span class="p">,</span> <span class="n">TransactionRowFilter</span> <span class="n">filterObject</span><span class="p">)</span>

</code></pre></div>
<p>At this time, the Reporting API provides only one operation contract for retrieving transactional data.</p>
<h2 id='reporting-tips-amp-examples'>Reporting Tips &amp; Examples</h2>
<p>There are two types of parameters in the TransactionRowFilter object: DBQuery Filters and Post-Query Filters.</p>

<p>Most of the parameters in the filter are DBQuery filters that are used directly against the persisted data store that contains the transactional data. However, some of the filters are Post-Query filters, meaning the filters are not applied until after the persisted data is retrieved. Post-Query filters have transformational logic that is better suited after the bulk of the query has been processed by the data store.</p>

<p>Filters that are processed directly against the data store also have specific comparison modes that can be utilized for easier queries. Review the comparison modes listed in the <a href"#transactionrowfilter">TransactionRowFilter</a> table for a full list.</p>
<h3 id='comparison-types'>Comparison Types</h3><h3 id='post-query-filters'>Post-Query Filters</h3>
<p>The following fields are Post-Query filters. They will not process until after the initial data store query has completed.</p>

<ul>
<li>TransactionStatus</li>
<li>CardBrand</li>
</ul>

<p>The data used to query on these parameters must be transformed before the filter can be applied. The data store resources are too time-consuming for these filters and they are therefore added after the data store query is completed. <b>You should never use a Post-Query Filter without first limiting the data store query with some DBQuery filters such as a date range and/or the merchant account information.</b></p>

<blockquote>
<p>Examples:</p>

<p>Returns all transactions of $1.00 or more:</p>
</blockquote>
<div class="highlight"><pre class="highlight xml tab-xml"><code><span class="nt">&lt;AmountRangeFrom&gt;</span>100<span class="nt">&lt;/AmountRangeFrom&gt;</span>
</code></pre></div>
<ul>
<li>GTE = Greater Than or Equal. The query will look for data that is greater than or equal to the data provided in the filter parameter.</li>
</ul>

<blockquote>
<p>Returns all transactions of $2.00 or less:</p>
</blockquote>
<div class="highlight"><pre class="highlight xml tab-xml"><code><span class="nt">&lt;AmountRangeTo&gt;</span>100<span class="nt">&lt;/AmountRangeTo&gt;</span>
</code></pre></div>
<ul>
<li>LTE = Less Than or Equal. The query will look for data that is less than or equal to the data provided in the filter parameter.</li>
</ul>

<blockquote>
<p>Returns all transactions with Invoice Number 2001:</p>
</blockquote>
<div class="highlight"><pre class="highlight xml tab-xml"><code><span class="nt">&lt;InoviceNumber&gt;</span>2001<span class="nt">&lt;/InvoiceNumber&gt;</span>
</code></pre></div>
<ul>
<li>EQUIV = Equals. The query will look for data that exactly matches the data provided in the filter parameter.</li>
</ul>

<blockquote>
<p>Returns all declined transactions:</p>
</blockquote>
<div class="highlight"><pre class="highlight xml tab-xml"><code><span class="nt">&lt;ResponseCode&gt;</span>D<span class="nt">&lt;/ResponseCode&gt;</span>
</code></pre></div>
<ul>
<li>CONTAINS = The query will look for data that contains the data provided in the filter parameter.</li>
</ul>

<blockquote>
<p>Returns all declined transactions with <a href="#gateway-message-codes">Gateway Message</a> codes D01-D09:</p>
</blockquote>
<div class="highlight"><pre class="highlight xml tab-xml"><code><span class="nt">&lt;ResponseCode&gt;</span>D0<span class="nt">&lt;/ResponseCode&gt;</span>
</code></pre></div>
<ul>
<li>INLIST = The query will look for data where the stored data matches one of the comma-delimited entries in the data provided in the filter parameter.</li>
</ul>

<blockquote>
<p>Returns only those transactions that were declined with <a href="#gateway-message-codes">Gateway Message</a> code D01:</p>
</blockquote>
<div class="highlight"><pre class="highlight xml tab-xml"><code><span class="nt">&lt;ResponseCode&gt;</span>D01<span class="nt">&lt;/ResponseCode&gt;</span>
</code></pre></div>
<ul>
<li>N/A = The parameter is either a Boolean parameter or does not affect the data filtering process.</li>
</ul>

<blockquote>
<p>Returns only those transactions that were declined with <a href="#gateway-message-codes">Gateway Message</a> code D01:</p>
</blockquote>
<div class="highlight"><pre class="highlight xml tab-xml"><code><span class="nt">&lt;ResponseCode&gt;</span>D01<span class="nt">&lt;/ResponseCode&gt;</span>
</code></pre></div>
<blockquote>
<p>Provides those transactions where the <a href="#gateway-result-codes">Gateway Result code</a> is equal to 00000, 00001, or 10012 only:</p>
</blockquote>
<div class="highlight"><pre class="highlight xml tab-xml"><code><span class="nt">&lt;TransResults&gt;</span>00000,00001,10012<span class="nt">&lt;/TransResults&gt;</span>
</code></pre></div>
<p>NOTE: <code>ExcludeTransResults</code> must be used with <code>TransResults</code>. It modifies the behavior of the TransResults field.</p>

<blockquote>
<p>Return all transactions where <a href="#gateway-result-codes">Gateway Result code</a> code is NOT equal to 00000, 00001, or 10012:</p>
</blockquote>
<div class="highlight"><pre class="highlight xml tab-xml"><code><span class="nt">&lt;TransResults&gt;</span>00000,00001,10012<span class="nt">&lt;/TransResults&gt;</span>
<span class="nt">&lt;ExcludeTransResults&gt;</span>1<span class="nt">&lt;/ExcludeTransResults&gt;</span>
</code></pre></div><h1 id='response-codes'>Response Codes</h1><h2 id='avs-response-codes'>AVS Response Codes</h2>
<aside class="warning">
 You should always inspect the AVSResult and CVResult fields as these can be good indicators of potential fraud. If you see a AVSResult or CVResult code that you do not want to accept because it may be too risky (such as "No Match" on the submitted Zip code), then you should submit a void transaction to cancel the authorization and advise the cardholder that their transaction has been declined.
</aside>

<table><thead>
<tr>
<th>Response Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>00</td>
<td>AVS Error - Retry, System unavailable or Timed out</td>
</tr>
<tr>
<td>40</td>
<td>Address not available (Address not verified)</td>
</tr>
<tr>
<td>43</td>
<td>Street address not available (not verified), ZIP matches</td>
</tr>
<tr>
<td>44</td>
<td>Address failed</td>
</tr>
<tr>
<td>45</td>
<td>Street address and ZIP don&#39;t match</td>
</tr>
<tr>
<td>46</td>
<td>Street address doesn&#39;t match, 5-digit ZIP matches</td>
</tr>
<tr>
<td>47</td>
<td>Street address doesn&#39;t match, 9-digit ZIP matches</td>
</tr>
<tr>
<td>4A</td>
<td>Street address or ZIP doesn&#39;t match</td>
</tr>
<tr>
<td>4D</td>
<td>Street address matches, ZIP does not</td>
</tr>
<tr>
<td>4E</td>
<td>Street address and 5-digit ZIP match</td>
</tr>
<tr>
<td>4F</td>
<td>Street address and ZIP match</td>
</tr>
<tr>
<td>53</td>
<td>Account holder name incorrect, billing postal code matches</td>
</tr>
<tr>
<td>55</td>
<td>Unrecognized response</td>
</tr>
<tr>
<td>5C</td>
<td>Account holder name incorrect, billing address matches</td>
</tr>
<tr>
<td>5F</td>
<td>Account holder name incorrect, billing address and postal code match</td>
</tr>
<tr>
<td>70</td>
<td>Account holder name matches</td>
</tr>
<tr>
<td>73</td>
<td>Account holder name and billing postal code match</td>
</tr>
<tr>
<td>7C</td>
<td>Account holder name and billing address match</td>
</tr>
<tr>
<td>7F</td>
<td>Account holder name, billing address and postal code match</td>
</tr>
<tr>
<td>80</td>
<td>AVS service not supported by issuer - Issuer doesn&#39;t participate in AVS</td>
</tr>
</tbody></table>
<h2 id='cvv-response-codes'>CVV Response Codes</h2>
<aside class="warning">
 You should always inspect the AVSResult and CVResult fields as these can be good indicators of potential fraud. If you see a AVSResult or CVResult code that you do not want to accept because it may be too risky (such as "No Match" on the submitted Zip code), then you should submit a void transaction to cancel the authorization and advise the cardholder that their transaction has been declined.
</aside>

<table><thead>
<tr>
<th>Response Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>M</td>
<td>Matches</td>
</tr>
<tr>
<td>N</td>
<td>No match</td>
</tr>
<tr>
<td>P</td>
<td>Not processed</td>
</tr>
<tr>
<td>S</td>
<td>Should be present</td>
</tr>
<tr>
<td>U</td>
<td>Issuer is not certified</td>
</tr>
<tr>
<td>X</td>
<td>Unrecognized reason</td>
</tr>
</tbody></table>
<h2 id='gateway-result-codes'>Gateway Result Codes</h2>
<table><thead>
<tr>
<th>Response Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>00000</td>
<td>Successful request</td>
</tr>
<tr>
<td>00001</td>
<td>Partial Authorization</td>
</tr>
<tr>
<td>10001</td>
<td>Missing Reference Number</td>
</tr>
<tr>
<td>10002</td>
<td>Invalid Card Number - Blank/Null</td>
</tr>
<tr>
<td>10003</td>
<td>Invalid Card Type - Doesn&#39;t match accepted card types</td>
</tr>
<tr>
<td>10004</td>
<td>Invalid Expiration Date - Blank/Null</td>
</tr>
<tr>
<td>10005</td>
<td>Invalid Security Code - Blank/Null</td>
</tr>
<tr>
<td>10007</td>
<td>Invalid Card Number - Not Numeric</td>
</tr>
<tr>
<td>10008</td>
<td>Invalid Length for card type</td>
</tr>
<tr>
<td>10009</td>
<td>Invalid Expiration Date - Card Expired</td>
</tr>
<tr>
<td>10010</td>
<td>Invalid Security Code - Not Numeric</td>
</tr>
<tr>
<td>10011</td>
<td>Invalid Transaction ID</td>
</tr>
<tr>
<td>10012</td>
<td>Invalid Card Number - Failed Mod10</td>
</tr>
<tr>
<td>10013</td>
<td>Invalid Expiration Date Value</td>
</tr>
<tr>
<td>10014</td>
<td>Invalid Security Code Length</td>
</tr>
<tr>
<td>10017</td>
<td>Invalid Expiration Date - Invalid Month</td>
</tr>
<tr>
<td>10018</td>
<td>Invalid Expiration Date - Invalid Year</td>
</tr>
<tr>
<td>10019</td>
<td>Invalid Expiration Date</td>
</tr>
<tr>
<td>10020</td>
<td>Invalid Client Identifier</td>
</tr>
<tr>
<td>10021</td>
<td>Invalid Request Element – Missing Element</td>
</tr>
<tr>
<td>10022</td>
<td>Invalid Request Type</td>
</tr>
<tr>
<td>10023</td>
<td>Password Expired</td>
</tr>
<tr>
<td>10024</td>
<td>Invalid Credentials</td>
</tr>
<tr>
<td>10025</td>
<td>Invalid Zip – Not Numeric</td>
</tr>
<tr>
<td>10026</td>
<td>Invalid Zip – Wrong Length</td>
</tr>
<tr>
<td>10027</td>
<td>Invalid Amount – Blank/Null</td>
</tr>
<tr>
<td>10028</td>
<td>Invalid Amount – Not Numeric</td>
</tr>
<tr>
<td>10029</td>
<td>Invalid Request Date/Time</td>
</tr>
<tr>
<td>10030</td>
<td>Invalid Token</td>
</tr>
<tr>
<td>10031</td>
<td>Invalid Track</td>
</tr>
<tr>
<td>10032</td>
<td>Invalid Track Identifier</td>
</tr>
<tr>
<td>10033</td>
<td>Invalid Void Request</td>
</tr>
<tr>
<td>10034</td>
<td>Invalid Encryption ID</td>
</tr>
<tr>
<td>10035</td>
<td>Invalid Account Number – Blank/Null</td>
</tr>
<tr>
<td>10036</td>
<td>Invalid Account Number – Not Numeric</td>
</tr>
<tr>
<td>10037</td>
<td>Invalid Payment Type – Blank/Null</td>
</tr>
<tr>
<td>10038</td>
<td>Invalid Payment Type – Unrecognized Payment Type</td>
</tr>
<tr>
<td>10039</td>
<td>Invalid Account Number – Account Number Does Not Exist</td>
</tr>
<tr>
<td>10040</td>
<td>Missing Required Pass-Thru Data Element</td>
</tr>
<tr>
<td>10041</td>
<td>Missing / Invalid BIN</td>
</tr>
<tr>
<td>10042</td>
<td>Already Voided</td>
</tr>
<tr>
<td>10050</td>
<td>Incorrect Trace Number</td>
</tr>
<tr>
<td>10051</td>
<td>Incorrect Merchant Setup</td>
</tr>
<tr>
<td>10052</td>
<td>Processing Network Error</td>
</tr>
<tr>
<td>10053</td>
<td>Credit Card Entry Refused by Receiver</td>
</tr>
<tr>
<td>10054</td>
<td>Mandatory Field Error</td>
</tr>
<tr>
<td>20001</td>
<td>Tokenization Service Connection Error</td>
</tr>
<tr>
<td>20002</td>
<td>Beyond Pay Internal Server Error</td>
</tr>
<tr>
<td>20003</td>
<td>Client Service Unavailable</td>
</tr>
<tr>
<td>20004</td>
<td>Payment Service Sensitive Data Timeout</td>
</tr>
<tr>
<td>30004</td>
<td>Invalid Request Message</td>
</tr>
<tr>
<td>30005</td>
<td>Invalid Response Message</td>
</tr>
<tr>
<td>30006</td>
<td>New Password Doesn&#39;t Match Confirmation Password</td>
</tr>
<tr>
<td>30007</td>
<td>New Password Too Weak</td>
</tr>
<tr>
<td>30008</td>
<td>Missing Payment Card Data</td>
</tr>
<tr>
<td>30009</td>
<td>Internal Payment Card Data Error</td>
</tr>
<tr>
<td>30010</td>
<td>Invalid Record Format</td>
</tr>
<tr>
<td>30011</td>
<td>Invalid Merchant Number (from Gateway)</td>
</tr>
<tr>
<td>30012</td>
<td>Bad Card Number (from Gateway)</td>
</tr>
<tr>
<td>30013</td>
<td>Invalid Store Number</td>
</tr>
<tr>
<td>30020</td>
<td>Invalid Transaction Industry Type</td>
</tr>
<tr>
<td>30021</td>
<td>Missing Transaction Industry Type</td>
</tr>
<tr>
<td>30022</td>
<td>Processing Network Unavailable</td>
</tr>
<tr>
<td>30023</td>
<td>Invalid Account Number</td>
</tr>
<tr>
<td>30024</td>
<td>No Account</td>
</tr>
<tr>
<td>30025</td>
<td>Invalid Security Code</td>
</tr>
<tr>
<td>30026</td>
<td>Invalid Amount</td>
</tr>
<tr>
<td>30027</td>
<td>Refund limit is reached for the day (occurs when merchant has reached the refund limit allowed per day on the account)</td>
</tr>
<tr>
<td>30028</td>
<td>Settlement Failed</td>
</tr>
<tr>
<td>30029</td>
<td>Transaction Error</td>
</tr>
<tr>
<td>30030</td>
<td>Transaction data integrity validation error</td>
</tr>
<tr>
<td>30032</td>
<td>Denied by customer’s bank</td>
</tr>
<tr>
<td>30033</td>
<td>Insufficient funds</td>
</tr>
<tr>
<td>30034</td>
<td>Hold - Pick up card</td>
</tr>
<tr>
<td>30035</td>
<td>Incorrect PIN</td>
</tr>
<tr>
<td>30036</td>
<td>Duplicate Transaction</td>
</tr>
<tr>
<td>30037</td>
<td>Card reported lost</td>
</tr>
<tr>
<td>30038</td>
<td>Card reported stolen</td>
</tr>
<tr>
<td>30039</td>
<td>Service not allowed</td>
</tr>
<tr>
<td>30040</td>
<td>Stop Recurring</td>
</tr>
<tr>
<td>30041</td>
<td>Unattempted Batch Decline</td>
</tr>
<tr>
<td>30042</td>
<td>Maximum transaction limit is exceeded at the moment. Try processing your transaction tomorrow.</td>
</tr>
<tr>
<td>30043</td>
<td>Re-enter Transaction</td>
</tr>
<tr>
<td>30044</td>
<td>Unmapped decline</td>
</tr>
<tr>
<td>30045</td>
<td>Billing profile configuration error</td>
</tr>
<tr>
<td>30046</td>
<td>Pin Try Exceeded</td>
</tr>
<tr>
<td>30047</td>
<td>Refund was not processed/received</td>
</tr>
<tr>
<td>30048</td>
<td>Chargeback received</td>
</tr>
<tr>
<td>30049</td>
<td>Processing Canceled by User</td>
</tr>
<tr>
<td>30050</td>
<td>Invalid Transaction Category</td>
</tr>
<tr>
<td>30051</td>
<td>Invalid Verification Status</td>
</tr>
<tr>
<td>30052</td>
<td>Invalid Terminal Type</td>
</tr>
<tr>
<td>30053</td>
<td>Invalid Petroleum Product Type</td>
</tr>
<tr>
<td>30060</td>
<td>Invalid IApp User Id</td>
</tr>
<tr>
<td>30061</td>
<td>Account insert failed</td>
</tr>
<tr>
<td>30062</td>
<td>Merchant insert failed</td>
</tr>
<tr>
<td>30070</td>
<td>New Password Previously Used</td>
</tr>
<tr>
<td>30071</td>
<td>Missing Clerk Id</td>
</tr>
<tr>
<td>30072</td>
<td>Call for Authorization</td>
</tr>
<tr>
<td>30073</td>
<td>Card is Restricted</td>
</tr>
<tr>
<td>30074</td>
<td>Declined due to fraud rules</td>
</tr>
<tr>
<td>30075</td>
<td>Bank Account Blacklisted</td>
</tr>
<tr>
<td>30076</td>
<td>Declined due to insufficient information</td>
</tr>
<tr>
<td>30077</td>
<td>Rejected by the processor</td>
</tr>
<tr>
<td>30078</td>
<td>Account Closed</td>
</tr>
<tr>
<td>30079</td>
<td>Invalid Account</td>
</tr>
<tr>
<td>30080</td>
<td>Account can not process ACH</td>
</tr>
<tr>
<td>30082</td>
<td>Invalid MICR</td>
</tr>
<tr>
<td>30083</td>
<td>Customer opt out check Conversion</td>
</tr>
<tr>
<td>30100</td>
<td>Invalid Account Data – Blank/Null</td>
</tr>
<tr>
<td>30101</td>
<td>Invalid EMV Tag Data – Blank/Null</td>
</tr>
<tr>
<td>40001</td>
<td>Lodging Reauth Failed</td>
</tr>
<tr>
<td>40002</td>
<td>Missing Lodging Folio Number</td>
</tr>
<tr>
<td>80000</td>
<td>Gateway Services Available</td>
</tr>
<tr>
<td>80001</td>
<td>Gateway Services Unavailable</td>
</tr>
<tr>
<td>80002</td>
<td>Invalid Purchase Token</td>
</tr>
<tr>
<td>80003</td>
<td>More than one result found for search criteria</td>
</tr>
<tr>
<td>80004</td>
<td>More than one service fee block received in request message</td>
</tr>
<tr>
<td>80005</td>
<td>Cascade Void. Indicates that the transaction was successfully authorized (fully or partially) and then voided due to an auto-void policy setting.  Only occurs on principal transactions and only when the accompanying service fee was either declined or voided due to an auto-void policy setting.</td>
</tr>
<tr>
<td>80006</td>
<td>Partial Auto Void. Indicates that the transaction was partially authorized and then voided due to an auto-void policy setting.  Can occur on a service fee or principal transaction.</td>
</tr>
<tr>
<td>80007</td>
<td>Database query processing error.  Can occur on a Find Transaction request if the data requested is unavailable.</td>
</tr>
<tr>
<td>80008</td>
<td>Invalid GatewayTransID</td>
</tr>
<tr>
<td>80009</td>
<td>Invalid MerchantCode</td>
</tr>
<tr>
<td>800010</td>
<td>Invalid MerchantAccountCode</td>
</tr>
<tr>
<td>800011</td>
<td>Transaction not found</td>
</tr>
<tr>
<td>800012</td>
<td>Invalid Length for PersistData</td>
</tr>
<tr>
<td>90000</td>
<td>Token Store failed to encrypt a token</td>
</tr>
<tr>
<td>90001</td>
<td>Token Store failed to decrypt a token</td>
</tr>
<tr>
<td>99999</td>
<td>Unknown Error</td>
</tr>
</tbody></table>
<h2 id='gateway-message-codes'>Gateway Message Codes</h2>
<table><thead>
<tr>
<th>Gateway Message Code</th>
<th>Message</th>
</tr>
</thead><tbody>
<tr>
<td>A01</td>
<td>Approved: XXXXXX (approval code)</td>
</tr>
<tr>
<td>A02</td>
<td>Credit Posted</td>
</tr>
<tr>
<td>A03</td>
<td>Void Posted (Auth Reversed)</td>
</tr>
<tr>
<td>A04</td>
<td>No Update</td>
</tr>
<tr>
<td>A05</td>
<td>Partially Approved</td>
</tr>
<tr>
<td>A06</td>
<td>Void Posted (Auth Not Reversed)</td>
</tr>
<tr>
<td>A07</td>
<td>Partial Void Posted</td>
</tr>
<tr>
<td>A08</td>
<td>Partial Refund Posted</td>
</tr>
<tr>
<td>A09</td>
<td>Incremental Auth Posted</td>
</tr>
<tr>
<td>A10</td>
<td>Request Accepted</td>
</tr>
<tr>
<td>A11</td>
<td>Approval (Reversal failed)</td>
</tr>
<tr>
<td>A60</td>
<td>Terminal Offline Approval - EMV/Chip</td>
</tr>
<tr>
<td>A61</td>
<td>Terminal Offline Approval - Swipe</td>
</tr>
<tr>
<td>A62</td>
<td>Terminal Offline Approval - Credit</td>
</tr>
<tr>
<td>D01</td>
<td>Denied by customer&#39;s bank</td>
</tr>
<tr>
<td>D02</td>
<td>Invalid Expiration Date</td>
</tr>
<tr>
<td>D03</td>
<td>Insufficient funds</td>
</tr>
<tr>
<td>D04</td>
<td>Hold - Pick up card</td>
</tr>
<tr>
<td>D05</td>
<td>Invalid card number</td>
</tr>
<tr>
<td>D06</td>
<td>No account</td>
</tr>
<tr>
<td>D07</td>
<td>Incorrect PIN</td>
</tr>
<tr>
<td>D08</td>
<td>CSC is invalid</td>
</tr>
<tr>
<td>D09</td>
<td>Duplicate Transaction</td>
</tr>
<tr>
<td>D10</td>
<td>Card reported lost/stolen</td>
</tr>
<tr>
<td>D11</td>
<td>Card reported stolen</td>
</tr>
<tr>
<td>D12</td>
<td>Service not allowed</td>
</tr>
<tr>
<td>D13</td>
<td>Stop Recurring</td>
</tr>
<tr>
<td>D15</td>
<td>Maximum transaction limit is exceeded</td>
</tr>
<tr>
<td>D16</td>
<td>Card is expired</td>
</tr>
<tr>
<td>D17</td>
<td>Re-enter Transaction</td>
</tr>
<tr>
<td>D18</td>
<td>Bad Amount</td>
</tr>
<tr>
<td>D19</td>
<td>Unmapped decline</td>
</tr>
<tr>
<td>D20</td>
<td>Billing profile configuration error</td>
</tr>
<tr>
<td>D21</td>
<td>PIN try excdeed</td>
</tr>
<tr>
<td>D22</td>
<td>Refund was not processed/received</td>
</tr>
<tr>
<td>D24</td>
<td>Chargeback received</td>
</tr>
<tr>
<td>D25</td>
<td>Refund limit is reached for the day</td>
</tr>
<tr>
<td>D26</td>
<td>Settlement Failed</td>
</tr>
<tr>
<td>D27</td>
<td>Transaction Error</td>
</tr>
<tr>
<td>D28</td>
<td>Cashback limit exceeded/Cashback unavailable</td>
</tr>
<tr>
<td>D29</td>
<td>Card is restricted</td>
</tr>
<tr>
<td>D30</td>
<td>Call for Authorization</td>
</tr>
<tr>
<td>D31</td>
<td>Declined due to fraud rules</td>
</tr>
<tr>
<td>D32</td>
<td>Declined due to fraud engine decision</td>
</tr>
<tr>
<td>D33</td>
<td>Incorrect merchant setup</td>
</tr>
<tr>
<td>D34</td>
<td>Merchant profile configuration issue</td>
</tr>
<tr>
<td>D35</td>
<td>Card chip decline</td>
</tr>
<tr>
<td>E02</td>
<td>Processing Network Unavailable</td>
</tr>
<tr>
<td>E03</td>
<td>Transaction data integrity validation error</td>
</tr>
<tr>
<td>E04</td>
<td>Refund limit is reached for the day</td>
</tr>
<tr>
<td>E06</td>
<td>Card is blacklisted</td>
</tr>
<tr>
<td>E07</td>
<td>Tokenization is not supported</td>
</tr>
<tr>
<td>E08</td>
<td>Refunds are not allowed</td>
</tr>
<tr>
<td>E09</td>
<td>Processing Network Error</td>
</tr>
<tr>
<td>E10</td>
<td>3D Secure Verification Failed</td>
</tr>
<tr>
<td>E31</td>
<td>Declined due to pre-processing rules</td>
</tr>
<tr>
<td>X01</td>
<td>Processing Cancelled by User</td>
</tr>
<tr>
<td>X02</td>
<td>Pending processing</td>
</tr>
<tr>
<td>X03</td>
<td>3D Secure Verification Required</td>
</tr>
<tr>
<td>X04</td>
<td>Processing cancelled: the request has expired</td>
</tr>
</tbody></table>
<h1 id='test-cards-and-triggers'>Test Cards and Triggers</h1><h2 id='cards-and-checks'>Cards and Checks</h2>
<p>You can use the following card numbers for testing. CVV numbers are 1234 or 1111 for Amex; all others are 111 or 999.</p>

<table><thead>
<tr>
<th>Card Type</th>
<th>Card Brand</th>
<th>Card Number</th>
<th>Expiration Date</th>
</tr>
</thead><tbody>
<tr>
<td>Credit</td>
<td>Visa</td>
<td>4111111111111111</td>
<td>10/25</td>
</tr>
<tr>
<td>Credit</td>
<td>MasterCard</td>
<td>5499740000000057</td>
<td>10/25</td>
</tr>
<tr>
<td>Credit</td>
<td>Discover</td>
<td>6011000991001201</td>
<td>10/25</td>
</tr>
<tr>
<td>Credit</td>
<td>Amex</td>
<td>371449635392376</td>
<td>10/25</td>
</tr>
<tr>
<td>Debit</td>
<td>Visa</td>
<td>4217651111111119</td>
<td>10/25</td>
</tr>
<tr>
<td>Debit</td>
<td>MasterCard</td>
<td>5149612222222229</td>
<td>10/25</td>
</tr>
</tbody></table>

<p>The following information may be used for ACH / eCheck testing:</p>

<table><thead>
<tr>
<th>Bank Account Number</th>
<th>Routing Number</th>
<th>Account Type</th>
</tr>
</thead><tbody>
<tr>
<td>4099999992</td>
<td>021000021</td>
<td>Checking</td>
</tr>
</tbody></table>
<h2 id='trigger-amounts'>Trigger Amounts</h2>
<p>As part of your development and testing efforts, the amount ranges specified below can be used to trigger specific response codes from the server. These test ranges may be used with any valid card number.</p>
<h3 id='card-response-triggers'>Card Response Triggers</h3>
<table><thead>
<tr>
<th>Amount</th>
<th>Response Code</th>
<th>Response Message</th>
</tr>
</thead><tbody>
<tr>
<td>0.01 - 0.99</td>
<td>D01</td>
<td>Denied by customer&#39;s bank (Do Not Honor)</td>
</tr>
<tr>
<td>1.00</td>
<td>A01</td>
<td>Approved</td>
</tr>
<tr>
<td>1.01 - 4.98</td>
<td>D01</td>
<td>Denied by customer&#39;s bank (Do Not Honor)</td>
</tr>
<tr>
<td>4.99</td>
<td>20002</td>
<td>Internal ServerError</td>
</tr>
<tr>
<td>5.00 - 69.99</td>
<td>A01</td>
<td>Approved</td>
</tr>
<tr>
<td>70.00 - 79.99</td>
<td>D05</td>
<td>Invalid card number</td>
</tr>
<tr>
<td>80.00 - 89.99</td>
<td>D10</td>
<td>Card reported lost/stolen</td>
</tr>
<tr>
<td>90.00 - 99.99</td>
<td>D30</td>
<td>Call for authorization</td>
</tr>
<tr>
<td>100.00 - 109.99</td>
<td>D04</td>
<td>Pick up card</td>
</tr>
<tr>
<td>110.00 - 119.99</td>
<td>D08</td>
<td>Invalid security code</td>
</tr>
<tr>
<td>120.00 - 129.99</td>
<td>D03</td>
<td>Insufficient funds</td>
</tr>
<tr>
<td>130.00 - 139.99</td>
<td>E02</td>
<td>Processing network unavailable</td>
</tr>
<tr>
<td>140.00 - 149.99</td>
<td>E09</td>
<td>Internal ServerError</td>
</tr>
<tr>
<td>150.00 - 159.99</td>
<td>A05</td>
<td>Partially approved [approved amount will be $10 less than the requested amount]</td>
</tr>
<tr>
<td>170.00 - 181.99</td>
<td>A01</td>
<td>Approved</td>
</tr>
<tr>
<td>182.00 - 1999.99</td>
<td>D01</td>
<td>Denied by customer&#39;s bank (Do Not Honor)</td>
</tr>
</tbody></table>
<h3 id='ach-echeck-response-triggers'>ACH/eCheck Response Triggers</h3>
<table><thead>
<tr>
<th>Amount</th>
<th>Response Code</th>
<th>Response Message</th>
</tr>
</thead><tbody>
<tr>
<td>170.00 - 171.99</td>
<td>C01</td>
<td>Customer&#39;s account number is incorrect</td>
</tr>
<tr>
<td>172.00 - 173.99</td>
<td>C02</td>
<td>Customer&#39;s routing number is incorrect</td>
</tr>
<tr>
<td>174.00 - 175.99</td>
<td>C03</td>
<td>Customer&#39;s routing number and DFI account numbers are incorrect</td>
</tr>
<tr>
<td>176.00 - 177.99</td>
<td>C04</td>
<td>Customer&#39;s name is incorrect</td>
</tr>
<tr>
<td>178.00 - 179.00</td>
<td>C05</td>
<td>Customer&#39;s account type (Savings/Checking) is incorrect</td>
</tr>
<tr>
<td>180.00 - 181.99</td>
<td>C06</td>
<td>Account number is incorrect and transaction is being routed to the wrong type of account</td>
</tr>
</tbody></table>
<h3 id='avs-response-triggers'>AVS Response Triggers</h3>
<table><thead>
<tr>
<th>ZIP Code</th>
<th>AVS Response Code</th>
<th>AVS Response Message</th>
</tr>
</thead><tbody>
<tr>
<td>11111</td>
<td>00</td>
<td>AVS Error - Retry, System unavailable, or Timed out</td>
</tr>
<tr>
<td>22222</td>
<td>46</td>
<td>Street address doesn&#39;t match, 5-digit ZIP matches</td>
</tr>
<tr>
<td>33333</td>
<td>43</td>
<td>Street address not available (not verified), ZIP matches</td>
</tr>
<tr>
<td>44444</td>
<td>40</td>
<td>Address failed</td>
</tr>
<tr>
<td>55555</td>
<td>4F</td>
<td>Street address and ZIP match</td>
</tr>
</tbody></table>
<h3 id='refund-quot-blind-credit-quot-response-triggers'>Refund (&quot;Blind Credit&quot;) Response Triggers</h3>
<table><thead>
<tr>
<th>Amount</th>
<th>Response Code</th>
<th>Response Message</th>
</tr>
</thead><tbody>
<tr>
<td>0.01 - 4.99</td>
<td>D01</td>
<td>Denied by customer&#39;s bank (Do Not Honor)</td>
</tr>
<tr>
<td>5.00 - 69.99</td>
<td>A02</td>
<td>Credit Posted</td>
</tr>
<tr>
<td>70.00+</td>
<td>D01</td>
<td>Denied by customer&#39;s bank (Do Not Honor)</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="php">php</a>
                <a href="#" data-language-name="csharp">c#</a>
                <a href="#" data-language-name="java">java</a>
          </div>
      </div>
    </div>
  </body>
</html>
